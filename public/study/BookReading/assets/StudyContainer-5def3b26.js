import{r,j as e}from"./react-352f2a77.js";import{A as se,g as Ee,G as Pe,a as hr,S as _r,b as pr,l as Eo,s as Ie,d as _s,c as Zs,e as $i,f as Ci,h as Qi,i as At,j as Nt,k as be,m as Sn,n as gr,o as We,p as Ai,q as yr,r as Ni,t as fr}from"./index-9b08c7ae.js";import{M as N}from"./mobile-detect-593efabc.js";import{l as ge}from"./lodash-be97eb06.js";import{a as xn}from"./axios-78cd9fea.js";import{u as de,T as _n}from"./react-i18next-4302e501.js";import{r as hn}from"./react-string-replace-363c8b43.js";import{i as Ti}from"./react-device-detect-b5e51189.js";import{_ as zn}from"./react-lottie-31bb2fb7.js";import{g as br}from"./get-blob-duration-f0a6886f.js";import"./babel-runtime-2956c6ea.js";import"./core-js-5c4c0504.js";import"./react-dom-3faeee5a.js";import"./scheduler-765c72db.js";/* empty css                    */import"./i18next-21d03132.js";import"./html-parse-stringify-00dfa3a5.js";import"./void-elements-04510edf.js";import"./ua-parser-js-44b95651.js";import"./prop-types-387d7a00.js";import"./lottie-web-bda9e5a1.js";const en=()=>{const{bookInfo:t}=r.useContext(se),o=window.REF,n=o.Unit||o.unit;let s="baro";if(n!==void 0&&n!=="")s=n.replace("https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/").replace(".png");else switch(t.BookLevel){case"6C":case"6B":case"6A":case"5C":case"5B":case"5A":s="dodo";break;case"4C":case"4B":case"4A":s="gino";break;case"3C":s="goma";break;case"3B":s="leoni";break;case"3A":s="edmond";break;case"2C":s="roro";break;case"2B":s="tori";break;case"2A":s="greenthumb";break;case"1C":s="blanc";break;case"1B":s="sheila";break;case"1A":s="jack";break;case"KC":s="millo";break;case"KB":s="chello";break;default:s="baro"}return s};async function vr(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/cloze-test-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}async function wr(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/cloze-test-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),IsEnablePenaltyReview:!!a.IsEnablePenaltyReview,Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}async function kr(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/cloze-test-3?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),IsEnablePenaltyReview:!!a.IsEnablePenaltyReview,Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}const Sr="_comment_nvkn8_2",jr="_wordPlayButton_nvkn8_21",zr="_txtL_nvkn8_36",$r="_cardNumber_nvkn8_47",Cr="_testReview_nvkn8_62",Qr="_title_nvkn8_65",Ar="_container_nvkn8_70",Nr="_sentence_nvkn8_79",Tr="_nextButton_nvkn8_88",Ir="_deactNextButton_nvkn8_110",Er="_reviewAnswer_nvkn8_131",Br="_currentOrder_nvkn8_140",Pr="_blink_nvkn8_1",Mr="_currentInput_nvkn8_160",Lr="_otherInput_nvkn8_161",Rr="_enterButton_nvkn8_168",Fr="_hintText_nvkn8_194",qr="_clozeTest1_nvkn8_204",Hr="_textCard_nvkn8_208",Or="_correct_nvkn8_243",Dr="_incorrect_nvkn8_248",Vr="_awnserText_nvkn8_253",Wr="_answers_nvkn8_258",Gr="_questionBox_nvkn8_271",Kr="_answerBox_nvkn8_296",Ur="_correctAnswer_nvkn8_313",Jr="_incorrectAnswer_nvkn8_317",Yr="_clozeTest2_nvkn8_328",Xr="_clozeTest3_nvkn8_439",ct={comment:Sr,wordPlayButton:jr,txtL:zr,cardNumber:$r,testReview:Cr,title:Qr,container:Ar,sentence:Nr,nextButton:Tr,deactNextButton:Ir,reviewAnswer:Er,currentOrder:Br,blink:Pr,currentInput:Mr,otherInput:Lr,enterButton:Rr,hintText:Fr,clozeTest1:qr,textCard:Hr,correct:Or,incorrect:Dr,awnserText:Vr,answers:Wr,questionBox:Gr,answerBox:Kr,correctAnswer:Ur,incorrectAnswer:Jr,clozeTest2:Yr,clozeTest3:Xr},Zr="_comment_9x6vp_2",ea="_wordPlayButton_9x6vp_16",ta="_txtL_9x6vp_31",na="_cardNumber_9x6vp_42",sa="_testReview_9x6vp_57",oa="_title_9x6vp_57",ia="_container_9x6vp_62",ra="_sentence_9x6vp_71",aa="_nextButton_9x6vp_79",ca="_deactNextButton_9x6vp_101",ua="_reviewAnswer_9x6vp_122",la="_currentOrder_9x6vp_131",da="_blink_9x6vp_1",ma="_currentInput_9x6vp_153",xa="_otherInput_9x6vp_154",ha="_hintText_9x6vp_162",_a="_clozeTest1_9x6vp_172",pa="_textCard_9x6vp_176",ga="_correct_9x6vp_211",ya="_incorrect_9x6vp_216",fa="_awnserText_9x6vp_221",ba="_answers_9x6vp_226",va="_questionBox_9x6vp_236",wa="_answerBox_9x6vp_256",ka="_correctAnswer_9x6vp_273",Sa="_incorrectAnswer_9x6vp_277",ja="_clozeTest2_9x6vp_288",za="_enterButton_9x6vp_354",$a="_clozeTest3_9x6vp_381",mt={comment:Zr,wordPlayButton:ea,txtL:ta,cardNumber:na,testReview:sa,title:oa,container:ia,sentence:ra,nextButton:aa,deactNextButton:ca,reviewAnswer:ua,currentOrder:la,blink:da,currentInput:ma,otherInput:xa,hintText:ha,clozeTest1:_a,textCard:pa,correct:ga,incorrect:ya,awnserText:fa,answers:ba,questionBox:va,answerBox:wa,correctAnswer:ka,incorrectAnswer:Sa,clozeTest2:ja,enterButton:za,clozeTest3:$a},ze=()=>{const[t,o]=r.useState(!0);return{isStepIntro:t,closeStepIntro:s=>{o(!1),s&&s()}}};function Ca(t,o){const n=r.useRef();r.useEffect(()=>{n.current=t},[t]),r.useEffect(()=>{function s(){n.current&&n.current()}s();const i=setInterval(s,o);return()=>{clearInterval(i)}},[o])}function $e(t){const o=r.useRef(),[n,s]=r.useState(-1),[i,u]=r.useState(-1),[d,a]=r.useState(0),[h,_]=r.useState(!0),[v,y]=r.useState({timeMin:0,timeSec:0}),g=()=>{a(Date.now()),_(!1)},b=()=>{s(i),_(!0)},k=(m,c)=>{const l=m%60,x=(m-l)/60;y({timeMin:x,timeSec:l}),s(m),c?g():_(!0)};return r.useEffect(()=>{o.current=t},[t]),Ca(()=>{if(!h){const m=Math.floor((Date.now()-d)/1e3),c=n-m,l=c>=0?c%60:0,x=c>=0?(c-l)/60:0;c<=0&&(b(),o.current&&o.current()),y({timeMin:x,timeSec:l}),u(c)}},1e3),{time:v,setup:k,start:g,stop:b,isFinish:v.timeMin+v.timeSec<=0}}const Bo=["animate__animated"],lt=()=>({isContain:(o,n)=>o.classList.contains(n),play:(o,n,s)=>{o.classList.add(...Bo,...n),s&&s()},remove:(o,n)=>{o.classList.remove(...n,...Bo)},removeAndPlay:(o,n,s)=>{o.classList.remove(...n),o.classList.add(...s)}});async function Qa(t){const o=`${hr}?studentHistoryId=${t.studentHistoryId}&studyId=${t.studyId}`;return Ee(o,async s=>s.map(i=>({ChallengeNumber:i.ChallengeNumber,BookId:i.BookId,Page:i.Page,QuizNo:i.QuizNo,Css:i.Css,Contents:i.Contents,FontColor:i.FontColor,ImagePath:i.ImagePath,Sequence:i.Sequence,SoundPath:i.SoundPath,MarginTop:Number(i.MarginTop),MarginLeft:Number(i.MarginLeft),DataPath:i.DataPath,Sentence:i.Sentence})))}const Po=async t=>await xn.get(`/${pr}?studyId=${t.studyId}&studentHistoryId=${t.studentHistoryId}`).then(n=>n.data).catch(n=>{console.error(n)}),Ii=async t=>{let o={result:0,resultMessage:""};try{o=await xn.post(`/${_r}`,t).then(n=>n.data)}catch{throw new Error("API Load Failed 2")}return o},Ce=(t,o,n,s)=>{const[i,u]=r.useState(),[d,a]=r.useState([]);return r.useEffect(()=>{(async()=>{const _=await t(o);if(!_)throw new Error("No StudyData Error");let v;s?v=await Eo("R",o):v=await Eo(n,o),u(_),a(v)})()},[t]),[i,d]},Aa=(t,o,n)=>{const[s,i]=r.useState(),[u,d]=r.useState([]);return r.useEffect(()=>{(async()=>{const h=await t(o);if(!h)throw new Error("No StudyData Error");let _;n?_=await Po(o):_=await Po(o),i(h),d(_)})()},[t]),[s,u]},ut=(t,o,n)=>{let s=1,i=0;if(t==="student"&&o&&o.length>0){const u=o[o.length-1];u.AnswerCount===n||u.OX==="1"?s=u.CurrentQuizNo+1:(s=u.CurrentQuizNo,i=u.AnswerCount)}return[s,i]},Na=(t,o,n,s)=>{let i=1,u=1,d=0;if(t==="student"&&o&&o.length>0){const a=o[o.length-1],h=a.StudentAnswer.split(","),_=h[h.length-1].slice(-1),v=h[h.length-1].length;v===s||_==="1"?(h.length===n?u=a.QuizNo+1:u=a.QuizNo,i=a.CurrentQuizNo+1):(i=a.CurrentQuizNo,u=a.QuizNo,d=v)}return[i,u,d]},Ta=(t,o,n)=>{let s=1,i=0;if(t==="student"&&o&&o.length>0){const u=o[o.length-1],d=u.StudentAnswer.split("/"),a=d.filter(v=>v.length===n||v.slice(-1)==="1").length,h=d.length;if(a===h)s=u.QuizNo+1;else{const v=d.map(y=>y.length);s=u.CurrentQuizNo,i=Math.max(...v)}}return[s,i]},Ia=(t,o,n)=>{let s=1,i=0;if(t==="student"&&o&&o.length>0){const u=o[o.length-1];u.AnswerCount===n||u.AnswerCount===null?s=u.CurrentQuizNo+1:(s=u.CurrentQuizNo,i=u.AnswerCount)}return[s,i]},Qe=(t,o="normal")=>{const[n,s]=r.useState([]),i=(l,x)=>{const p=b(l,x);s(p)},u=(l,x)=>{const p=b(l,x);s(p)},d=(l,x)=>{let p;o==="normal"?p=k(l,x):p=m(l,x),s(p)},a=(l,x)=>{if(t!=="review"||x){let p=[];n.length>0&&(p=[...n]),l.maxCount>1&&n.find(w=>w.quizNo===l.quizNo)?p=ge.map(n,w=>w.quizNo===l.quizNo&&w.answerCount<l.maxCount?{...w,quizNo:l.quizNo,maxCount:l.maxCount,answerCount:l.answerCount,ox:l.ox}:w):p.push(l),s(p)}},h=l=>{if(t!=="review"){let x=[];n.length>0&&(x=[...n]),l.map(p=>{p.maxCount>1&&n.find(w=>w.quizNo===p.quizNo)?x=ge.map(n,w=>w.quizNo===p.quizNo&&w.answerCount<p.maxCount?{...w,quizNo:p.quizNo,maxCount:p.maxCount,answerCount:p.answerCount,ox:p.ox}:w):x.push(p)}),s(x)}},_=(l,x,p)=>{const f=[...n,l],w=100/x;let S=0;return f.map(M=>{if(M.ox)switch(M.answerCount){case 1:S+=1*w;break;case 2:S+=.5*w;break;case 3:S+=.25*w;break}else M.answerCount}),Math.round(S)},v=({mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:w,quizId:S,quizNo:M,currentQuizNo:z,correct:P,selectedAnswer:C,tryCount:j,maxQuizCount:B,quizLength:R,isCorrect:O,answerData:W,isEnabledPenalty:V,isFinishStudy:q})=>{let T;if(z+1>R)if(O){const I=_(W,R,B);T={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,answerCount:j,isLastQuiz:!0,score:I,isFinishStudy:q}}else if(j>=B){const I=_(W,R,B);T={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,answerCount:j,isLastQuiz:!0,score:I,isEnabledPenalty:V,isFinishStudy:q}}else T={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,answerCount:j};else V?T={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,answerCount:j,isEnabledPenalty:j>=B?!0:void 0}:T={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,answerCount:j};return T},y=({mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:w,quizId:S,quizNo:M,currentQuizNo:z,correct:P,selectedAnswer:C,partialRecord:j,tryCount:B,maxQuizCount:R,quizLength:O,isCorrect:W,answerData:V,isEnabledPenalty:q,isFinishStudy:T})=>{let I;if(z+1>O)if(W){const G=_(V,O,R);I={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,partialRecord:j,answerCount:B,isLastQuiz:!0,score:G,isFinishStudy:T}}else if(B>=R){const G=_(V,O,R);I={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,partialRecord:j,answerCount:B,isLastQuiz:!0,score:G,isEnabledPenalty:q,isFinishStudy:T}}else I={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,partialRecord:j,answerCount:B};else I={mobile:l,studyId:x,studentHistoryId:p,bookType:f,step:`${w}`,quizId:S,quizNo:M,currentQuizNo:z,correct:P,studentAnswer:C,partialRecord:j,answerCount:B,isEnabledPenalty:B>=R?!0:void 0};return I},g=()=>{s([])},b=(l,x)=>{let p=[];return l.map(f=>{p.push({quizNo:f.CurrentQuizNo,maxCount:x,answerCount:f.AnswerCount,ox:f.OX==="1"})}),p},k=(l,x)=>{let p=[],f=1;return l.map(w=>{w.StudentAnswer.split(",").map(S=>{const M=S.charAt(S.length-1);p.push({quizNo:f++,maxCount:x,answerCount:S.split("").length,ox:M==="1"})})}),p},m=(l,x)=>{let p=[],f=1;return l.map(w=>{w.StudentAnswer.split("/").map(S=>{const M=S.charAt(S.length-1);p.push({quizNo:f++,maxCount:x,answerCount:S.split("").length,ox:M==="1"})})}),p};return{scoreBoardData:n,setStudentAnswers:i,setStudentAnswersSummary1ReviewFail:u,setStudentAnswersPartial:d,addStudentAnswer:a,addStudentAnswers:h,getScore:_,makeUserAnswerData:v,makeUserPartialAnswerData:y,resetStudentAnswer:g,convertRecordToScoreBoard:b,convertPartialRecordToScoreBoard:k,convertPartialRecordToScoreBoardClozeTest3:m,convertPartialRecordToScoreBoardSummary2:(l,x)=>{let p=[],f=1;return l.map(w=>{w.StudentAnswer.split(",").map(S=>{const M=S.charAt(S.length-1);p.push({quizNo:f++,maxCount:x,answerCount:S.split("").length,ox:M==="1"})})}),p}}};function Le(){const[t,o]=r.useState(""),n=r.useRef(new Audio);n.current.autoplay=!0;const s=n.current,i=r.useRef();r.useEffect(()=>{if(t==="playing"||t==="endFn"){const h=()=>{s.play()};s.addEventListener("canplaythrough",h);const _=()=>{t==="endFn"?i.current&&i.current():o("")};return s.addEventListener("ended",_),()=>{s.removeEventListener("canplaythrough",h),s.removeEventListener("ended",_),o(""),d()}}},[t]);const u=(h,_)=>{s.src=h,_?(i.current=_,o("endFn")):o("playing")},d=()=>{s.pause(),s.src="",s.currentTime=0,o("")};return{playState:t,changePlayState:h=>{o(h)},playAudio:u,stopAudio:d}}const Ea="/study/BookReading/assets/next-4ea4479a.mp3";let ks;const Ba=new Audio(Ea),eo=t=>{ks=new Audio(t),ks.volume=.7,(()=>{ks.play()})()},Pa=()=>{Ba.play()},Ma="/study/BookReading/assets/correct_sound-1fe2efd8.mp3",La="/study/BookReading/assets/incorrect_sound-28d1d148.mp3";function Xe(){const[t,o]=r.useState({isActive:!1,isCorrect:!1});return r.useEffect(()=>{t.isActive&&eo(t.isCorrect?Ma:La)},[t]),{bottomPopupState:t,changeBottomPopupState:s=>{o(s)}}}const Re=()=>{const[t,o]=r.useState(!1);return{isResultShow:t,changeResultShow:s=>{o(s)}}},Ra="_stepIntro_1tev1_1",Fa="_container_1tev1_8",qa="_stepOrder_1tev1_16",Ha="_quizType_1tev1_24",Oa="_comment_1tev1_33",Da="_readingUnit_1tev1_43",Va="_startButton_1tev1_50",Wa="_revisionIntro_1tev1_73",Ga="_revisionBoard_1tev1_115",Ka="_txtLabel_1tev1_128",Ua="_txtCount_1tev1_140",Ja="_revisionFreeIntro_1tev1_175",Ya="_selectBox_1tev1_254",Xa="_passButton_1tev1_259",Za="_goButton_1tev1_281",ps={stepIntro:Ra,container:Fa,stepOrder:qa,quizType:Ha,comment:Oa,readingUnit:Da,startButton:Va,revisionIntro:Wa,revisionBoard:Ga,txtLabel:Ka,txtCount:Ua,revisionFreeIntro:Ja,selectBox:Ya,passButton:Xa,goButton:Za},ec="_stepIntro_1tq26_1",tc="_container_1tq26_8",nc="_stepOrder_1tq26_16",sc="_quizType_1tq26_24",oc="_comment_1tq26_36",ic="_readingUnit_1tq26_47",rc="_startButton_1tq26_54",ac="_revisionIntro_1tq26_77",cc="_revisionBoard_1tq26_122",uc="_txtLabel_1tq26_135",lc="_txtCount_1tq26_147",dc="_revisionFreeIntro_1tq26_182",mc="_selectBox_1tq26_264",xc="_passButton_1tq26_270",hc="_goButton_1tq26_292",gs={stepIntro:ec,container:tc,stepOrder:nc,quizType:sc,comment:oc,readingUnit:ic,startButton:rc,revisionIntro:ac,revisionBoard:cc,txtLabel:uc,txtCount:lc,revisionFreeIntro:dc,selectBox:mc,passButton:xc,goButton:hc},_c=new N(navigator.userAgent),pc=_c.phone(),Ft=pc?gs:ps;function Me({step:t,quizType:o,comment:n,onStepIntroClozeHandler:s}){const i=en();return e.jsx("div",{className:Ft.stepIntro,children:e.jsxs("div",{className:`${Ft.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:Ft.stepOrder,children:t==="R"?"Re Test":`Step ${t}`}),e.jsx("div",{className:Ft.quizType,children:o}),e.jsx("div",{className:Ft.comment,children:n}),e.jsx("div",{className:Ft.readingUnit,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${i}_13.png`,alt:""})}),e.jsx("div",{className:Ft.startButton,onClick:()=>{s(),document.fullscreenElement&&document.exitFullscreen()},children:"Start"})]})})}const gc="/study/BookReading/assets/icon_play_red-63042177.svg",yc="/study/BookReading/assets/icon_stop_gray-683765e6.svg",fc="/study/BookReading/assets/icon_heart-248c237d.svg",bc="/study/BookReading/assets/icon_return-9e97dd23.svg",vc="/study/BookReading/assets/arrow-right_white-10eaa94b.svg",Fe=({width:t,height:o,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:gc,width:t,height:o})}),qe=({width:t,height:o,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:yc,width:t,height:o})}),wc=({width:t,height:o,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:fc,width:t,height:o})}),ys=({width:t,height:o})=>e.jsx(e.Fragment,{children:e.jsx("img",{src:bc,width:t,height:o})}),kc=({width:t,height:o})=>e.jsx(e.Fragment,{children:e.jsx("img",{src:vc,width:t,height:o})}),Sc="_quizTemplate_5sxpl_1",jc="_quizHeader_5sxpl_9",zc="_quizHeaderCol1_5sxpl_23",$c="_quizNumber_5sxpl_27",Cc="_attempts_5sxpl_37",Qc="_txtL_5sxpl_46",Ac="_qMark_5sxpl_51",Nc="_quizHeaderCol2_5sxpl_63",Tc="_quizTimer_5sxpl_68",Ic="_iconTimer_5sxpl_75",Ec="_quizHeaderCol3_5sxpl_91",Bc="_reviewModeMark_5sxpl_96",Pc="_openMenuButton_5sxpl_104",Mc="_quizBody_5sxpl_122",Lc="_activeKeyboard_5sxpl_133",Rc="_container_5sxpl_142",Fc="_btnDelete_5sxpl_172",ko={quizTemplate:Sc,quizHeader:jc,quizHeaderCol1:zc,quizNumber:$c,attempts:Cc,txtL:Qc,qMark:Ac,quizHeaderCol2:Nc,quizTimer:Tc,iconTimer:Ic,quizHeaderCol3:Ec,reviewModeMark:Bc,openMenuButton:Pc,quizBody:Mc,activeKeyboard:Lc,container:Rc,btnDelete:Fc},qc="_quizTemplate_1gfa8_2",Hc="_quizHeader_1gfa8_33",Oc="_quizHeaderCol1_1gfa8_47",Dc="_quizNumber_1gfa8_51",Vc="_attempts_1gfa8_61",Wc="_txtL_1gfa8_70",Gc="_qMark_1gfa8_75",Kc="_quizHeaderCol2_1gfa8_87",Uc="_quizTimer_1gfa8_92",Jc="_iconTimer_1gfa8_100",Yc="_quizHeaderCol3_1gfa8_113",Xc="_reviewModeMark_1gfa8_118",Zc="_openMenuButton_1gfa8_126",eu="_quizBody_1gfa8_144",tu="_activeKeyboard_1gfa8_155",nu="_container_1gfa8_164",su="_btnDelete_1gfa8_194",So={quizTemplate:qc,quizHeader:Hc,quizHeaderCol1:Oc,quizNumber:Dc,attempts:Vc,txtL:Wc,qMark:Gc,quizHeaderCol2:Kc,quizTimer:Uc,iconTimer:Jc,quizHeaderCol3:Yc,reviewModeMark:Xc,openMenuButton:Zc,quizBody:eu,activeKeyboard:tu,container:nu,btnDelete:su},ou=new N(navigator.userAgent),iu=ou.phone(),wt=iu?So:ko;function Ae({quizNumber:t,totalQuizCnt:o,life:n,timeMin:s,timeSec:i,changeSideMenu:u}){const{studyInfo:d}=r.useContext(se),a=`${s<=9?"0"+s:s}:${i<=9?"0"+i:i}`;return e.jsxs("div",{className:`${wt.quizHeader} animate__animated animate__slideInDown`,children:[e.jsxs("div",{className:wt.quizHeaderCol1,children:[e.jsxs("div",{className:wt.quizNumber,children:[t,e.jsx("span",{style:{fontSize:"16px"},children:"/"}),o,e.jsxs("div",{className:wt.attempts,children:[e.jsx(wc,{isColor:!0,width:18,height:18}),e.jsx("div",{className:wt.txtL,children:n})]})]}),e.jsx("div",{className:wt.qMark})]}),e.jsx("div",{className:wt.quizHeaderCol2,children:e.jsxs("div",{className:wt.quizTimer,children:[e.jsx("div",{className:wt.iconTimer}),a]})}),e.jsxs("div",{className:wt.quizHeaderCol3,children:[d.isReview&&e.jsx("span",{className:wt.reviewModeMark,children:"Review Mode"}),e.jsx("div",{className:wt.openMenuButton,onClick:()=>u(!0)})]})]})}const ru="_study_side_menu_16mla_1",au="_study_side_menu_container_16mla_9",cu="_study_side_menu_area_top_16mla_33",uu="_close_side_menu_16mla_39",lu="_btn_delete_16mla_44",du="_book_info_16mla_56",mu="_book_code_16mla_56",xu="_book_title_16mla_60",hu="_label_16mla_65",_u="_study_side_menu_area_bottom_16mla_72",pu="_btn_exit_16mla_77",gu="_txt_16mla_81",yu="_screen_block_16mla_85",fu="_select_study_menu_16mla_94",bu="_select_study_menu_item_16mla_101",vu="_on_16mla_120",wu="_go_on_16mla_126",ku="_completed_16mla_132",Su="_ebook_more_activity_16mla_146",ju="_ebook_more_activity_item_16mla_150",zu="_study_side_menu_quiz_scoreboard_16mla_167",$u="_step_info_16mla_167",Cu="_step_16mla_167",Qu="_score_info_16mla_182",Au="_quiz_type_16mla_182",Nu="_score_row_16mla_186",Tu="_header_16mla_189",Iu="_score_col_16mla_193",he={study_side_menu:ru,study_side_menu_container:au,study_side_menu_area_top:cu,close_side_menu:uu,btn_delete:lu,book_info:du,book_code:mu,book_title:xu,label:hu,study_side_menu_area_bottom:_u,btn_exit:pu,txt:gu,screen_block:yu,select_study_menu:fu,select_study_menu_item:bu,on:vu,"move-it":"_move-it_16mla_1",go_on:wu,completed:ku,ebook_more_activity:Su,ebook_more_activity_item:ju,study_side_menu_quiz_scoreboard:zu,step_info:$u,step:Cu,score_info:Qu,quiz_type:Au,score_row:Nu,header:Tu,score_col:Iu},Eu="/study/BookReading/assets/repeat-627ef06f.svg",Ei="/study/BookReading/assets/delete-351e7fec.svg",Bi="/study/BookReading/assets/exite-6d407d36.svg";function Bu({currentStep:t,changeStep:o}){const{studyInfo:n}=r.useContext(se);return e.jsx(e.Fragment,{children:n.openSteps.map((s,i)=>e.jsxs("div",{className:`${he.step} ${t===s||n.mode!=="student"?he.on:""}`,onClick:()=>{n.mode!=="student"&&o(s)},children:[t===s?"Step":"",s]},`step-header-${i}`))})}function Pu({maxAnswerCount:t}){const o=["1st","2nd","3rd","th"];let n=[];for(let s=0;s<t;s++)n.push(e.jsx("div",{className:`${he.score_col}`,children:o[s]},`col-header-side-menu-${s}`));return e.jsxs("div",{className:`${he.score_row} ${he.header}`,children:[e.jsx("div",{className:`${he.score_col}`,children:"Q"}),n]})}const Mu="/study/BookReading/assets/icon_score_item_correct-30152e7d.svg",Mo="/study/BookReading/assets/icon_score_item_incorrect-c4ad3860.svg",Lu=({maxAnswerCount:t,scoreBoardData:o})=>{let n=[];if(o){for(let s=1;s<=t;s++)s<o.answerCount?n.push(e.jsx("div",{className:`${he.score_col}`,children:e.jsx("img",{src:Mo,alt:""})})):s===o.answerCount?o.ox?n.push(e.jsx("div",{className:`${he.score_col}`,children:e.jsx("img",{src:Mu,alt:""})})):n.push(e.jsx("div",{className:`${he.score_col}`,children:e.jsx("img",{src:Mo,alt:""})})):n.push(e.jsx("div",{className:`${he.score_col}`}));return n}else{for(let s=0;s<t;s++)n.push(e.jsx("div",{className:`${he.score_col}`}));return n}};function Ru({quizLength:t,maxAnswerCount:o,scoreBoardData:n}){let s=[];for(let i=0;i<t;i++)s.push(e.jsxs("div",{className:`${he.score_row}`,children:[e.jsx("div",{className:`${he.score_col}`,children:i+1}),e.jsx(Lu,{maxAnswerCount:o,scoreBoardData:n[i]})]},`smsbr-${i}`));return e.jsx(e.Fragment,{children:s})}function Fu({currentStep:t,currentStepType:o,quizLength:n,maxAnswerCount:s,scoreBoardData:i,changeStep:u}){return e.jsxs("div",{className:he.study_side_menu_quiz_scoreboard,children:[e.jsx("div",{className:he.step_info,children:e.jsx(Bu,{currentStep:t,changeStep:u})}),e.jsxs("div",{className:he.score_info,children:[e.jsx("div",{className:he.quiz_type,children:o}),o!=="Vocabulary Practice"&&e.jsxs(e.Fragment,{children:[e.jsx(Pu,{maxAnswerCount:s}),e.jsx("div",{children:e.jsx(Ru,{quizLength:n,maxAnswerCount:s,scoreBoardData:i})})]})]})]})}function Ne({isSideOpen:t,currentStep:o,currentStepType:n,quizLength:s,maxAnswerCount:i,scoreBoardData:u,changeSideMenu:d,changeStep:a}){const{t:h}=de(),{bookInfo:_,handler:v}=r.useContext(se),[y,g]=r.useState("animate__fadeIn"),[b,k]=r.useState("animate__slideInRight"),m=()=>{g("animate__fadeOut"),k("animate__slideOutRight")},c=()=>{y==="animate__fadeOut"&&d(!1)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{id:"study-side-menu",className:`${he.study_side_menu} ${y}`,onAnimationEnd:()=>{c()},children:[e.jsxs("div",{id:"study-side-menu-container",className:`${he.study_side_menu_container} ${b}`,children:[e.jsxs("div",{className:he.study_side_menu_area_top,children:[e.jsx("div",{className:he.close_side_menu,children:e.jsx("div",{className:he.btn_delete,onClick:()=>{m()},children:e.jsx("img",{src:Ei,alt:""})})}),e.jsxs("div",{className:he.book_info,children:[e.jsx("div",{className:he.book_code,children:_.BookCode}),e.jsx("div",{className:he.book_title,children:_.Title})]}),_.BookCode.includes("EB")&&e.jsx("div",{className:he.select_study_menu,children:e.jsxs("div",{className:`${he.select_study_menu_item}`,onClick:()=>{v.changeView("story")},children:[e.jsx("img",{src:Eu,alt:""}),h("story.다시 읽기"),e.jsxs("div",{className:"pyro",children:[e.jsx("div",{className:"before"}),e.jsx("div",{className:"after"})]})]})}),e.jsx(Fu,{currentStep:o,currentStepType:n,quizLength:s,maxAnswerCount:i,scoreBoardData:u,changeStep:a})]}),e.jsx("div",{className:he.study_side_menu_area_bottom,children:e.jsxs("div",{className:he.btn_exit,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:[e.jsx("img",{src:Bi,alt:""}),e.jsx("div",{className:"txt",children:h("common.나가기")})]})})]}),e.jsx("div",{className:he.screen_block,onClick:()=>m()})]})})}const to=new N(navigator.userAgent),qu=to.phone(),Cn=qu?So:ko;function Te({children:t}){var u;const[o,n]=r.useState(!1),[s,i]=r.useState(((u=screen.orientation)==null?void 0:u.type)=="landscape-primary");return r.useEffect(()=>{var _,v;const d=window.visualViewport?window.visualViewport.height:window.innerHeight,a=()=>{const y=window.visualViewport?window.visualViewport.height:window.innerHeight;(to.tablet()||to.mobile())&&n(y<d)};(_=window.visualViewport)==null||_.addEventListener("resize",a);const h=()=>{var y;i(((y=screen.orientation)==null?void 0:y.type)=="landscape-primary")};return(v=screen.orientation)==null||v.addEventListener("change",h),()=>{var y,g;(y=window.visualViewport)==null||y.removeEventListener("resize",a),(g=screen.orientation)==null||g.removeEventListener("change",h)}},[o,s]),e.jsx("div",{className:`${Cn.quizBody} ${o&&s&&Cn.activeKeyboard} animate__animated animate__fadeIn`,children:e.jsx("div",{className:`${Cn.container} ${o&&s&&Cn.activeKeyboard}`,children:t})})}function Be({typeCSS:t,containerCSS:o,children:n}){return e.jsx("div",{className:`${t}`,children:e.jsx("div",{className:`${o}`,children:n})})}const Hu="_correctPopup_10dqy_1",Ou="_readingUnitArea_10dqy_16",Du="_txtL_10dqy_26",Vu="_incorrectPopup_10dqy_38",Wu="_screenBlock_10dqy_75",Gu={correctPopup:Hu,readingUnitArea:Ou,txtL:Du,incorrectPopup:Vu,screenBlock:Wu},Ku="_correctPopup_4ircx_1",Uu="_readingUnitArea_4ircx_15",Ju="_txtL_4ircx_25",Yu="_incorrectPopup_4ircx_38",Xu="_screenBlock_4ircx_75",Zu={correctPopup:Ku,readingUnitArea:Uu,txtL:Ju,incorrectPopup:Yu,screenBlock:Xu},el=new N(navigator.userAgent),tl=el.phone(),gn=tl?Zu:Gu;function Ze({bottomPopupState:t}){const o=en();return e.jsx(e.Fragment,{children:t.isActive&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${t.isCorrect?gn.correctPopup:gn.incorrectPopup}  animate__animated animate__slideInUp`,children:e.jsxs("div",{className:gn.readingUnitArea,children:[e.jsx("div",{className:gn.txtL,children:t.isCorrect?"Correct!":"Oops..."}),e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${o}_${t.isCorrect?"08":"09"}.png`,alt:"",className:`animate__animated ${t.isCorrect?"animate__tada":"animate__pulse"}`})]})}),e.jsx("div",{className:gn.screenBlock})]})})}const nl="_testResult_45l6t_1",sl="_scoreBoard_45l6t_9",ol="_score_45l6t_9",il="_count1_45l6t_26",rl="_count3_45l6t_29",al="_wrongAnswers_45l6t_44",cl="_title_45l6t_50",ul="_quizQuestion_45l6t_61",ll="_questionSentence_45l6t_68",dl="_answers_45l6t_71",ml="_correctAnswer_45l6t_78",xl="_txtL_45l6t_85",hl="_correctAnswerNum_45l6t_88",_l="_quizAnswer_45l6t_98",pl="_label_45l6t_109",gl="_correctIcon_45l6t_114",yl="_incorrectIcon_45l6t_122",fl="_wrongAnswer_45l6t_44",bl="_quizType_45l6t_141",vl="_large_45l6t_150",wl="_nextToVocaTest_45l6t_153",kl="_totalScoreContainer_45l6t_163",Sl="_totalScore_45l6t_163",jl="_container_45l6t_184",zl="_borderNone_45l6t_202",$l="_readingUnit_45l6t_205",Cl="_passmark_45l6t_211",Ql="_board1_45l6t_220",Al="_correctScore_45l6t_226",Nl="_number_45l6t_240",Tl="_incorrectScore_45l6t_244",Il="_board2_45l6t_262",El="_row_45l6t_268",Bl="_nextButton_45l6t_280",Pl="_shadow_45l6t_1",Ml="_goButton_45l6t_311",Ll="_notYetButton_45l6t_333",Rl="_submitRevision_45l6t_357",Fl="_stepOrder_45l6t_372",ql="_comment_45l6t_394",Hl="_revisionBoard_45l6t_404",Ol="_txtLabel_45l6t_417",Dl="_txtCount_45l6t_429",Vl="_selectBox_45l6t_441",Wl="_revisionDone_45l6t_446",Gl="_noButton_45l6t_449",Kl="_yesButton_45l6t_471",Ul="_heartbeat_45l6t_494",Jl="_btnDelete_45l6t_567",Yl="_quizEndingPass_45l6t_582",Xl="_groupGoodJob_45l6t_608",Zl="_imgUnit_45l6t_617",ed="_imgPointCoin_45l6t_625",td="_txtAchivePoint_45l6t_638",nd="_imgGoodJobRibbon_45l6t_644",sd="_imgConfetti_45l6t_652",od="_groupScore_45l6t_663",id="_txtMessage_45l6t_683",rd="_quizEndingFail_45l6t_688",ad="_groupTryAgin_45l6t_714",cd="_imgTryAgainRibbon_45l6t_731",jt={testResult:nl,scoreBoard:sl,score:ol,count1:il,count3:rl,wrongAnswers:al,title:cl,quizQuestion:ul,questionSentence:ll,answers:dl,correctAnswer:ml,txtL:xl,correctAnswerNum:hl,quizAnswer:_l,label:pl,correctIcon:gl,incorrectIcon:yl,wrongAnswer:fl,quizType:bl,large:vl,nextToVocaTest:wl,totalScoreContainer:kl,totalScore:Sl,container:jl,borderNone:zl,readingUnit:$l,passmark:Cl,board1:Ql,correctScore:Al,number:Nl,incorrectScore:Tl,board2:Il,row:El,nextButton:Bl,shadow:Pl,goButton:Ml,notYetButton:Ll,submitRevision:Rl,stepOrder:Fl,comment:ql,revisionBoard:Hl,txtLabel:Ol,txtCount:Dl,selectBox:Vl,revisionDone:Wl,noButton:Gl,yesButton:Kl,heartbeat:Ul,btnDelete:Jl,quizEndingPass:Yl,groupGoodJob:Xl,imgUnit:Zl,imgPointCoin:ed,txtAchivePoint:td,imgGoodJobRibbon:nd,imgConfetti:sd,groupScore:od,txtMessage:id,quizEndingFail:rd,groupTryAgin:ad,imgTryAgainRibbon:cd},ud="_testResult_vpmjg_1",ld="_scoreBoard_vpmjg_10",dd="_score_vpmjg_10",md="_count1_vpmjg_27",xd="_count3_vpmjg_30",hd="_wrongAnswers_vpmjg_45",_d="_title_vpmjg_51",pd="_quizQuestion_vpmjg_63",gd="_questionSentence_vpmjg_70",yd="_answers_vpmjg_73",fd="_correctAnswer_vpmjg_80",bd="_txtL_vpmjg_87",vd="_correctAnswerNum_vpmjg_90",wd="_quizAnswer_vpmjg_100",kd="_label_vpmjg_111",Sd="_correctIcon_vpmjg_116",jd="_incorrectIcon_vpmjg_124",zd="_wrongAnswer_vpmjg_45",$d="_quizType_vpmjg_143",Cd="_large_vpmjg_152",Qd="_nextToVocaTest_vpmjg_155",Ad="_totalScoreContainer_vpmjg_165",Nd="_totalScore_vpmjg_165",Td="_container_vpmjg_186",Id="_borderNone_vpmjg_204",Ed="_readingUnit_vpmjg_207",Bd="_passmark_vpmjg_213",Pd="_board1_vpmjg_222",Md="_correctScore_vpmjg_228",Ld="_number_vpmjg_242",Rd="_incorrectScore_vpmjg_246",Fd="_board2_vpmjg_264",qd="_row_vpmjg_270",Hd="_nextButton_vpmjg_282",Od="_shadow_vpmjg_1",Dd="_goButton_vpmjg_313",Vd="_notYetButton_vpmjg_335",Wd="_submitRevision_vpmjg_359",Gd="_stepOrder_vpmjg_373",Kd="_comment_vpmjg_395",Ud="_revisionBoard_vpmjg_405",Jd="_txtLabel_vpmjg_418",Yd="_txtCount_vpmjg_430",Xd="_selectBox_vpmjg_442",Zd="_revisionDone_vpmjg_448",em="_noButton_vpmjg_451",tm="_yesButton_vpmjg_473",nm="_heartbeat_vpmjg_496",sm="_btnDelete_vpmjg_569",om="_quizEndingPass_vpmjg_584",im="_groupGoodJob_vpmjg_610",rm="_imgUnit_vpmjg_619",am="_imgPointCoin_vpmjg_627",cm="_txtAchivePoint_vpmjg_640",um="_imgGoodJobRibbon_vpmjg_646",lm="_imgConfetti_vpmjg_654",dm="_groupScore_vpmjg_665",mm="_txtMessage_vpmjg_685",xm="_quizEndingFail_vpmjg_690",hm="_groupTryAgin_vpmjg_716",_m="_imgTryAgainRibbon_vpmjg_733",zt={testResult:ud,scoreBoard:ld,score:dd,count1:md,count3:xd,wrongAnswers:hd,title:_d,quizQuestion:pd,questionSentence:gd,answers:yd,correctAnswer:fd,txtL:bd,correctAnswerNum:vd,quizAnswer:wd,label:kd,correctIcon:Sd,incorrectIcon:jd,wrongAnswer:zd,quizType:$d,large:Cd,nextToVocaTest:Qd,totalScoreContainer:Ad,totalScore:Nd,container:Td,borderNone:Id,readingUnit:Ed,passmark:Bd,board1:Pd,correctScore:Md,number:Ld,incorrectScore:Rd,board2:Fd,row:qd,nextButton:Hd,shadow:Od,goButton:Dd,notYetButton:Vd,submitRevision:Wd,stepOrder:Gd,comment:Kd,revisionBoard:Ud,txtLabel:Jd,txtCount:Yd,selectBox:Xd,revisionDone:Zd,noButton:em,yesButton:tm,heartbeat:nm,btnDelete:sm,quizEndingPass:om,groupGoodJob:im,imgUnit:rm,imgPointCoin:am,txtAchivePoint:cm,imgGoodJobRibbon:um,imgConfetti:lm,groupScore:dm,txtMessage:mm,quizEndingFail:xm,groupTryAgin:hm,imgTryAgainRibbon:_m};function ee({height:t}){return e.jsx("div",{style:{height:`${t}px`}})}const pm=new N(navigator.userAgent),gm=pm.phone(),Ss=gm?zt:jt;function ym({studentAnswer:t,quizAnswerCount:o}){let n=0,s=[],i=[];return t.map(u=>{n!==u.quizNo&&(n=u.quizNo,i.push(e.jsx("div",{children:n})));for(let d=1;d<=o;d++)d<u.answerCount?i.push(e.jsx("div",{children:"X"})):d===u.answerCount?u.ox?i.push(e.jsx("div",{children:"O"})):i.push(e.jsx("div",{children:"X"})):i.push(e.jsx("div",{}));s.push(e.jsx("div",{className:`${Ss.score} ${o===3?Ss.count3:o===1?Ss.count1:""}`,children:i},`rows-result-${n}`)),i=[]}),e.jsx(e.Fragment,{children:s})}const fm=new N(navigator.userAgent),bm=fm.phone(),js=bm?zt:jt;function vm({quizAnswerCount:t}){const o=["1st","2nd","3rd","th"];let n=[];for(let s=0;s<t;s++)n.push(e.jsx("div",{children:o[s]},`col-header-test-result-${s}`));return e.jsxs("div",{className:`${js.row} ${t===3?js.count3:t===1?js.count1:""}`,children:[e.jsx("div",{children:"Q"}),n]})}const wm=new N(navigator.userAgent),km=wm.phone(),Sm=km?zt:jt;function Pi({quizAnswerCount:t,studentAnswer:o}){return e.jsxs("div",{className:Sm.scoreBoard,children:[e.jsx(vm,{quizAnswerCount:t}),e.jsx(ym,{studentAnswer:o,quizAnswerCount:t})]})}const jm=new N(navigator.userAgent),zm=jm.phone(),et=zm?zt:jt;function it({step:t,quizType:o,quizAnswerCount:n,studentAnswer:s,passMark:i,onFinishActivity:u}){const d=en();let a=0,h=0,_=0;const v=100/s.length;return s.map(y=>{if(y.ox)switch(h++,y.answerCount){case 1:a+=1*v;break;case 2:a+=.5*v;break;case 3:a+=.25*v;break}else y.answerCount>=n&&_++}),e.jsxs("div",{className:et.testResult,children:[e.jsxs("div",{className:et.quizType,children:["Step ",t,". ",o]}),e.jsxs("div",{className:et.totalScoreContainer,children:[e.jsx("div",{className:et.txtL,children:"SCORE: "}),e.jsx("div",{className:`${et.totalScore} ${et.heartbeat}`,children:Math.round(a)})]}),e.jsxs("div",{className:et.container,children:[e.jsx("div",{className:`${et.readingUnit} animate__animated animate__jackInTheBox`,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${d}_10.png`,alt:""})}),i&&e.jsxs("div",{className:et.passmark,children:["Passmark: ",i]}),e.jsxs("div",{className:`${et.board1} animate__animated animate__fadeIn`,children:[e.jsxs("div",{className:et.correctScore,children:[e.jsx("div",{className:et.title,children:"correct"}),e.jsx("div",{className:et.number,children:h})]}),e.jsxs("div",{className:et.incorrectScore,children:[e.jsx("div",{className:et.title,children:"incorrect"}),e.jsx("div",{className:et.number,children:_})]})]}),e.jsx("div",{className:et.board2,children:e.jsx(Pi,{quizAnswerCount:n,studentAnswer:s})}),e.jsx(ee,{height:50})]}),e.jsx("div",{className:et.nextButton,onClick:()=>u(),children:"Next"})]})}const $m=new N(navigator.userAgent),Cm=$m.phone(),Qn=Cm?mt:ct;function Qm({index:t,correctText:o,example:n,checkAnswer:s}){const{bookInfo:i,studyInfo:u}=r.useContext(se);return e.jsxs("div",{className:`${Qn.textCard} 
      ${u.mode==="review"&&Number(i.Average)>=70&&n.Text===o?Qn.correct:""}`,onClick:d=>s(d.currentTarget,n.Text),children:[e.jsx("div",{className:Qn.cardNumber,children:Number(t+1)}),e.jsx("div",{className:Qn.awnserText,children:n.Text})]})}const Am=new N(navigator.userAgent),Nm=Am.phone(),Lo=Nm?mt:ct;function Tm({correctText:t,exampleData:o,checkAnswer:n}){return e.jsx("div",{className:Lo.answers,children:e.jsx("div",{className:Lo.container,children:o.map((s,i)=>e.jsx(Qm,{index:i,correctText:t,example:s,checkAnswer:n}))})})}const Im=new N(navigator.userAgent),Em=Im.phone(),Ro=Em?mt:ct;function Bm({playState:t,playSentence:o}){return e.jsxs("div",{className:Ro.wordPlayButton,onClick:()=>o(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:34,height:34}):e.jsx(Fe,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Ro.txtL,children:"Listen"})]})}const Pm=new N(navigator.userAgent),Mm=Pm.phone(),Lm=Mm?mt:ct;function Rm({blankRef:t,correctAnswer:o}){return e.jsx("span",{ref:t,className:`${Lm.answerBox}`,children:t.current&&t.current.classList.length>1&&o})}const Fm=new N(navigator.userAgent),qm=Fm.phone(),Hm=qm?mt:ct;function Om({blankRef:t,question:o,correctAnswer:n}){return e.jsx("div",{className:Hm.questionBox,children:o.split(" ").map((s,i)=>s.includes("┒")?hn(s,"┒",()=>e.jsx(Rm,{blankRef:t,correctAnswer:n})):e.jsx("span",{dangerouslySetInnerHTML:{__html:s}}))})}const Dm="_wordPlayButton_1w7w8_1",Vm="_txtL_1w7w8_16",Wm="_trueSentencePopup_1w7w8_28",Gm="_title_1w7w8_31",Km="_container_1w7w8_36",Um="_sentence_1w7w8_50",Jm="_nextButton_1w7w8_56",Ym={wordPlayButton:Dm,txtL:Vm,trueSentencePopup:Wm,title:Gm,container:Km,sentence:Um,nextButton:Jm},Xm="_wordPlayButton_1mnal_1",Zm="_txtL_1mnal_16",e0="_trueSentencePopup_1mnal_28",t0="_title_1mnal_31",n0="_container_1mnal_36",s0="_sentence_1mnal_50",o0="_nextButton_1mnal_57",i0={wordPlayButton:Xm,txtL:Zm,trueSentencePopup:e0,title:t0,container:n0,sentence:s0,nextButton:o0},r0=new N(navigator.userAgent),a0=r0.phone(),qt=a0?i0:Ym;function c0({playState:t,sentence:o,changeCorrectSentenceState:n,playSentence:s}){return e.jsxs("div",{className:qt.trueSentencePopup,children:[e.jsx("div",{className:qt.title,children:"Correct Sentence"}),e.jsxs("div",{className:qt.container,children:[e.jsxs("div",{className:qt.wordPlayButton,onClick:()=>s(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:qt.txtL,children:"Play Sound"})]}),e.jsx("div",{className:qt.sentence,children:o})]}),e.jsx("div",{className:qt.nextButton,onClick:()=>n(!1),children:"Next"})]})}const u0=new N(navigator.userAgent),no=u0.phone(),An="Cloze Test",Ct=no?mt:ct;function l0(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=t.currentStep,d=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?A():window.onLogoutStudy()}),a=lt(),[h,_]=r.useState("animate__bounceInRight"),{isStepIntro:v,closeStepIntro:y}=ze(),{isResultShow:g,changeResultShow:b}=Re(),[k,m]=r.useState(!1),c=r.useRef(null),l=r.useRef(!1),[x,p]=Ce(vr,t,u),[f,w]=r.useState(1),{scoreBoardData:S,setStudentAnswers:M,addStudentAnswer:z,makeUserAnswerData:P}=Qe(i.mode),[C,j]=r.useState([]),[B,R]=r.useState(0),[O,W]=r.useState(0),[V,q]=r.useState(!1),{bottomPopupState:T,changeBottomPopupState:I}=Xe(),{playState:G,playAudio:U,stopAudio:Y}=Le();if(r.useEffect(()=>{!v&&x&&(d.setup(x.QuizTime,!0),U(x.Quiz[f-1].Question.Sound),l.current=!1)},[v]),r.useEffect(()=>{if(x){const[oe,ce]=ut(i.mode,p,x.QuizAnswerCount);R(ce),W(ce),i.mode==="staff"?j(x.Quiz[oe-1].Examples):j(ge.shuffle(x.Quiz[oe-1].Examples)),M(p,x.QuizAnswerCount),w(oe)}},[x]),r.useEffect(()=>{x&&(Y(),V?U(x.Quiz[f-1].Question.Sound):f+1>x.Quiz.length?b(!0):w(f+1))},[V]),r.useEffect(()=>{!v&&!g&&x&&(d.setup(x.QuizTime,!0),W(0),R(0),i.mode==="staff"?j(x.Quiz[f-1].Examples):j(ge.shuffle(x.Quiz[f-1].Examples)),U(x.Quiz[f-1].Question.Sound),l.current=!1)},[f]),!x)return e.jsx(e.Fragment,{children:"Loading..."});const F=async(oe,ce="")=>{var ae,xe;try{if(!l.current){l.current=!0,d.stop();const re=x.Quiz[f-1].Examples[0].Text,H=re===ce,J={quizNo:f,maxCount:x.QuizAnswerCount,answerCount:B+1,ox:H},D=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:x.Quiz[f-1].QuizId,quizNo:x.Quiz[f-1].QuizNo,currentQuizNo:f,correct:re,selectedAnswer:ce,tryCount:B+1,maxQuizCount:x.QuizAnswerCount,quizLength:x.Quiz.length,isCorrect:H,answerData:J,isFinishStudy:t.lastStep===u}),Z=await Ie(i.mode,D);Number(Z.result)===0&&(Z.resultMessage&&(s.finishStudy={id:Number(Z.result),cause:Z.resultMessage}),H?(a.play(oe,[Ct.correct,"animate__fadeIn"]),(ae=c.current)==null||ae.classList.add(Ct.correctAnswer)):(a.play(oe,[Ct.incorrect,"animate__headShake"]),(xe=c.current)==null||xe.classList.add(Ct.incorrectAnswer)),z(J),H||W(O+1),R(B+1),E(H,oe))}}catch(re){console.error(re)}},E=(oe,ce)=>{I({isActive:!0,isCorrect:oe}),setTimeout(()=>{var ae;I({isActive:!1,isCorrect:!1}),(ae=c.current)==null||ae.classList.remove(Ct.correctAnswer,Ct.incorrectAnswer),n.BookLevel.includes("1")?f+1>x.Quiz.length?b(!0):w(f+1):X(!0),a.remove(ce,[Ct.correct,Ct.incorrect,"animate__fadeIn","animate__headShake"])},2e3)},A=async()=>{try{if(!l.current){l.current=!0,d.stop();const oe=x.Quiz[f-1].Examples[0].Text,ce={quizNo:f,maxCount:x.QuizAnswerCount,answerCount:B+1,ox:!1},ae=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:x.Quiz[f-1].QuizId,quizNo:x.Quiz[f-1].QuizNo,currentQuizNo:f,correct:oe,selectedAnswer:"",tryCount:B+1,maxQuizCount:x.QuizAnswerCount,quizLength:x.Quiz.length,isCorrect:!1,answerData:ce,isFinishStudy:t.lastStep===u}),xe=await Ie(i.mode,ae);Number(xe.result)===0&&(xe.resultMessage&&(s.finishStudy={id:Number(xe.result),cause:xe.resultMessage}),z(ce),W(O+1),R(B+1),Q())}}catch(oe){console.error(oe)}},Q=()=>{I({isActive:!0,isCorrect:!1}),setTimeout(()=>{I({isActive:!1,isCorrect:!1}),n.BookLevel.includes("1")?f+1>x.Quiz.length?b(!0):w(f+1):X(!0)},2e3)},L=()=>{G===""?U(x.Quiz[f-1].Question.Sound):Y()},X=oe=>{q(oe)},te=oe=>{m(oe)};return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`animate__animated ${h}`,onAnimationEnd:()=>{h==="animate__bounceOutLeft"&&y()},children:e.jsx(Me,{step:u,quizType:An,comment:o("study.문장을 읽고 빈칸에 들어갈 알맞은 답을 고르세요."),onStepIntroClozeHandler:()=>{_("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:g?e.jsx(it,{step:u,quizType:An,quizAnswerCount:x.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:f,totalQuizCnt:Object.keys(x.Quiz).length,life:x.QuizAnswerCount-O,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:te}),e.jsx("div",{className:`${Ct.comment} animate__animated animate__fadeInLeft`,children:An}),e.jsx(Te,{children:V?e.jsx(c0,{playState:G,sentence:x.Quiz[f-1].Question.Text.replace("┒",x.Quiz[f-1].Examples[0].Text),changeCorrectSentenceState:X,playSentence:L}):e.jsxs(Be,{typeCSS:Ct.clozeTest1,containerCSS:Ct.container,children:[no?e.jsx(e.Fragment,{}):e.jsx(ee,{height:0}),e.jsx(Bm,{playState:G,playSentence:L}),e.jsx(Om,{blankRef:c,question:x.Quiz[f-1].Question.Text,correctAnswer:x.Quiz[f-1].Examples[0].Text}),no?e.jsx(ee,{height:20}):e.jsx(ee,{height:30}),e.jsx(Tm,{correctText:x.Quiz[f-1].Examples[0].Text,exampleData:C,checkAnswer:F})]})}),k&&e.jsx(Ne,{isSideOpen:k,currentStep:u,currentStepType:An,quizLength:x.Quiz.length,maxAnswerCount:x.QuizAnswerCount,changeSideMenu:te,scoreBoardData:S,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:T})]})})})}const d0=new N(navigator.userAgent),m0=d0.phone(),Fo=m0?mt:ct;function x0({playState:t,playSentence:o}){return e.jsxs("div",{className:Fo.wordPlayButton,onClick:()=>o(),children:[t==="playing"||t==="endFn"?e.jsx(qe,{isColor:!0,width:34,height:34}):e.jsx(Fe,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Fo.txtL,children:"Play Sound"})]})}const h0=new N(navigator.userAgent),_0=h0.phone(),Nn=_0?mt:ct;function p0({inputRefs:t,isWorking:o,inputIndex:n,currentIndex:s,inputValues:i,correctText:u,changeInputValue:d,checkAnswer:a,changeInputIndex:h}){const _=m=>{o&&m.preventDefault(),(m.key==="Tab"||m.altKey&&m.key==="Tab")&&(m.preventDefault(),t==null||t.current[s].focus())},v=m=>{m.preventDefault();const c=/^[a-zA-Z-'’‘” ]+(?:'){0,1}[a-zA-Z]?$/g;let l=m.currentTarget.value;switch(l.slice(-1)){case"‘":l=l.replace("‘","'");break;case"’":l=l.replace("’","'");break;case"”":l=l.replace("”",'"');break}c.test(l)||(l=l.slice(0,l.length-1)),d(s,l)},y=(m,c)=>{const l=m.currentTarget.value;if(m.key==="Enter"&&l!=="")if(b(t,c)===-1)h(-1),a();else{const p=g(t,c);h(p)}},g=(m,c)=>m==null?void 0:m.current.findIndex((x,p)=>!i[p].isCorrected&&p>c),b=(m,c)=>m==null?void 0:m.current.findLastIndex((x,p)=>!i[p].isCorrected&&p>c),k=()=>{h(n)};return e.jsx("div",{className:`${Nn.answerBox} ${s===n?Nn.currentOrder:""}`,children:s===n?e.jsx(e.Fragment,{children:e.jsx("div",{className:Nn.currentInput,style:{width:"fit-contents"},children:e.jsx("input",{ref:m=>t.current[n]=m,id:"textFild",style:{width:`${u.length*15.6}px`},type:"text",value:i[s].text,onKeyDown:m=>_(m),onChange:m=>v(m),onKeyUp:m=>y(m,s),onCopy:m=>m.preventDefault(),onPaste:m=>m.preventDefault(),onCut:m=>m.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:Nn.otherInput,style:{width:"fit-contents"},children:e.jsx("input",{ref:m=>t.current[n]=m,style:{width:`${u.length*15.6}px`},value:i[n].text,onFocus:()=>k()})})})})}const g0=new N(navigator.userAgent),y0=g0.phone(),nn=y0?mt:ct;function f0({inputRefs:t,penaltyState:o,inputIndex:n,currentIndex:s,correctText:i,changeInputIndex:u,changePenaltyState:d}){const[a,h]=r.useState(""),[_,v]=r.useState(0),[y,g]=r.useState(0),b=r.useRef(null),k=r.useRef(null),m=f=>{o!=="penalty"&&f.preventDefault(),(f.key==="Tab"||f.altKey&&f.key==="Tab")&&(f.preventDefault(),t.current[s].focus())},c=f=>{f.preventDefault();const w=/^[ㄱ-ㅎa-zA-Z-'’‘”~ ]+(?:'){0,1}[a-zA-Z]?$/g;let S=f.currentTarget.value;switch(S.slice(-1)){case"‘":S=S.replace("‘","'");break;case"’":S=S.replace("’","'");break;case"”":S=S.replace("”",'"');break}w.test(S)||(S=S.slice(0,S.length-1)),h(S)},l=(f,w)=>{if(f.currentTarget.value===i)if(p(t,w)===-1)u(-1),d("success");else{const z=x(t,w);u(z)}},x=(f,w)=>f.current.findIndex((M,z)=>(M==null?void 0:M.value)===""||z>w),p=(f,w)=>f.current.findLastIndex((M,z)=>z>w);return r.useEffect(()=>{b.current&&b.current.offsetWidth>0&&v(b.current.offsetWidth),k.current&&k.current.offsetWidth>0&&g(k.current.offsetWidth)}),e.jsx("span",{className:`${nn.reviewAnswer} ${s===n?nn.currentOrder:""}`,children:s===n?e.jsxs("span",{children:[e.jsx("span",{className:nn.currentInput,children:e.jsx("input",{ref:f=>t.current[n]=f,id:"textFild",style:{width:`${_}px`},type:"text",value:a,onKeyDown:f=>m(f),onChange:f=>c(f),onKeyUp:f=>l(f,s),onCopy:f=>f.preventDefault(),onPaste:f=>f.preventDefault(),onCut:f=>f.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1})}),e.jsx("div",{ref:b,className:nn.hintText,children:i})]}):e.jsx(e.Fragment,{children:a===i||o==="success"?e.jsx("span",{style:{color:"#289EE4"},children:i}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:nn.otherInput,children:e.jsx("input",{ref:f=>t.current[n]=f,style:{width:`${y}px`},disabled:!0})}),e.jsx("div",{ref:k,className:nn.hintText,children:i})]})})})}const b0=new N(navigator.userAgent),v0=b0.phone(),w0=v0?mt:ct;function k0({inputRefs:t,isWorking:o,exampleData:n,currentIndex:s,inputValues:i,penaltyState:u,changeInputValue:d,changeInputIndex:a,checkAnswer:h,changePenaltyState:_}){t.current=[];let v=-1;const y=n.Question.Text.split(" ").map(g=>({text:g,index:g.includes("┒")?++v:0}));return e.jsx("div",{className:w0.questionBox,children:y.map((g,b)=>g.text.includes("┒")?e.jsx(e.Fragment,{children:u==="none"?hn(g.text,"┒",()=>e.jsx(p0,{inputRefs:t,isWorking:o,inputIndex:g.index,currentIndex:s,inputValues:i,correctText:n.Examples[g.index].Text,changeInputValue:d,checkAnswer:h,changeInputIndex:a},`text-input-${g.index}`)):hn(g.text,"┒",()=>e.jsx(f0,{inputRefs:t,penaltyState:u,inputIndex:g.index,currentIndex:s,correctText:n.Examples[g.index].Text,changeInputIndex:a,changePenaltyState:_},`penalty-input-${g.index}`))}):e.jsx("span",{dangerouslySetInnerHTML:{__html:g.text}},`word-${b}`))})}const S0=new N(navigator.userAgent),Mi=S0.phone(),Tn="Cloze Test",In=Mi?mt:ct;function j0(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?A("timeout"):window.onLogoutStudy()}),[d,a]=r.useState("animate__bounceInRight"),{isStepIntro:h,closeStepIntro:_}=ze(),{isResultShow:v,changeResultShow:y}=Re(),[g,b]=r.useState(!1),k=r.useRef(!0),[m,c]=Ce(wr,t,i),[l,x]=r.useState(1),{scoreBoardData:p,setStudentAnswers:f,addStudentAnswer:w,makeUserAnswerData:S}=Qe(s.mode),[M,z]=r.useState(0),[P,C]=r.useState(0),j=r.useRef([]),[B,R]=r.useState([]),[O,W]=r.useState(0),[V,q]=r.useState("none"),{bottomPopupState:T,changeBottomPopupState:I}=Xe(),{playState:G,playAudio:U,stopAudio:Y}=Le();if(r.useEffect(()=>{!h&&m&&(V==="none"&&(u.setup(m.QuizTime,!0),xe()),k.current=!1)},[h]),r.useEffect(()=>{if(m){const[H,J]=ut(s.mode,c,m.QuizAnswerCount);if(s.mode==="student")if(c.length>0)if(m.IsEnablePenaltyReview&&c[c.length-1].PenaltyWord!=="")R(new Array(m.Quiz[H-2].Examples.length).fill({text:"",isCorrected:!1})),q("penalty"),z(m.QuizAnswerCount),C(m.QuizAnswerCount),x(c[c.length-1].CurrentQuizNo);else{if(c[H-1]&&c[H-1].CurrentQuizNo===H&&c[H-1].StudentAnswer!==""){const D=c[c.length-1].StudentAnswer.split("┒"),Z=ae(D,H);if(Z){const K=Z.findIndex(ie=>!ie.isCorrected);W(K)}R(Z)}else R(new Array(m.Quiz[H-1].Examples.length).fill({text:"",isCorrected:!1}));z(J),C(J),x(H)}else z(J),C(J),x(H),R([...ae(new Array(m.Quiz[H-1].Examples.length).fill(""),H)]);else{const D=m.Quiz[l-1].Examples;let Z=[];for(let K=0;K<D.length;K++)Z.push({text:m.Quiz[H-1].Examples[K].Text,isCorrected:!1});R(Z)}f(c,m.QuizAnswerCount)}},[m]),r.useEffect(()=>{if(!h&&!v&&m){if(u.setup(m.QuizTime,!0),xe(),W(0),s.mode!=="student"){const H=m.Quiz[l-1].Examples;let J=[];for(let D=0;D<H.length;D++)J.push({text:m.Quiz[l-1].Examples[D].Text,isCorrected:!1});R(J)}k.current=!1}},[l]),r.useEffect(()=>{O>-1&&(j!=null&&j.current[O])&&(j==null||j.current[O].focus())},[O]),r.useEffect(()=>{m&&(V==="penalty"&&!h?u.stop():V==="success"&&ce())},[V]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const F=()=>{let H=[],J=[],D=[];for(let K=0;K<(j==null?void 0:j.current.length);K++){const ie={example:m.Quiz[l-1].Examples[K].Text,input:j==null?void 0:j.current[K].value.trimStart().trimEnd(),isEqual:m.Quiz[l-1].Examples[K].Text===(j==null?void 0:j.current[K].value.trimStart().trimEnd())};D.push(ie.example),H.push(ie),J.push(ie.input.trimStart().trimEnd())}return[H.filter(K=>K.input.trimStart().trimEnd()==="").length>0,H,D.join("┒"),J.join("┒")]},E=H=>!H.find(J=>!J.isEqual),A=async H=>{try{if(!k.current){k.current=!0,u.stop();const[J,D,Z,K]=F();if(J&&!H)alert(o("study.빈칸이 존재하지 않아야 합니다.")),k.current=!1,u.start();else{const ie=E(D),me={quizNo:l,maxCount:m.QuizAnswerCount,answerCount:M+1,ox:ie},ve=S({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:m.Quiz[l-1].QuizId,quizNo:m.Quiz[l-1].QuizNo,currentQuizNo:l,correct:Z,selectedAnswer:K,tryCount:M+1,maxQuizCount:m.QuizAnswerCount,quizLength:m.Quiz.length,isCorrect:ie,answerData:me,isEnabledPenalty:m.IsEnablePenaltyReview,isFinishStudy:t.lastStep===i}),_e=await Ie(s.mode,ve);Number(_e.result)===0&&(_e.resultMessage&&(n.finishStudy={id:Number(_e.result),cause:_e.resultMessage}),w(me),ie||C(P+1),z(M+1),Q(ie,D))}}}catch(J){console.error(J)}},Q=(H,J)=>{I({isActive:!0,isCorrect:H}),setTimeout(()=>{if(H)l+1>Object.keys(m.Quiz).length?(Y(),y(!0)):(Y(),te(),z(0),C(0),oe("none"),x(l+1));else{let D=!0,Z=0,K=[];j==null||j.current.forEach((ie,me)=>{J[me].isEqual||D&&(D=!1,Z=me),K.push({text:J[me].input,isCorrected:J[me].isEqual})}),R([...K]),M===m.QuizAnswerCount-1?m.IsEnablePenaltyReview?(Y(),W(0),oe("penalty")):l+1>Object.keys(m.Quiz).length?(Y(),y(!0)):(Y(),te(),z(0),C(0),oe("none"),x(l+1)):(u.setup(m.QuizTime,!0),W(Z),k.current=!1)}I({isActive:!1,isCorrect:!1})},1500)},L=H=>{W(H)},X=(H,J)=>{const D=B.map((Z,K)=>H===K?{text:J,isCorrected:Z.isCorrected}:{text:Z.text,isCorrected:Z.isCorrected});R([...D])},te=()=>{m.Quiz[l]&&R([...new Array(m.Quiz[l].Examples.length).fill({text:"",isCorrected:!1})])},oe=H=>{q(H)},ce=async()=>{(async()=>{const J=l+1>m.Quiz.length,D=await _s({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,quizId:m.Quiz[l-1].QuizId,isLastQuiz:J,isFinishStudy:!!(J&&t.lastStep===i)});Number(D.result)===0&&(D.resultMessage&&(n.finishStudy={id:Number(D.result),cause:D.resultMessage}),xe(()=>{Y(),l+1>Object.keys(m.Quiz).length?(Y(),y(!0)):(Y(),te(),z(0),C(0),oe("none"),x(l+1))}))})()},ae=(H,J)=>{let D=[];for(let Z=0;Z<H.length;Z++){const K={text:H[Z].slice(-1)==="1"?m.Quiz[J-1].Examples[Z].Text:"",isCorrected:H[Z].slice(-1)==="1"};D.push(K)}return D},xe=H=>{V==="none"?G==="playing"?Y():U(m.Quiz[l-1].Question.Sound):V==="success"&&G===""&&U(m.Quiz[l-1].Question.Sound,H)},re=H=>{b(H)};return e.jsx(e.Fragment,{children:h?e.jsx("div",{className:`animate__animated ${d}`,onAnimationEnd:()=>{d==="animate__bounceOutLeft"&&_()},children:e.jsx(Me,{step:i,quizType:Tn,comment:o("study.문장을 읽고 빈칸에 들어갈 답을 입력하세요."),onStepIntroClozeHandler:()=>{a("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:v?e.jsx(it,{step:i,quizType:Tn,quizAnswerCount:m.QuizAnswerCount,studentAnswer:p,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:l,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount-P,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:re}),e.jsx("div",{className:`${ct.comment} animate__animated animate__fadeInLeft`,children:Tn}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:In.clozeTest2,containerCSS:In.container,children:[Mi?e.jsx(e.Fragment,{}):e.jsx(ee,{height:0}),V==="none"?e.jsx(x0,{playState:G,playSentence:xe}):e.jsx("div",{className:In.testReview,children:e.jsx("div",{className:In.title,children:"Test Review"})}),e.jsx(k0,{inputRefs:j,isWorking:k.current,exampleData:m.Quiz[l-1],currentIndex:O,inputValues:B,penaltyState:V,changeInputValue:X,changeInputIndex:L,checkAnswer:A,changePenaltyState:oe})]})}),g&&e.jsx(Ne,{isSideOpen:g,currentStep:i,currentStepType:Tn,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,changeSideMenu:re,scoreBoardData:p,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:T})]})})})}const z0=new N(navigator.userAgent),$0=z0.phone(),yn=$0?mt:ct;function C0({inputRefs:t,isWorking:o,inputIndex:n,currentIndex:s,inputValues:i,correctText:u,changeInputValue:d,checkAnswer:a,changeInputIndex:h}){const _=m=>{o&&m.preventDefault(),(m.key==="Tab"||m.altKey&&m.key==="Tab")&&(m.preventDefault(),t==null||t.current[s].focus())},v=m=>{m.preventDefault();const c=/^[a-zA-Z-'’‘” ]+(?:'){0,1}[a-zA-Z]?$/g;let l=m.currentTarget.value;switch(l.slice(-1)){case"‘":l=l.replace("‘","'");break;case"’":l=l.replace("’","'");break;case"”":l=l.replace("”",'"');break}c.test(l)||(l=l.slice(0,l.length-1)),d(s,l)},y=(m,c)=>{const l=m.currentTarget.value;if(m.key==="Enter"&&l!=="")if(b(t,c)===-1)h(-1),a();else{const p=g(t,c);h(p)}},g=(m,c)=>m==null?void 0:m.current.findIndex((x,p)=>!i[p].isCorrected&&p>c),b=(m,c)=>m==null?void 0:m.current.findLastIndex((x,p)=>!i[p].isCorrected&&p>c),k=()=>{h(n)};return e.jsx("span",{className:`${yn.answerBox} ${s===n?yn.currentOrder:""}`,children:s===n?e.jsx(e.Fragment,{children:e.jsx("span",{className:yn.currentInput,children:e.jsx("input",{ref:m=>t.current[n]=m,id:"textFild",style:{width:`${u.length*15.6}px`},type:"text",value:i[s].text,onKeyDown:m=>_(m),onChange:m=>v(m),onKeyUp:m=>y(m,s),onCopy:m=>m.preventDefault(),onPaste:m=>m.preventDefault(),onCut:m=>m.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1})})}):e.jsx(e.Fragment,{children:e.jsx("span",{className:`${yn.otherInput} ${i[n].isCorrected&&yn.correct}`,children:e.jsx("input",{ref:m=>t.current[n]=m,style:{width:`${u.length*15.6}px`},value:i[n].text,onFocus:()=>k(),disabled:!!(i[n].isCorrected||n>s&&i[n].text==="")})})})})}const Q0=new N(navigator.userAgent),A0=Q0.phone(),sn=A0?mt:ct;function N0({inputRefs:t,penaltyState:o,inputIndex:n,currentIndex:s,correctText:i,changeInputIndex:u,changePenaltyState:d}){const[a,h]=r.useState(""),[_,v]=r.useState(0),[y,g]=r.useState(0),b=r.useRef(null),k=r.useRef(null),m=f=>{o!=="penalty"&&f.preventDefault(),(f.key==="Tab"||f.altKey&&f.key==="Tab")&&(f.preventDefault(),t.current[s].focus())},c=f=>{f.preventDefault();const w=/^[ㄱ-ㅎa-zA-Z-'’‘”~ ]+(?:'){0,1}[a-zA-Z]?$/g;let S=f.currentTarget.value;switch(S.slice(-1)){case"‘":S=S.replace("‘","'");break;case"’":S=S.replace("’","'");break;case"”":S=S.replace("”",'"');break}w.test(S)||(S=S.slice(0,S.length-1)),h(S)},l=(f,w)=>{if(f.currentTarget.value===i)if(p(t,w)===-1)u(-1),d("success");else{const z=x(t,w);u(z)}},x=(f,w)=>f.current.findIndex((M,z)=>(M==null?void 0:M.value)===""||z>w),p=(f,w)=>f.current.findLastIndex((M,z)=>z>w);return r.useEffect(()=>{b.current&&b.current.offsetWidth>0&&v(b.current.offsetWidth),k.current&&k.current.offsetWidth>0&&g(k.current.offsetWidth)}),e.jsx("span",{className:`${sn.reviewAnswer} ${s===n?sn.currentOrder:""}`,children:s===n?e.jsxs("span",{children:[e.jsx("span",{className:sn.currentInput,children:e.jsx("input",{ref:f=>t.current[n]=f,id:"textFild",style:{width:`${_+4}px`},type:"text",value:a,onKeyDown:f=>m(f),onChange:f=>c(f),onKeyUp:f=>l(f,s),onCopy:f=>f.preventDefault(),onPaste:f=>f.preventDefault(),onCut:f=>f.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1})}),e.jsx("div",{ref:b,className:sn.hintText,children:i})]}):e.jsx(e.Fragment,{children:a===i||o==="success"?e.jsx("span",{style:{color:"#289EE4"},children:i}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:sn.otherInput,children:e.jsx("input",{ref:f=>t.current[n]=f,style:{width:`${y+4}px`},disabled:!0})}),e.jsx("div",{ref:k,className:sn.hintText,children:i})]})})})}const T0=new N(navigator.userAgent),I0=T0.phone(),E0=I0?mt:ct;function B0({inputRefs:t,isWorking:o,exampleData:n,currentIndex:s,inputValues:i,penaltyState:u,changeInputValue:d,changeInputIndex:a,checkAnswer:h,changePenaltyState:_}){t.current=[];let v=-1;const y=n.Question.Text.split(" ").map(g=>({text:g,index:g.includes("┒")?++v:0}));return e.jsx("div",{className:E0.questionBox,children:y.map((g,b)=>g.text.includes("┒")?e.jsx(e.Fragment,{children:u==="none"?hn(g.text,"┒",()=>e.jsx(C0,{inputRefs:t,isWorking:o,inputIndex:g.index,currentIndex:s,inputValues:i,correctText:n.Examples[g.index].Text,changeInputValue:d,checkAnswer:h,changeInputIndex:a},`text-input-${g.index}`)):hn(g.text,"┒",()=>e.jsx(N0,{inputRefs:t,penaltyState:u,inputIndex:g.index,currentIndex:s,correctText:n.Examples[g.index].Text,changeInputIndex:a,changePenaltyState:_},`penalty-input-${g.index}`))}):e.jsx("span",{dangerouslySetInnerHTML:{__html:g.text}},`word-${b}`))})}function P0({quizNo:t,src:o}){const[n,s]=r.useState(o);return r.useEffect(()=>{s(o)},[t]),r.useEffect(()=>{},[n]),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("audio",{src:n,style:{width:"90%"},autoPlay:!0,controls:!0,controlsList:"nodownload"})})}const M0=new N(navigator.userAgent),Li=M0.phone(),En="Cloze Test",Bn=Li?mt:ct;function L0(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?L("timeOut"):window.onLogoutStudy()}),[d,a]=r.useState("animate__bounceInRight"),{isStepIntro:h,closeStepIntro:_}=ze(),{isResultShow:v,changeResultShow:y}=Re(),[g,b]=r.useState(!1),k=r.useRef(!0),[m,c]=Ce(kr,t,i),[l,x]=r.useState([]),[p,f]=r.useState(1),[w,S]=r.useState([]),{scoreBoardData:M,setStudentAnswersPartial:z,makeUserPartialAnswerData:P}=Qe(s.mode,"clozeTest"),[C,j]=r.useState(0),[B,R]=r.useState(0),O=r.useRef([]),[W,V]=r.useState([]),[q,T]=r.useState(0),[I,G]=r.useState("none"),{bottomPopupState:U,changeBottomPopupState:Y}=Xe(),{playState:F,playAudio:E,stopAudio:A}=Le();if(r.useEffect(()=>{!h&&m&&(I==="none"&&u.setup(m.QuizTime,!0),k.current=!1)},[h]),r.useEffect(()=>{if(m){const[D,Z]=Ta(s.mode,c,m.QuizAnswerCount);if(s.mode==="student")if(c.length>0)if(z(re(c),m.QuizAnswerCount),x(c),m.IsEnablePenaltyReview&&c[c.length-1].PenaltyWord!=="")V(new Array(m.Quiz[D-2].Examples.length).fill({text:"",isCorrected:!1})),S(new Array(m.Quiz[D-2].Examples.length).fill("")),G("penalty"),f(c[c.length-1].CurrentQuizNo);else{if(c[D-1]&&c[D-1].CurrentQuizNo===D&&c[D-1].StudentAnswer!==""){const K=c[c.length-1].StudentAnswer.split("/"),ie=H(K,D);if(S(c[c.length-1].StudentAnswer.split("/")),ie){const me=ie.findIndex(ve=>!ve.isCorrected);T(me)}V(ie)}else V(new Array(m.Quiz[D-1].Examples.length).fill({text:"",isCorrected:!1})),S(new Array(m.Quiz[D-1].Examples.length).fill(""));j(Z),R(Z),f(D)}else j(Z),R(Z),f(D),S(new Array(m.Quiz[D-1].Examples.length).fill("")),V([...H(new Array(m.Quiz[D-1].Examples.length).fill(""),D)]);else{const K=m.Quiz[p-1].Examples;let ie=[];for(let me=0;me<K.length;me++)ie.push({text:m.Quiz[D-1].Examples[me].Text,isCorrected:!1});S(new Array(m.Quiz[D-1].Examples.length).fill("")),V(ie)}}},[m]),r.useEffect(()=>{if(!h&&!v&&m){if(u.setup(m.QuizTime,!0),T(0),s.mode!=="student"){const D=m.Quiz[p-1].Examples;let Z=[];for(let K=0;K<D.length;K++)Z.push({text:m.Quiz[p-1].Examples[K].Text,isCorrected:!1});V(Z)}k.current=!1}},[p]),r.useEffect(()=>{q>-1&&(O!=null&&O.current[q])&&(O==null||O.current[q].focus())},[q]),r.useEffect(()=>{m&&(I==="penalty"&&!h?u.stop():I==="success"&&xe())},[I]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const Q=D=>{let Z=[],K=[],ie=[],me=[...w];for(let _e=0;_e<(O==null?void 0:O.current.length);_e++){const $t={example:m.Quiz[p-1].Examples[_e].Text,input:O==null?void 0:O.current[_e].value.trimStart().trimEnd(),isEqual:m.Quiz[p-1].Examples[_e].Text===(O==null?void 0:O.current[_e].value.trimStart().trimEnd())};me[_e].length>0?me[_e]=me[_e].slice(-1)==="1"?me[_e]:me[_e]+=m.Quiz[p-1].Examples[_e].Text===(O==null?void 0:O.current[_e].value.trimStart().trimEnd())?"1":"2":me[_e]=m.Quiz[p-1].Examples[_e].Text===(O==null?void 0:O.current[_e].value.trimStart().trimEnd())?"1":"2",ie.push($t.example),Z.push($t),K.push($t.input.trimStart().trimEnd())}const ve=Z.filter(_e=>_e.input.trimStart().trimEnd()==="").length>0;return ve&&!D?(me=[],me=[...w]):S(me),[ve,Z,ie.join("┒")===K.join("┒"),ie.join("┒"),K.join("┒"),me.join("/")]},L=async D=>{try{if(!k.current){k.current=!0,u.stop();const[Z,K,ie,me,ve,_e]=Q(D);if(Z&&!D)alert(o("study.빈칸이 존재하지 않아야 합니다.")),k.current=!1,u.start();else{const $t={quizNo:p,maxCount:m.QuizAnswerCount,answerCount:C+1,ox:ie},pn=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:m.Quiz[p-1].QuizId,quizNo:m.Quiz[p-1].QuizNo,currentQuizNo:m.Quiz[p-1].QuizNo,correct:me,selectedAnswer:ve,partialRecord:_e,tryCount:C+1,maxQuizCount:m.QuizAnswerCount,quizLength:m.Quiz.length,isCorrect:ie,answerData:$t,isEnabledPenalty:m.IsEnablePenaltyReview,isFinishStudy:t.lastStep===i}),Bt=await Zs(s.mode,pn);if(Number(Bt.result)===0){Bt.resultMessage&&(n.finishStudy={id:Number(Bt.result),cause:Bt.resultMessage});const ue=l.filter(Je=>Je.QuizNo!==m.Quiz[p-1].QuizNo),we={QuizId:`${m.Quiz[p-1].QuizId}`,QuizNo:m.Quiz[p-1].QuizNo,CurrentQuizNo:m.Quiz[p-1].QuizNo,OX:ie?"1":"2",TempText:"",PenaltyWord:"",Correct:me,StudentAnswer:_e,AnswerCount:C+1},ke=[...ue,we];x([...ue,we]),z(re(ke),m.QuizAnswerCount),ie||R(B+1),j(C+1),X(ie,K)}}}}catch(Z){console.error(Z)}},X=(D,Z)=>{Y({isActive:!0,isCorrect:D}),setTimeout(()=>{if(D)p+1>Object.keys(m.Quiz).length?(A(),y(!0)):(A(),ce(),j(0),R(0),ae("none"),S(new Array(m.Quiz[p].Examples.length).fill("")),f(p+1));else{let K=!0,ie=0,me=[];O==null||O.current.forEach((ve,_e)=>{Z[_e].isEqual||K&&(K=!1,ie=_e),me.push({text:Z[_e].input,isCorrected:Z[_e].isEqual})}),V([...me]),C===m.QuizAnswerCount-1?(A(),T(0),ae("penalty")):(u.setup(m.QuizTime,!0),T(ie),k.current=!1)}Y({isActive:!1,isCorrect:!1})},1500)},te=D=>{T(D)},oe=(D,Z)=>{const K=W.map((ie,me)=>D===me?{text:Z,isCorrected:ie.isCorrected}:{text:ie.text,isCorrected:ie.isCorrected});V([...K])},ce=()=>{m.Quiz[p]&&V([...new Array(m.Quiz[p].Examples.length).fill({text:"",isCorrected:!1})])},ae=D=>{G(D)},xe=async()=>{const D=p+1>m.Quiz.length;(async()=>{const K=await _s({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,quizId:m.Quiz[p-1].QuizId,isLastQuiz:D,isFinishStudy:!!(D&&t.lastStep===i)});Number(K.result)===0&&(K.resultMessage&&(n.finishStudy={id:Number(K.result),cause:K.resultMessage}),A(),p+1>Object.keys(m.Quiz).length?y(!0):(A(),ce(),j(0),R(0),S(new Array(m.Quiz[p].Examples.length).fill("")),ae("none"),f(p+1)))})()},re=D=>{let Z=[];return D.map(K=>{K.StudentAnswer.split("/").map(ie=>{Z.push({QuizId:`${K.QuizId}`,QuizNo:K.QuizNo,CurrentQuizNo:K.CurrentQuizNo,OX:ie,TempText:"",PenaltyWord:"",Correct:K.Correct,StudentAnswer:ie,AnswerCount:ie.length})})}),Z},H=(D,Z)=>{let K=[];for(let ie=0;ie<D.length;ie++){const me={text:D[ie].slice(-1)==="1"?m.Quiz[Z-1].Examples[ie].Text:"",isCorrected:D[ie].slice(-1)==="1"};K.push(me)}return K},J=D=>{b(D)};return e.jsx(e.Fragment,{children:h?e.jsx("div",{className:`animate__animated ${d}`,onAnimationEnd:()=>{d==="animate__bounceOutLeft"&&_()},children:e.jsx(Me,{step:i,quizType:En,comment:o("study.문장을 읽고 빈칸에 들어갈 답을 입력하세요."),onStepIntroClozeHandler:()=>{a("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:v?e.jsx(it,{step:i,quizType:En,quizAnswerCount:m.QuizAnswerCount,studentAnswer:M,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:p,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:J}),e.jsx("div",{className:`${ct.comment} animate__animated animate__fadeInLeft`,children:En}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:Bn.clozeTest3,containerCSS:Bn.container,children:[Li?e.jsx(e.Fragment,{}):e.jsx(ee,{height:0}),I==="none"?e.jsx(P0,{quizNo:p,src:m.Quiz[p-1].Question.Sound}):e.jsx("div",{className:Bn.testReview,children:e.jsx("div",{className:Bn.title,children:"Test Review"})}),e.jsx(B0,{inputRefs:O,isWorking:k.current,exampleData:m.Quiz[p-1],currentIndex:q,inputValues:W,penaltyState:I,changeInputValue:oe,changeInputIndex:te,checkAnswer:L,changePenaltyState:ae})]})}),g&&e.jsx(Ne,{isSideOpen:g,currentStep:i,currentStepType:En,quizLength:m.Quiz.reduce((D,Z)=>D+Z.Examples.length,0),maxAnswerCount:m.QuizAnswerCount,changeSideMenu:J,scoreBoardData:M,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:U})]})})})}async function R0(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/listening-activity-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound}})),Examples:a.Examples.map(h=>({Text:h.Text,Image:h.Image}))}))}async function F0(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/listening-activity-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound}})),Examples:a.Examples.map(h=>({Text:h.Text}))}))}async function q0(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/listening-activity-3?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text,Image:_.Image}))}))}))}async function H0(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/listening-activity-4?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Image:h.Question.Image},Examples:h.Examples.map(_=>({Text:_.Text,Sound:_.Sound}))}))}))}const O0="_comment_a7z63_1",D0="_wordPlayButton_a7z63_20",V0="_txtL_a7z63_35",W0="_wordPlayButton2_a7z63_46",G0="_cardNumber_a7z63_65",K0="_listeningActivity1_a7z63_80",U0="_container_a7z63_80",J0="_wordCard_a7z63_87",Y0="_done_a7z63_118",X0="_correct_a7z63_131",Z0="_incorrect_a7z63_135",ex="_word_a7z63_20",tx="_wordBlock_a7z63_152",nx="_listeningActivity2_a7z63_164",sx="_listeningActivity3_a7z63_231",ox="_imageCard_a7z63_237",ix="_cardNumberPosition_a7z63_285",rx="_listeningActivity4_a7z63_291",ax="_questionBox_a7z63_296",cx="_soundCard_a7z63_313",ux="_playSoundPosition_a7z63_366",lx="_enterButton_a7z63_372",dx="_answers_a7z63_399",xt={comment:O0,wordPlayButton:D0,txtL:V0,wordPlayButton2:W0,cardNumber:G0,listeningActivity1:K0,container:U0,wordCard:J0,done:Y0,correct:X0,incorrect:Z0,word:ex,wordBlock:tx,listeningActivity2:nx,listeningActivity3:sx,imageCard:ox,cardNumberPosition:ix,listeningActivity4:rx,questionBox:ax,soundCard:cx,playSoundPosition:ux,enterButton:lx,answers:dx},mx="_comment_dqg9g_1",xx="_wordPlayButton_dqg9g_20",hx="_txtL_dqg9g_35",_x="_wordPlayButton2_dqg9g_46",px="_cardNumber_dqg9g_65",gx="_listeningActivity1_dqg9g_80",yx="_container_dqg9g_80",fx="_wordCard_dqg9g_87",bx="_done_dqg9g_113",vx="_correct_dqg9g_120",wx="_incorrect_dqg9g_124",kx="_word_dqg9g_20",Sx="_wordBlock_dqg9g_141",jx="_listeningActivity2_dqg9g_153",zx="_listeningActivity3_dqg9g_215",$x="_imageCard_dqg9g_221",Cx="_cardNumberPosition_dqg9g_261",Qx="_listeningActivity4_dqg9g_267",Ax="_questionBox_dqg9g_272",Nx="_soundCard_dqg9g_295",Tx="_playSoundPosition_dqg9g_343",Ix="_enterButton_dqg9g_349",Ex="_answers_dqg9g_376",ht={comment:mx,wordPlayButton:xx,txtL:hx,wordPlayButton2:_x,cardNumber:px,listeningActivity1:gx,container:yx,wordCard:fx,done:bx,correct:vx,incorrect:wx,word:kx,wordBlock:Sx,listeningActivity2:jx,listeningActivity3:zx,imageCard:$x,cardNumberPosition:Cx,listeningActivity4:Qx,questionBox:Ax,soundCard:Nx,playSoundPosition:Tx,enterButton:Ix,answers:Ex},Bx=new N(navigator.userAgent),Px=Bx.phone(),qo=Px?ht:xt;function Mx({playState:t,onPlay:o}){return e.jsxs("div",{className:qo.wordPlayButton,onClick:()=>o(),children:[t===""?e.jsx(Fe,{isColor:!0,width:34,height:34}):e.jsx(qe,{isColor:!0,width:34,height:34}),e.jsx("span",{className:qo.txtL,children:"Listen"})]})}const Lx=new N(navigator.userAgent),Rx=Lx.phone(),fn=Rx?ht:xt;function Fx({imgSrc:t,text:o,correctText:n,isCorrected:s=!1,onCardAnimationEndHandler:i,onWordAnimationEndHandler:u,checkAnswer:d}){const{studyInfo:a}=r.useContext(se),[h,_]=r.useState(!1),[v,y]=r.useState(a.mode==="review"),g=k=>{(!s&&!h||v)&&d(k.currentTarget,o)},b=()=>{v&&n===o&&y(!1),_(!0)};return e.jsxs("div",{className:`animate__animated ${fn.wordCard} ${(h||s)&&!v?fn.done:""} 
      ${v&&n===o?fn.correct:""}`,onClick:k=>{g(k)},onAnimationEnd:k=>{i(k,b)},children:[e.jsx("img",{src:t}),(h||s)&&!v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${fn.word}`,children:o}),e.jsx("div",{className:`${fn.wordBlock} animate__animated animate__fadeIn`,onAnimationEnd:k=>{u(k,s)}})]})]})}const qx=new N(navigator.userAgent),Ri=qx.phone(),Pn="Listening Activity",zs=Ri?ht:xt;function Hx(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),[m,c]=Ce(R0,t,i),[l,x]=r.useState(1),{scoreBoardData:p,setStudentAnswers:f,addStudentAnswer:w,makeUserAnswerData:S}=Qe(s.mode),[M,z]=r.useState(""),[P,C]=r.useState([]),[j,B]=r.useState(0),[R,O]=r.useState(0),{bottomPopupState:W,changeBottomPopupState:V}=Xe(),{playState:q,playAudio:T,stopAudio:I}=Le(),G=r.useRef(!0);if(r.useEffect(()=>{!_&&m&&(u.setup(m.QuizTime,!0),T(m.Quiz[l-1].Question.Sound),G.current=!1)},[_]),r.useEffect(()=>{if(m)try{const[L,X]=ut(s.mode,c,m.QuizAnswerCount);let te=[],oe=[];te=c.map(ce=>{var ae;return(ae=m.Quiz.find(xe=>ce.OX==="1"&&ce.QuizNo===xe.QuizNo))==null?void 0:ae.Question.Text}),oe=m.Examples.slice(0,5).map(ce=>({...ce,IsCorrected:!!te.find(ae=>ae===ce.Text)})),B(X),O(X),z(m.Quiz[L-1].Question.Text),f(c,m.QuizAnswerCount),s.mode==="staff"?C(oe):C(ge.shuffle(oe)),x(L)}catch(L){console.error(L)}},[m]),r.useEffect(()=>{!_&&!y&&m&&(I(),z(m.Quiz[l-1].Question.Text))},[l]),r.useEffect(()=>{!_&&!y&&m&&(T(m.Quiz[l-1].Question.Sound),u.setup(m.QuizTime,!0),G.current=!1)},[M]),r.useEffect(()=>{y&&u.stop()},[y]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const U=async(L,X)=>{if(!G.current){I(),G.current=!0;const te=M===X,oe={quizNo:l,maxCount:m.QuizAnswerCount,answerCount:j+1,ox:te},ce=S({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:m.Quiz[l-1].QuizId,quizNo:m.Quiz[l-1].QuizNo,currentQuizNo:l,correct:m.Quiz[l-1].Question.Text,selectedAnswer:X,tryCount:j+1,maxQuizCount:m.QuizAnswerCount,quizLength:m.Quiz.length,isCorrect:te,answerData:oe,isFinishStudy:t.lastStep===i}),ae=await Ie(s.mode,ce);Number(ae.result)===0&&(ae.resultMessage&&(n.finishStudy={id:Number(ae.result),cause:ae.resultMessage}),w(oe),te||O(R+1),B(j+1),Y(L,te))}},Y=(L,X)=>{V({isActive:!0,isCorrect:X}),X?d.play(L,["animate__fadeIn"]):d.play(L,["animate__headShake"])},F=(L,X)=>{L.preventDefault(),L.stopPropagation();const te=L.currentTarget,oe=!!d.isContain(te,"animate__fadeIn");setTimeout(()=>{oe?X():(d.remove(te,["animate__headShake"]),V({isActive:!1,isCorrect:!1}),j>=m.QuizAnswerCount?(B(0),O(0),l+1>m.Quiz.length?g(!0):x(l+1)):(A(),G.current=!1))},1500)},E=(L,X)=>{L.preventDefault(),L.stopPropagation();const te=L.currentTarget;d.remove(te,["selected"]),V({isActive:!1,isCorrect:!1}),(!X||X===void 0||s.mode==="review")&&setTimeout(()=>{B(0),O(0),l+1>m.Quiz.length?g(!0):x(l+1)},1e3)},A=()=>{q===""?T(m.Quiz[l-1].Question.Sound):I()},Q=L=>{k(L)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Pn,comment:o("study.소리를 듣고 알맞은 그림을 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:Pn,quizAnswerCount:m.QuizAnswerCount,studentAnswer:p,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:l,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount-R,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:Q}),e.jsx("div",{className:`${zs.comment} animate__animated animate__fadeInLeft`,children:Pn}),e.jsxs(Te,{children:[e.jsx(Mx,{playState:q,onPlay:A}),Ri?e.jsx(ee,{height:10}):e.jsx(ee,{height:15}),e.jsx(Be,{typeCSS:zs.listeningActivity1,containerCSS:zs.container,children:P.map(L=>e.jsx(Fx,{imgSrc:L.Image,text:L.Text,correctText:M,isCorrected:L.IsCorrected,onCardAnimationEndHandler:F,onWordAnimationEndHandler:E,checkAnswer:U}))}),e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:Pn,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,changeSideMenu:Q,scoreBoardData:p,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:W})]})})})}const Ox=new N(navigator.userAgent),Dx=Ox.phone(),Ho=Dx?ht:xt;function Vx({playState:t,onPlay:o}){return e.jsxs("div",{className:Ho.wordPlayButton,onClick:()=>o(),children:[t===""?e.jsx(Fe,{isColor:!0,width:34,height:34}):e.jsx(qe,{isColor:!0,width:34,height:34}),e.jsx("span",{className:Ho.txtL,children:"Listen"})]})}const Wx=new N(navigator.userAgent),Gx=Wx.phone(),Mn=Gx?ht:xt;function Kx({text:t,correctText:o,isCorrected:n=!1,checkAnswer:s,onCardAnimationEndHandler:i}){const{studyInfo:u}=r.useContext(se),[d,a]=r.useState(!1),[h,_]=r.useState(u.mode==="review"),v=g=>{(!n&&!d||h)&&s(g.currentTarget,t)},y=()=>{h&&o===t&&_(!1),a(!0)};return e.jsx("div",{className:`animate__animated ${Mn.wordCard} ${(d||n)&&!h?Mn.done:""} 
    ${h&&o===t?Mn.correct:""}`,onClick:g=>{v(g)},onAnimationEnd:g=>i(g,y),children:e.jsx("div",{className:Mn.txtL,children:t})})}const Ux=new N(navigator.userAgent),so=Ux.phone(),Ln="Listening Activity",Ht=so?ht:xt;function Jx(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(F0,t,i),{scoreBoardData:x,setStudentAnswers:p,addStudentAnswer:f,makeUserAnswerData:w}=Qe(s.mode),[S,M]=r.useState([]),[z,P]=r.useState(1),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playState:V,playAudio:q,stopAudio:T}=Le();if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),q(c.Quiz[z-1].Question.Sound),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[E,A]=ut(s.mode,l,c.QuizAnswerCount);let Q=[],L=[];Q=l.map(X=>{var te;return(te=c.Quiz.slice(0,6).find(oe=>X.OX==="1"&&X.QuizNo===oe.QuizNo))==null?void 0:te.Question.Text}),L=c.Examples.slice(0,6).map(X=>({...X,IsCorrected:!!Q.find(te=>te===X.Text)})),j(A),R(A),p(l,c.QuizAnswerCount),s.mode==="staff"?M(L):M(ge.shuffle(L)),P(E)}catch(E){console.error(E)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),j(0),R(0),q(c.Quiz[z-1].Question.Sound),m.current=!1)},[z]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(E,A)=>{if(!m.current){m.current=!0;const Q=c.Quiz[z-1].Question.Text===A,L={quizNo:z,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:Q},X=w({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[z-1].QuizId,quizNo:c.Quiz[z-1].QuizNo,currentQuizNo:z,correct:c.Quiz[z-1].Question.Text,selectedAnswer:A,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:Q,answerData:L,isFinishStudy:t.lastStep===i}),te=await Ie(s.mode,X);Number(te.result)===0&&(te.resultMessage&&(n.finishStudy={id:Number(te.result),cause:te.resultMessage}),f(L),Q||R(B+1),j(C+1),G(E,Q))}},G=(E,A)=>{W({isActive:!0,isCorrect:A}),A?d.play(E,["animate__fadeIn",Ht.correct]):d.play(E,["animate__headShake",Ht.incorrect])},U=(E,A)=>{const Q=E.currentTarget,L=!!d.isContain(Q,"animate__fadeIn");setTimeout(()=>{d.remove(Q,["animate__fadeIn","animate__headShake",Ht.correct,Ht.incorrect]),W({isActive:!1,isCorrect:!1}),L?(A(),setTimeout(()=>{z+1>c.Quiz.length?g(!0):P(z+1)},300)):(d.remove(Q,["animate__headShake"]),W({isActive:!1,isCorrect:!1}),C>=c.QuizAnswerCount?(j(0),R(0),z+1>c.Quiz.length?g(!0):P(z+1)):(Y(),u.setup(c.QuizTime,!0),m.current=!1))},1500)},Y=()=>{V===""?q(c.Quiz[z-1].Question.Sound):T()},F=E=>{k(E)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Ln,comment:o("study.소리를 듣고 알맞은 단어를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:Ln,quizAnswerCount:c.QuizAnswerCount,studentAnswer:x,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:z,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${Ht.comment} animate__animated animate__fadeInLeft`,children:Ln}),e.jsxs(Te,{children:[e.jsx(Vx,{playState:V,onPlay:Y}),so?e.jsx(ee,{height:10}):e.jsx(ee,{height:15}),e.jsx(Be,{typeCSS:Ht.listeningActivity2,containerCSS:Ht.container,children:S.map((E,A)=>e.jsx(Kx,{text:E.Text,correctText:c.Quiz[z-1].Question.Text,isCorrected:E.IsCorrected,checkAnswer:I,onCardAnimationEndHandler:U}))}),so?e.jsx(ee,{height:10}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:Ln,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:F,scoreBoardData:x,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const Yx=new N(navigator.userAgent),Xx=Yx.phone(),Oo=Xx?ht:xt;function Zx({playState:t,onPlay:o}){return e.jsxs("div",{className:Oo.wordPlayButton,onClick:()=>o(),children:[t===""?e.jsx(Fe,{isColor:!0,width:34,height:34}):e.jsx(qe,{isColor:!0,width:34,height:34}),e.jsx("span",{className:Oo.txtL,children:"Listen"})]})}const e1=new N(navigator.userAgent),oo=e1.phone(),Rn=oo?ht:xt;function t1({correctText:t,example:o,index:n,checkAnswer:s,onWrapperAnimationEndHandler:i}){const{bookInfo:u,studyInfo:d}=r.useContext(se);return e.jsxs("div",{className:`${Rn.imageCard} 
      ${d.mode==="review"&&Number(u.Average)>=70&&o.Text===t?Rn.correct:""}`,onClick:a=>s(a.currentTarget,o.Text),onAnimationEnd:a=>{i(a)},children:[e.jsx("img",{src:o.Image,width:oo?"auto":"100%",height:oo?"100%":"auto"}),e.jsx("div",{className:Rn.cardNumberPosition,children:e.jsx("div",{className:Rn.cardNumber,children:Number(n+1)})})]})}const n1=new N(navigator.userAgent),s1=n1.phone(),Do=s1?ht:xt;function o1({correctText:t,exampleData:o,checkAnswer:n,onWrapperAnimationEndHandler:s}){return e.jsx("div",{className:Do.listeningActivity3,children:e.jsx("div",{className:Do.container,children:o.map((i,u)=>e.jsx(t1,{correctText:t,example:i,index:u,checkAnswer:n,onWrapperAnimationEndHandler:s},`example-0${u+1}`))})})}const i1=new N(navigator.userAgent),io=i1.phone(),Fn="Listening Activity",bn=io?ht:xt;function r1(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(q0,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playState:V,playAudio:q,stopAudio:T}=Le();if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),q(c.Quiz[x-1].Question.Sound),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[E,A]=ut(s.mode,l,c.QuizAnswerCount);w(l,c.QuizAnswerCount),s.mode==="staff"?P(c.Quiz[E-1].Examples):P(ge.shuffle(c.Quiz[E-1].Examples)),w(l,c.QuizAnswerCount),p(E)}catch(E){console.error(E)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),j(0),R(0),u.setup(c.QuizTime,!0),q(c.Quiz[x-1].Question.Sound),m.current=!1)},[x]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(E,A)=>{if(!m.current){m.current=!0,T();const Q=c.Quiz[x-1].Question.Text===A,L={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:Q},X=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:A,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:Q,answerData:L,isFinishStudy:t.lastStep===i});u.stop();const te=await Ie(s.mode,X);Number(te.result)===0&&(te.resultMessage&&(n.finishStudy={id:Number(te.result),cause:te.resultMessage}),S(L),Q||R(B+1),j(C+1),G(E,Q))}},G=(E,A)=>{u.stop(),W({isActive:!0,isCorrect:A}),A?d.play(E,["animate__fadeIn",bn.correct]):d.play(E,["animate__headShake",bn.incorrect])},U=E=>{const A=E.currentTarget;setTimeout(()=>{d.remove(A,["selected","animate__fadeIn","animate__headShake",bn.correct,bn.incorrect]),W({isActive:!1,isCorrect:!1}),x+1>c.Quiz.length?g(!0):p(x+1)},1e3)},Y=()=>{V===""?q(c.Quiz[x-1].Question.Sound):T()},F=E=>{k(E)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Fn,comment:o("study.소리를 듣고 알맞은 카드를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:Fn,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${bn.comment} animate__animated animate__fadeInLeft`,children:Fn}),e.jsxs(Te,{children:[e.jsx(Zx,{playState:V,onPlay:Y}),io?e.jsx(ee,{height:10}):e.jsx(ee,{height:15}),e.jsx(o1,{correctText:c.Quiz[x-1].Examples[0].Text,exampleData:z,checkAnswer:I,onWrapperAnimationEndHandler:U}),io?e.jsx(ee,{height:0}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:Fn,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:F,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const a1=new N(navigator.userAgent),ro=a1.phone(),c1=ro?ht:xt;function u1({src:t}){return e.jsx("div",{className:c1.questionBox,children:e.jsx("img",{src:t,width:ro?"auto":"250px",height:ro?"100%":"auto"})})}const l1=new N(navigator.userAgent),d1=l1.phone(),m1=d1?ht:xt;function x1({multiPlayState:t,index:o,playWord:n}){return e.jsx("div",{className:m1.wordPlayButton2,onClick:()=>n(o),children:t.playState==="playing"&&t.seq===o?e.jsx(qe,{isColor:!0,width:44,height:44}):e.jsx(Fe,{isColor:!0,width:44,height:44})})}const h1=new N(navigator.userAgent),_1=h1.phone(),on=_1?ht:xt;function p1({index:t,multiPlayState:o,correctText:n,exampleData:s,playWord:i,checkAnswer:u,onAnimationEndHandler:d}){const{bookInfo:a,studyInfo:h}=r.useContext(se),_=r.useRef(null),v=()=>{u(_,s.Text)};return e.jsxs("div",{ref:_,className:`${on.soundCard} 
      ${h.mode==="review"&&Number(a.Average)>=70&&s.Text===n?on.correct:""}`,onAnimationEnd:y=>d(y),children:[e.jsx("div",{className:on.cardNumberPosition,children:e.jsx("div",{className:on.cardNumber,children:Number(t+1)})}),e.jsx("div",{className:on.playSoundPosition,children:e.jsx(x1,{multiPlayState:o,index:t,playWord:i})}),e.jsx("span",{className:on.enterButton,onClick:()=>v(),children:e.jsx("span",{children:e.jsx(ys,{width:15,height:15})})})]})}const g1=new N(navigator.userAgent),y1=g1.phone(),f1=y1?ht:xt;function b1({multiPlayState:t,correctText:o,exampleData:n,playWord:s,checkAnswer:i,onAnimationEndHandler:u}){return e.jsx("div",{className:f1.answers,children:n.map((d,a)=>e.jsx(p1,{index:a,multiPlayState:t,correctText:o,exampleData:d,playWord:s,checkAnswer:i,onAnimationEndHandler:u},`e-0${a}`))})}const v1=new N(navigator.userAgent),ao=v1.phone(),qn="Listening Activity",Ot=ao?ht:xt;function w1(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(H0,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playAudio:V,stopAudio:q}=Le(),[T,I]=r.useState({playState:"",playType:"",seq:-1});if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),A(),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{c.Quiz.sort((X,te)=>Number(X.QuizNo)-Number(te.QuizNo));const[Q,L]=ut(s.mode,l,c.QuizAnswerCount);j(L),R(L),s.mode==="staff"?P(c.Quiz[Q-1].Examples):P(ge.shuffle(c.Quiz[Q-1].Examples)),w(l,c.QuizAnswerCount),p(Q)}catch(Q){console.error(Q)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),j(0),R(0),s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),A(),m.current=!1)},[x]),r.useEffect(()=>{if(q(),c&&T.seq>-1){if(T.playType==="sentence"){const Q=()=>{I({playState:"",playType:"",seq:-1})};V(z[T.seq].Sound,Q)}else if(T.playType==="all"){const Q=()=>{T.seq<c.Quiz[x-1].Examples.length-1?I({playState:"playing",playType:"all",seq:T.seq+1}):(q(),I({playState:"",playType:"",seq:-1}))};V(z[T.seq].Sound,Q)}}},[T]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const G=async(Q,L)=>{try{if(!m.current){m.current=!0,q(),I({playState:"",playType:"",seq:-1});const X=c.Quiz[x-1].Question.Text===L,te={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:X},oe=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:L,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:X,answerData:te,isFinishStudy:t.lastStep===i});u.stop();const ce=await Ie(s.mode,oe);if(Number(ce.result)===0){ce.resultMessage&&(n.finishStudy={id:Number(ce.result),cause:ce.resultMessage});const ae={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:X};X||R(B+1),j(C+1),S(ae),U(Q,X)}}}catch(X){console.error(X)}},U=(Q,L)=>{u.stop(),W({isActive:!0,isCorrect:L}),Q.current&&(L?d.play(Q.current,["animate__fadeIn",Ot.correct]):d.play(Q.current,["animate__headShake",Ot.incorrect]))},Y=Q=>{const L=Q.currentTarget,X=!!d.isContain(L,"animate__fadeIn");setTimeout(()=>{W({isActive:!1,isCorrect:!1}),d.remove(L,[Ot.correct,Ot.incorrect,"animate__fadeIn","animate__headShake"]),X||C>=c.QuizAnswerCount?x+1>c.Quiz.length?g(!0):p(x+1):(u.setup(c.QuizTime,!0),m.current=!1)},1e3)},F=Q=>{k(Q)},E=Q=>{T.playState===""&&Q>-1?I({playState:"playing",playType:"sentence",seq:Q}):T.playState==="playing"&&T.seq===Q?I({playState:"",playType:"",seq:-1}):T.playState==="playing"&&T.seq!==Q&&I({playState:"playing",playType:"sentence",seq:Q})},A=()=>{q(),T.playState==="playing"?I({playState:"",playType:"",seq:-1}):I({playState:"playing",playType:"all",seq:0})};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:qn,comment:o("study.그림을 보고 알맞은 소리를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:qn,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${Ot.comment} animate__animated animate__fadeInLeft`,children:qn}),e.jsxs(Te,{children:[ao?e.jsx(ee,{height:0}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Ot.listeningActivity4,containerCSS:Ot.container,children:[e.jsx(u1,{src:c.Quiz[x-1].Question.Image}),e.jsx(ee,{height:15}),e.jsx(b1,{multiPlayState:T,correctText:c.Quiz[x-1].Examples[0].Text,exampleData:z,playWord:E,checkAnswer:G,onAnimationEndHandler:Y})]}),ao?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:qn,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:F,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}async function k1(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/reading-comprehension-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text,Image:_.Image}))}))}))}async function S1(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/reading-comprehension-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Image:h.Question.Image},Examples:h.Examples.map(_=>({Text:_.Text,Sound:_.Sound}))}))}))}async function j1(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/reading-comprehension-3?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Image:h.Question.Image,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text,Sound:_.Sound}))}))}))}async function z1(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/reading-comprehension-4?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),IsModeRetest:!!a.IsModeRetest,PassMark:Number(a.PassMark),IsHideQuestionText:!!a.IsHideQuestionText,Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}const $1="_comment_1suhw_1",C1="_wordPlayButton_1suhw_20",Q1="_txtL_1suhw_35",A1="_wordPlayButton2_1suhw_40",N1="_cardNumber_1suhw_61",T1="_readingComprehension1_1suhw_76",I1="_container_1suhw_76",E1="_imageCard_1suhw_82",B1="_correct_1suhw_116",P1="_incorrect_1suhw_121",M1="_cardNumberPosition_1suhw_130",L1="_readingComprehension2_1suhw_136",R1="_questionBox_1suhw_141",F1="_wordImage_1suhw_156",q1="_wordText_1suhw_165",H1="_textCard_1suhw_171",O1="_awnserText_1suhw_214",D1="_enterButton_1suhw_218",V1="_answers_1suhw_242",W1="_readingComprehension3_1suhw_250",G1="_questionImage_1suhw_259",K1="_questionText_1suhw_270",U1="_readingComprehension4_1suhw_352",rt={comment:$1,wordPlayButton:C1,txtL:Q1,wordPlayButton2:A1,cardNumber:N1,readingComprehension1:T1,container:I1,imageCard:E1,correct:B1,incorrect:P1,cardNumberPosition:M1,readingComprehension2:L1,questionBox:R1,wordImage:F1,wordText:q1,textCard:H1,awnserText:O1,enterButton:D1,answers:V1,readingComprehension3:W1,questionImage:G1,questionText:K1,readingComprehension4:U1},J1="_comment_1lsqx_1",Y1="_wordPlayButton_1lsqx_20",X1="_txtL_1lsqx_35",Z1="_wordPlayButton2_1lsqx_40",eh="_cardNumber_1lsqx_61",th="_readingComprehension1_1lsqx_76",nh="_container_1lsqx_76",sh="_imageCard_1lsqx_82",oh="_correct_1lsqx_109",ih="_incorrect_1lsqx_114",rh="_cardNumberPosition_1lsqx_123",ah="_readingComprehension2_1lsqx_129",ch="_questionBox_1lsqx_134",uh="_wordImage_1lsqx_155",lh="_wordText_1lsqx_170",dh="_textCard_1lsqx_176",mh="_awnserText_1lsqx_215",xh="_enterButton_1lsqx_219",hh="_answers_1lsqx_243",_h="_readingComprehension3_1lsqx_250",ph="_questionImage_1lsqx_261",gh="_questionText_1lsqx_284",yh="_readingComprehension4_1lsqx_362",at={comment:J1,wordPlayButton:Y1,txtL:X1,wordPlayButton2:Z1,cardNumber:eh,readingComprehension1:th,container:nh,imageCard:sh,correct:oh,incorrect:ih,cardNumberPosition:rh,readingComprehension2:ah,questionBox:ch,wordImage:uh,wordText:lh,textCard:dh,awnserText:mh,enterButton:xh,answers:hh,readingComprehension3:_h,questionImage:ph,questionText:gh,readingComprehension4:yh},fh=new N(navigator.userAgent),bh=fh.phone(),Vo=bh?at:rt;function vh({playState:t,question:o,onPlay:n}){return e.jsxs("div",{className:Vo.wordPlayButton,onClick:()=>n(),children:[t===""?e.jsx(Fe,{isColor:!0,width:34,height:34}):e.jsx(qe,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Vo.txtL,children:o})]})}const wh=new N(navigator.userAgent),co=wh.phone(),Hn=co?at:rt;function kh({index:t,img:o,text:n,correctText:s,checkAnswer:i,onAnimationEndHandler:u}){const{bookInfo:d,studyInfo:a}=r.useContext(se);return e.jsxs("div",{className:`${Hn.imageCard} ${a.mode==="review"&&Number(d.Average)>=70&&s===n?Hn.correct:""} animate__animated`,onClick:h=>i(h.currentTarget,n),onAnimationEnd:h=>u(h),children:[e.jsx("img",{src:o,width:co?"auto":"100%",height:co?"100%":"auto"}),e.jsx("div",{className:Hn.cardNumberPosition,children:e.jsx("div",{className:Hn.cardNumber,children:t})})]})}const Sh=new N(navigator.userAgent),hs=Sh.phone(),On="Reading Comprehension",Dt=hs?at:rt;function jh(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(k1,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playState:V,playAudio:q,stopAudio:T}=Le();if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),q(c.Quiz[x-1].Question.Sound),m.current=!1)},[_]),r.useEffect(()=>{if(c){const[E,A]=ut(s.mode,l,c.QuizAnswerCount);j(A),R(A),s.mode==="staff"?P(c.Quiz[E-1].Examples):P(ge.shuffle(c.Quiz[E-1].Examples)),w(l,c.QuizAnswerCount),p(E)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),j(0),R(0),u.setup(c.QuizTime,!0),q(c.Quiz[x-1].Question.Sound),m.current=!1)},[x]),r.useEffect(()=>{y&&u.stop()},[y]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(E,A)=>{try{if(!m.current){m.current=!0;const Q=c.Quiz[x-1].Question.Text===A,L={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:Q},X=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:A,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:Q,answerData:L,isFinishStudy:t.lastStep===i});u.stop();const te=await Ie(s.mode,X);Number(te.result)===0&&(te.resultMessage&&(n.finishStudy={id:Number(te.result),cause:te.resultMessage}),S(L),Q||R(B+1),j(C+1),G(E,Q))}}catch(Q){console.error(Q)}},G=(E,A)=>{u.stop(),W({isActive:!0,isCorrect:A}),A?d.play(E,["animate__fadeIn",Dt.correct]):d.play(E,["animate__headShake",Dt.incorrect])},U=E=>{const A=E.currentTarget;setTimeout(()=>{d.remove(A,["animate__fadeIn","animate__headShake",Dt.correct,Dt.incorrect]),W({isActive:!1,isCorrect:!1}),j(0),R(0),x+1>c.Quiz.length?g(!0):p(x+1)},1500)},Y=E=>{k(E)},F=()=>{V===""?q(c.Quiz[x-1].Question.Sound):T()};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:On,comment:o("study.문장을 듣고 알맞은 카드를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(it,{step:i,quizType:On,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:Y}),e.jsx("div",{className:`${Dt.comment} animate__animated animate__fadeInLeft`,children:On}),e.jsxs(Te,{children:[hs?e.jsx(ee,{height:0}):e.jsx(ee,{height:15}),e.jsx(vh,{playState:V,question:c.Quiz[x-1].Question.Text,onPlay:F}),hs?e.jsx(ee,{height:10}):e.jsx(ee,{height:15}),e.jsx(Be,{typeCSS:Dt.readingComprehension1,containerCSS:Dt.container,children:z.map((E,A)=>e.jsx(kh,{index:A+1,img:E.Image,text:E.Text,correctText:c.Quiz[x-1].Question.Text,checkAnswer:I,onAnimationEndHandler:U}))}),hs?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:On,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:Y,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const zh=new N(navigator.userAgent),uo=zh.phone(),Wo=uo?at:rt;function $h({src:t}){return e.jsx("div",{className:Wo.questionBox,children:e.jsx("div",{className:Wo.wordImage,children:e.jsx("img",{src:t,width:uo?"auto":"100%",height:uo?"100%":"auto"})})})}const Ch=new N(navigator.userAgent),Qh=Ch.phone(),Go=Qh?at:rt;function Ah({multiPlayState:t,sentence:o,index:n,playSentence:s}){return e.jsxs("div",{className:Go.wordPlayButton2,onClick:i=>{s(i,n)},children:[t.playState==="playing"&&t.seq===n?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:Go.txtL,children:o})]})}const Nh=new N(navigator.userAgent),Th=Nh.phone(),Dn=Th?at:rt;function Ih({multiPlayState:t,sentence:o,correctSentence:n,index:s,playSentence:i,checkAnswer:u,onAnimationEndHandler:d}){const{bookInfo:a,studyInfo:h}=r.useContext(se),_=r.useRef(null),v=()=>{u(_,s)};return e.jsxs("div",{ref:_,className:`${Dn.textCard} ${h.mode==="review"&&Number(a.Average)>=70&&n===o?Dn.correct:""}`,onAnimationEnd:y=>d(y),children:[e.jsx("div",{className:Dn.cardNumber,children:Number(s+1)}),e.jsx(Ah,{multiPlayState:t,sentence:o,index:s,playSentence:i}),e.jsx("span",{className:Dn.enterButton,onClick:()=>v(),children:e.jsx("span",{children:e.jsx(ys,{width:15,height:15})})})]})}const Eh=new N(navigator.userAgent),Bh=Eh.phone(),Ph=Bh?at:rt;function Mh({multiPlayState:t,correctSentence:o,exampleData:n,playSentence:s,checkAnswer:i,onAnimationEndHandler:u}){return e.jsx("div",{className:Ph.answers,children:n.map((d,a)=>e.jsx(Ih,{multiPlayState:t,sentence:d.Text,correctSentence:o,index:a,playSentence:s,checkAnswer:i,onAnimationEndHandler:u}))})}const Lh=new N(navigator.userAgent),lo=Lh.phone(),Vn="Reading Comprehension",Vt=lo?at:rt;function Rh(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(S1,t,i),[x,p]=r.useState([]),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState(1),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playAudio:V,stopAudio:q}=Le(),[T,I]=r.useState({playState:"",seq:-1});if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),m.current=!1)},[_]),r.useEffect(()=>{if(q(),T.seq>-1){const A=()=>{I({playState:"",seq:-1})};V(x[T.seq].Sound,A)}},[T]),r.useEffect(()=>{if(c){const[A,Q]=ut(s.mode,l,c.QuizAnswerCount);j(Q),R(Q),s.mode==="staff"?p(c.Quiz[A-1].Examples):p(ge.shuffle(c.Quiz[A-1].Examples)),w(l,c.QuizAnswerCount),P(A)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),s.mode==="staff"?p(c.Quiz[z-1].Examples):p(ge.shuffle(c.Quiz[z-1].Examples)),m.current=!1)},[z]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const G=async(A,Q)=>{try{if(!m.current){m.current=!0,q(),I({playState:"",seq:-1});const L=c.Quiz[z-1].Question.Text===x[Q].Text,X={quizNo:z,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:L},te=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[z-1].QuizId,quizNo:c.Quiz[z-1].QuizNo,currentQuizNo:z,correct:c.Quiz[z-1].Question.Text,selectedAnswer:x[Q].Text,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:L,answerData:X,isFinishStudy:t.lastStep===i});u.stop();const oe=await Ie(s.mode,te);Number(oe.result)===0&&(oe.resultMessage&&(n.finishStudy={id:Number(oe.result),cause:oe.resultMessage}),L||R(B+1),j(C+1),S(X),U(A,L))}}catch{}},U=(A,Q)=>{W({isActive:!0,isCorrect:Q}),A.current&&(Q?d.play(A.current,[Vt.correct,"animate__fadeIn"]):d.play(A.current,[Vt.incorrect,"animate__headShake"]))},Y=A=>{const Q=A.currentTarget;setTimeout(()=>{d.remove(Q,[Vt.correct,Vt.incorrect,"animate__fadeIn","animate__headShake"]),W({isActive:!1,isCorrect:!1}),j(0),R(0),z+1>c.Quiz.length?g(!0):P(z+1)},1e3)},F=(A,Q)=>{T.playState===""&&Q>-1?I({playState:"playing",seq:Q}):T.playState==="playing"&&T.seq===Q?I({playState:"",seq:-1}):T.playState==="playing"&&T.seq!==Q&&I({playState:"playing",seq:Q})},E=A=>{k(A)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Vn,comment:o("study.그림을 보고 알맞은 문장을 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:Vn,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:z,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:E}),e.jsx("div",{className:`${Vt.comment} animate__animated animate__fadeInLeft`,children:Vn}),e.jsxs(Te,{children:[lo?e.jsx(ee,{height:0}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Vt.readingComprehension2,containerCSS:Vt.container,children:[e.jsx($h,{src:c.Quiz[z-1].Question.Image}),e.jsx(ee,{height:15}),e.jsx(Mh,{multiPlayState:T,correctSentence:c.Quiz[z-1].Question.Text,exampleData:x,playSentence:F,checkAnswer:G,onAnimationEndHandler:Y})]}),lo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:Vn,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:E,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const Fh=new N(navigator.userAgent),mo=Fh.phone(),qh=mo?at:rt;function Hh({src:t}){return e.jsx("div",{className:qh.questionImage,children:e.jsx("img",{src:t,width:mo?"auto":"100%",height:mo?"100%":"auto"})})}const Oh=new N(navigator.userAgent),Dh=Oh.phone(),Ko=Dh?at:rt;function Vh({multiPlayState:t,sentence:o,index:n,playSentence:s}){return e.jsxs("div",{className:Ko.wordPlayButton2,onClick:i=>{s(n)},children:[t.playState==="playing"&&t.seq===n?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:Ko.txtL,children:o})]})}const Wh=new N(navigator.userAgent),Gh=Wh.phone(),Wn=Gh?at:rt;function Kh({index:t,multiPlayState:o,correctText:n,sentence:s,playSentence:i,checkAnswer:u,onAnimationEndHandler:d}){const{bookInfo:a,studyInfo:h}=r.useContext(se),_=r.useRef(null),v=()=>{u(_,t)};return e.jsxs("div",{ref:_,className:`${Wn.textCard} 
      ${h.mode==="review"&&Number(a.Average)>=70&&s===n?Wn.correct:""}`,onAnimationEnd:y=>d(y),children:[e.jsx("div",{className:Wn.cardNumber,children:Number(t+1)}),e.jsx(Vh,{multiPlayState:o,sentence:s,index:t,playSentence:i}),e.jsx("span",{className:Wn.enterButton,onClick:()=>v(),children:e.jsx("span",{children:e.jsx(ys,{width:15,height:15})})})]})}function Uh({multiPlayState:t,correctText:o,exampleData:n,playSentence:s,checkAnswer:i,onAnimationEndHandler:u}){return e.jsx(e.Fragment,{children:n.map((d,a)=>e.jsx(Kh,{index:a,multiPlayState:t,correctText:o,sentence:d.Text,playSentence:s,checkAnswer:i,onAnimationEndHandler:u}))})}const Jh=new N(navigator.userAgent),xo=Jh.phone(),Uo=xo?at:rt;function Yh({multiPlayState:t,question:o,correctText:n,exampleData:s,playSentence:i,checkAnswer:u,onAnimationEndHandler:d}){return e.jsxs("div",{className:Uo.answers,children:[xo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:10}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Uo.questionText,children:o}),xo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:10})]}),e.jsx(Uh,{multiPlayState:t,correctText:n,exampleData:s,playSentence:i,checkAnswer:u,onAnimationEndHandler:d})]})}const Xh=new N(navigator.userAgent),ho=Xh.phone(),Gn="Reading Comprehension",Wt=ho?at:rt;function Zh(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(j1,t,i),[x,p]=r.useState([]),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState(1),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playAudio:V,stopAudio:q}=Le(),[T,I]=r.useState({playState:"",seq:-1});if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),F(4),m.current=!1)},[_]),r.useEffect(()=>{if(q(),T.seq>-1){const A=()=>{I({playState:"",seq:-1})};T.seq===4?c&&V(c==null?void 0:c.Quiz[z-1].Question.Sound,A):V(x[T.seq].Sound,A)}},[T]),r.useEffect(()=>{if(c){const[A,Q]=ut(s.mode,l,c.QuizAnswerCount);j(Q),R(Q),s.mode==="staff"?p(c.Quiz[A-1].Examples):p(ge.shuffle(c.Quiz[A-1].Examples)),w(l,c.QuizAnswerCount),P(A)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),F(4),j(0),R(0),s.mode==="staff"?p(c.Quiz[z-1].Examples):p(ge.shuffle(c.Quiz[z-1].Examples)),m.current=!1)},[z]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const G=async(A,Q)=>{try{if(!m.current){m.current=!0,q(),I({playState:"",seq:-1});const L=c.Quiz[z-1].Examples[0].Text===x[Q].Text,X={quizNo:z,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:L},te=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[z-1].QuizId,quizNo:c.Quiz[z-1].QuizNo,currentQuizNo:z,correct:c.Quiz[z-1].Examples[0].Text,selectedAnswer:x[Q].Text,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:L,answerData:X,isFinishStudy:t.lastStep===i});u.stop();const oe=await Ie(s.mode,te);Number(oe.result)===0&&(oe.resultMessage&&(n.finishStudy={id:Number(oe.result),cause:oe.resultMessage}),L||R(B+1),j(C+1),S(X),U(A,L))}}catch{}},U=(A,Q)=>{u.stop(),W({isActive:!0,isCorrect:Q}),A.current&&(Q?d.play(A.current,[Wt.correct,"animate__fadeIn"]):d.play(A.current,[Wt.incorrect,"animate__headShake"]))},Y=A=>{const Q=A.currentTarget,L=!!d.isContain(Q,"animate__fadeIn");setTimeout(()=>{d.remove(Q,[Wt.correct,Wt.incorrect,"animate__fadeIn","animate__headShake"]),W({isActive:!1,isCorrect:!1}),L||C>=c.QuizAnswerCount?z+1>c.Quiz.length?g(!0):P(z+1):(u.setup(c.QuizTime,!0),m.current=!1)},1e3)},F=A=>{T.playState===""&&A>-1?I({playState:"playing",seq:A}):T.playState==="playing"&&T.seq===A?I({playState:"",seq:-1}):T.playState==="playing"&&T.seq!==A&&I({playState:"playing",seq:A})},E=A=>{k(A)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Gn,comment:o("study.그림과 질문을 보고 알맞은 대답을 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:Gn,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:z,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:E}),e.jsx("div",{className:`${Wt.comment} animate__animated animate__fadeInLeft`,children:Gn}),e.jsxs(Te,{children:[ho?e.jsx(ee,{height:0}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Wt.readingComprehension3,containerCSS:Wt.container,children:[e.jsx(Hh,{src:c.Quiz[z-1].Question.Image}),e.jsx(Yh,{multiPlayState:T,question:c.Quiz[z-1].Question.Text,correctText:c.Quiz[z-1].Examples[0].Text,exampleData:x,playSentence:F,checkAnswer:G,onAnimationEndHandler:Y})]}),ho?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:Gn,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:E,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const e_=new N(navigator.userAgent),t_=e_.phone(),n_=t_?at:rt;function s_({question:t}){return e.jsx("div",{className:n_.questionText,dangerouslySetInnerHTML:{__html:t}})}const o_=new N(navigator.userAgent),i_=o_.phone(),Kn=i_?at:rt;function r_({correctText:t,exampleData:o,index:n,checkAnswer:s}){const{bookInfo:i,studyInfo:u}=r.useContext(se);return e.jsxs("div",{className:`${Kn.textCard} ${u.mode==="review"&&Number(i.Average)>=70&&o.Text===t?Kn.correct:""}`,onClick:d=>s(o.Text,d.currentTarget),children:[e.jsx("div",{className:Kn.cardNumber,children:Number(n+1)}),e.jsx("div",{className:Kn.awnserText,dangerouslySetInnerHTML:{__html:o.Text}})]})}function a_({correctText:t,exampleData:o,checkAnswer:n}){return e.jsx(e.Fragment,{children:o.map((s,i)=>e.jsx(r_,{correctText:t,exampleData:s,index:i,checkAnswer:n},`e-0${i}`))})}const c_=new N(navigator.userAgent),_o=c_.phone(),u_=_o?at:rt;function l_({isHideQuestion:t,question:o,correctText:n,exampleData:s,checkAnswer:i}){return e.jsxs("div",{className:u_.answers,children:[_o?e.jsx(ee,{height:5}):e.jsx(ee,{height:10}),!t&&e.jsx(s_,{question:o}),_o?e.jsx(ee,{height:0}):e.jsx(ee,{height:10}),e.jsx(a_,{correctText:n,exampleData:s,checkAnswer:i})]})}const d_=new N(navigator.userAgent),m_=d_.phone(),kt=m_?zt:jt;function x_({index:t,question:o,correctAnswer:n,selectedAnswer:s}){return e.jsxs("div",{className:kt.quizQuestion,children:[e.jsxs("div",{className:kt.questionSentence,children:[e.jsxs("span",{className:kt.questionNum,children:[Number(t+1),". "]}),e.jsx("span",{className:kt.questionText,children:o})]}),e.jsx("div",{className:kt.answers,children:e.jsxs("div",{className:kt.quizAnswer,children:[e.jsxs("div",{className:kt.answers,children:[e.jsx("span",{className:kt.correctIcon}),e.jsx("span",{className:kt.correctAnswer,children:n})]}),s!==""&&!Number(s)&&e.jsxs("div",{className:kt.answers,children:[e.jsx("span",{className:kt.incorrectIcon}),e.jsx("div",{className:kt.wrongAnswer,children:s===""?"":s})]})]})})]})}const h_=new N(navigator.userAgent),__=h_.phone(),Jo=__?zt:jt;function p_({quizData:t,failedExample:o}){return e.jsxs("div",{className:Jo.wrongAnswers,children:[o.length!=0&&e.jsx("div",{className:Jo.title,children:"Wrong Answers"}),o.map((n,s)=>e.jsx(x_,{index:s,question:t.Quiz[n.CurrentQuizNo-1].Question.Text,correctAnswer:t.Quiz[n.CurrentQuizNo-1].Examples[0].Text,selectedAnswer:n.StudentAnswer}))]})}const g_=new N(navigator.userAgent),y_=g_.phone(),Ge=y_?zt:jt;function f_({isReTest:t,isReTestFail:o,step:n,quizType:s,quizAnswerCount:i,studentAnswer:u,quizData:d,failedExample:a,passMark:h,doReTest:_,onFinishActivity:v}){const y=en();let g=0,b=0,k=0;const m=100/u.length;return u.map(c=>{if(c.ox)switch(b++,c.answerCount){case 1:g+=1*m;break;case 2:g+=.5*m;break;case 3:g+=.25*m;break}else c.answerCount===i&&k++}),e.jsxs("div",{className:Ge.testResult,children:[e.jsxs("div",{className:Ge.quizType,children:["Step ",n,". ",s]}),e.jsxs("div",{className:Ge.totalScoreContainer,children:[e.jsx("div",{className:Ge.txtL,children:"SCORE: "}),e.jsx("div",{className:`${Ge.totalScore} ${Ge.heartbeat}`,children:Math.round(g)})]}),e.jsxs("div",{className:Ge.container,children:[e.jsx("div",{className:`${Ge.readingUnit} animate__animated animate__jackInTheBox`,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${y}_10.png`,alt:""})}),e.jsxs("div",{className:Ge.passmark,children:["Passmark: ",h]}),e.jsxs("div",{className:`${Ge.board1} animate__animated animate__fadeIn`,children:[e.jsxs("div",{className:Ge.correctScore,children:[e.jsx("div",{className:Ge.title,children:"correct"}),e.jsx("div",{className:Ge.number,children:b})]}),e.jsxs("div",{className:Ge.incorrectScore,children:[e.jsx("div",{className:Ge.title,children:"incorrect"}),e.jsx("div",{className:Ge.number,children:k})]})]}),e.jsx("div",{className:Ge.board2,children:t?e.jsx(Pi,{quizAnswerCount:i,studentAnswer:u}):e.jsx(p_,{quizData:d,failedExample:a})}),e.jsx(ee,{height:50})]}),t?o?e.jsx("div",{className:Ge.nextButton,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:"OK"}):e.jsx("div",{className:Ge.nextButton,onClick:()=>_(),children:"Re-Test"}):e.jsx("div",{className:Ge.nextButton,onClick:()=>v(),children:"Next"})]})}const b_=new N(navigator.userAgent),v_=b_.phone(),Yo=v_?at:rt;function w_({playState:t,playSentence:o}){return e.jsxs("div",{className:Yo.wordPlayButton,onClick:()=>o(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:34,height:34}):e.jsx(Fe,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Yo.txtL,children:"Listen"})]})}const k_=new N(navigator.userAgent),po=k_.phone(),Un="Reading Comprehension",Gt=po?at:rt;function S_(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=s.isReTest||t.isReTestYn?"R":t.currentStep,d=lt(),a=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?X(""):window.onLogoutStudy()}),[h,_]=r.useState("animate__bounceInRight"),{isStepIntro:v,closeStepIntro:y}=ze(),{isResultShow:g,changeResultShow:b}=Re(),[k,m]=r.useState(!1),c=r.useRef(!1),[l,x]=Ce(z1,t,u,t.isReTestYn),[p,f]=r.useState([...x]),{scoreBoardData:w,setStudentAnswers:S,addStudentAnswer:M,makeUserAnswerData:z,resetStudentAnswer:P,getScore:C}=Qe(i.mode),[j,B]=r.useState(1),[R,O]=r.useState([]),[W,V]=r.useState(0),[q,T]=r.useState(0),{bottomPopupState:I,changeBottomPopupState:G}=Xe(),[U,Y]=r.useState(!1),[F,E]=r.useState(!1),{playState:A,playAudio:Q,stopAudio:L}=Le();if(r.useEffect(()=>{if(!v&&l)if(i.availableQuizStatus===1){alert("Re Test는 하루에 한번만 시도할 수 있습니다. 내일 다시 시도해주세요.");try{window.onExitStudy()}catch{location.replace("/")}}else i.availableQuizStatus===0&&(a.setup(l.QuizTime,!0),(i.bookType==="PB"||n.BookLevel.includes("1"))&&xe(),c.current=!1)},[v]),r.useEffect(()=>{if(l){l.Quiz.sort((D,Z)=>Number(D.QuizNo)-Number(Z.QuizNo));const[re,H]=ut(i.mode,x,l.QuizAnswerCount),J=x.filter(D=>D.OX==="2");Y(l.IsModeRetest||t.isReTestYn?!0:s.isReTest),f([...J]),V(H),T(H),i.mode==="staff"?O(l.Quiz[re-1].Examples):O(ge.shuffle(l.Quiz[re-1].Examples)),S(x,l.QuizAnswerCount),B(re)}},[l]),r.useEffect(()=>{!v&&!g&&l&&(i.mode==="staff"?O(l.Quiz[j-1].Examples):O(ge.shuffle(l.Quiz[j-1].Examples)),T(0),V(0),(i.bookType==="PB"||n.BookLevel.includes("1"))&&xe(),c.current=!1,a.setup(l.QuizTime,!0))},[j]),!l)return e.jsx(e.Fragment,{children:"Loading..."});const X=async(re="",H)=>{try{if(!c.current){a.stop(),c.current=!0;const J=l.Quiz[j-1].Examples[0].Text,D=J===re,Z={quizNo:j,maxCount:l.QuizAnswerCount,answerCount:W+1,ox:D},K=U||t.isReTestYn||l.IsModeRetest?"R":t.currentStep,ie=z({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:K,quizId:l.Quiz[j-1].QuizId,quizNo:l.Quiz[j-1].QuizNo,currentQuizNo:j,correct:J,selectedAnswer:re,tryCount:W+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:D,answerData:Z,isFinishStudy:t.lastStep===u});let me=0;j+1>Object.keys(l.Quiz).length&&(me=C(Z,Object.keys(l.Quiz).length,l.QuizAnswerCount));const ve=await Ie(i.mode,ie);if(Number(ve.result)===0)if(ve.resultMessage&&(s.finishStudy={id:Number(ve.result),cause:ve.resultMessage}),M(Z),!H||re===""){G({isActive:!0,isCorrect:!1});const _e={QuizId:l.Quiz[j-1].QuizId,QuizNo:l.Quiz[j-1].QuizNo,CurrentQuizNo:j,OX:"2",TempText:"",PenaltyWord:"",Correct:J,StudentAnswer:"",AnswerCount:W};i.mode==="student"&&f([...p,_e]),te(me,void 0)}else{if(D)H&&d.play(H,["animate__fadeIn",Gt.correct]);else{H&&d.play(H,["animate__headShake",Gt.incorrect]);const _e={QuizId:l.Quiz[j-1].QuizId,QuizNo:l.Quiz[j-1].QuizNo,CurrentQuizNo:j,OX:"2",TempText:"",PenaltyWord:"",Correct:J,StudentAnswer:re,AnswerCount:W};i.mode==="student"&&f([...p,_e]),T(q+1)}G({isActive:!0,isCorrect:D}),V(W+1),te(me,H)}}}catch(J){console.error(J)}},te=(re,H)=>{setTimeout(()=>{G({isActive:!1,isCorrect:!1}),H&&d.remove(H,["animate__headShake","animate__fadeIn",Gt.correct,Gt.incorrect]),j+1>Object.keys(l.Quiz).length?re<l.PassMark&&i.mode==="student"?t.isReTestYn||U||l.IsModeRetest||t.isReTestYn||U||l.IsModeRetest?(E(!0),b(!0)):(s.changeReTest(!0),Y(!0),b(!0)):(Y(!1),ce()):(L(),B(j+1))},2e3)},oe=()=>{f([]),P(),B(1),b(!1)},ce=()=>{b(!0)},ae=re=>{m(re)},xe=()=>{if(A===""){const re=l.Quiz[j-1].Question.Sound||"";Q(re)}else L()};return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`animate__animated ${h}`,onAnimationEnd:()=>{h==="animate__bounceOutLeft"&&y()},children:e.jsx(Me,{step:u,quizType:Un,comment:o("study.질문을 보고 알맞은 대답을 고르세요."),onStepIntroClozeHandler:()=>{_("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:g?e.jsx(e.Fragment,{children:e.jsx(f_,{isReTest:U,isReTestFail:F,step:t.currentStep,quizType:Un,quizAnswerCount:l.QuizAnswerCount,studentAnswer:w,quizData:l,failedExample:p,passMark:l.PassMark,doReTest:oe,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:j,totalQuizCnt:Object.keys(l.Quiz).length,life:l.QuizAnswerCount-q,timeMin:a.time.timeMin,timeSec:a.time.timeSec,changeSideMenu:ae}),e.jsx("div",{className:`${Gt.comment} animate__animated animate__fadeInLeft`,children:t.isReTestYn||U||l.IsModeRetest?"Re-Test":Un}),e.jsxs(Te,{children:[po?e.jsx(ee,{height:0}):e.jsx(ee,{height:15}),n.BookCode.includes("PB")&&Number(n.BookLevel.substring(0,1))>3?e.jsx(w_,{playState:A,playSentence:xe}):e.jsx(e.Fragment,{}),e.jsx(Be,{typeCSS:Gt.readingComprehension4,containerCSS:Gt.container,children:e.jsx(l_,{isHideQuestion:l.IsHideQuestionText,question:l.Quiz[j-1].Question.Text,correctText:l.Quiz[j-1].Examples[0].Text,exampleData:R,checkAnswer:X})}),po?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),k&&e.jsx(Ne,{isSideOpen:k,currentStep:u,currentStepType:Un,quizLength:l.Quiz.length,maxAnswerCount:l.QuizAnswerCount,changeSideMenu:ae,scoreBoardData:w,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:I})]})})})}async function j_(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/summary-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),IsEnablePenaltyReview:!!a.IsEnablePenaltyReview,Hint:{IsEnabled:a.Hint.IsEnabled,Max:a.Hint.Max,Try:a.Hint.Try},Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound}}))}))}async function z_(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/summary-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Sentence:{Texts:a.Sentence.Texts,Sounds:a.Sentence.Sounds},Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}async function $_(t,o,n,s){const i=`${Ci}/Summary?studentHistoryId=${o}&studyId=${t}&quizNo=${n}&step=${s}`;return $i(i,async d=>({Type:d.Type,Hint:d.Hint,TryHint:d.TryHint,ErrorNo:d.ErrorNo}))}const C_="_comment_y6l53_1",Q_="_wordPlayButton_y6l53_20",A_="_txtL_y6l53_35",N_="_cardNumber_y6l53_46",T_="_hintButton_y6l53_61",I_="_testReview_y6l53_83",E_="_title_y6l53_83",B_="_container_y6l53_88",P_="_sentence_y6l53_97",M_="_nextButton_y6l53_106",L_="_deactNextButton_y6l53_128",R_="_reviewAnswer_y6l53_149",F_="_currentOrder_y6l53_159",q_="_blink_y6l53_1",H_="_correctAnswer_y6l53_171",O_="_incorrectAnswer_y6l53_182",D_="_currentInput_y6l53_201",V_="_otherInput_y6l53_202",W_="_enterButton_y6l53_209",G_="_hintText_y6l53_235",K_="_btnNext_y6l53_244",U_="_iconArrowUp_y6l53_267",J_="_summaryTest1_y6l53_281",Y_="_textCard_y6l53_288",X_="_correct_y6l53_171",Z_="_incorrect_y6l53_182",ep="_awnserText_y6l53_333",tp="_answers_y6l53_338",np="_correctTextCard_y6l53_342",sp="_question_y6l53_346",op="_questionMark_y6l53_352",ip="_playIcon_y6l53_387",rp="_highlight_y6l53_400",ap="_correctOrders_y6l53_439",cp="_stepEnd_y6l53_460",up="_correctDirection_y6l53_471",lp="_summaryTest2_y6l53_490",dp="_questionBox_y6l53_568",mp="_answerBox_y6l53_593",xp="_word_y6l53_20",hp="_blink1_y6l53_1",Ke={comment:C_,wordPlayButton:Q_,txtL:A_,cardNumber:N_,hintButton:T_,testReview:I_,title:E_,container:B_,sentence:P_,nextButton:M_,deactNextButton:L_,reviewAnswer:R_,currentOrder:F_,blink:q_,correctAnswer:H_,incorrectAnswer:O_,currentInput:D_,otherInput:V_,enterButton:W_,hintText:G_,btnNext:K_,iconArrowUp:U_,summaryTest1:J_,textCard:Y_,correct:X_,incorrect:Z_,awnserText:ep,answers:tp,correctTextCard:np,question:sp,questionMark:op,playIcon:ip,highlight:rp,correctOrders:ap,stepEnd:cp,correctDirection:up,summaryTest2:lp,questionBox:dp,answerBox:mp,word:xp,blink1:hp},_p="_comment_10q2d_1",pp="_wordPlayButton_10q2d_15",gp="_txtL_10q2d_30",yp="_cardNumber_10q2d_41",fp="_hintButton_10q2d_55",bp="_testReview_10q2d_77",vp="_title_10q2d_77",wp="_container_10q2d_82",kp="_sentence_10q2d_91",Sp="_nextButton_10q2d_99",jp="_deactNextButton_10q2d_121",zp="_reviewAnswer_10q2d_142",$p="_currentOrder_10q2d_152",Cp="_blink_10q2d_1",Qp="_correctAnswer_10q2d_164",Ap="_incorrectAnswer_10q2d_175",Np="_currentInput_10q2d_194",Tp="_otherInput_10q2d_195",Ip="_enterButton_10q2d_202",Ep="_hintText_10q2d_228",Bp="_btnNext_10q2d_237",Pp="_iconArrowUp_10q2d_260",Mp="_summaryTest1_10q2d_274",Lp="_textCard_10q2d_282",Rp="_correct_10q2d_164",Fp="_incorrect_10q2d_175",qp="_awnserText_10q2d_327",Hp="_answers_10q2d_332",Op="_correctTextCard_10q2d_336",Dp="_question_10q2d_340",Vp="_questionMark_10q2d_349",Wp="_playIcon_10q2d_384",Gp="_highlight_10q2d_397",Kp="_correctOrders_10q2d_438",Up="_correctDirection_10q2d_465",Jp="_summaryTest2_10q2d_471",Yp="_questionBox_10q2d_540",Xp="_answerBox_10q2d_571",Zp="_blink1_10q2d_1",Ue={comment:_p,wordPlayButton:pp,txtL:gp,cardNumber:yp,hintButton:fp,testReview:bp,title:vp,container:wp,sentence:kp,nextButton:Sp,deactNextButton:jp,reviewAnswer:zp,currentOrder:$p,blink:Cp,correctAnswer:Qp,incorrectAnswer:Ap,currentInput:Np,otherInput:Tp,enterButton:Ip,hintText:Ep,btnNext:Bp,iconArrowUp:Pp,summaryTest1:Mp,textCard:Lp,correct:Rp,incorrect:Fp,awnserText:qp,answers:Hp,correctTextCard:Op,question:Dp,questionMark:Vp,playIcon:Wp,highlight:Gp,correctOrders:Kp,correctDirection:Up,summaryTest2:Jp,questionBox:Yp,answerBox:Xp,blink1:Zp},eg=()=>({exampleManager:{getExamplesByQuizNo:(o,n,s="student")=>{const i=ge.filter(o,(u,d)=>d>=n-1);return s==="student"?ge.shuffle(i):i}}}),tg=new N(navigator.userAgent),ng=tg.phone(),$s=ng?Ue:Ke;function sg(){return e.jsx("div",{className:`${$s.correctTextCard} ${$s.question}`,children:e.jsx("div",{className:$s.questionMark,children:"Choose the sentences in the correct order."})})}const og=new N(navigator.userAgent),ig=og.phone(),Kt=ig?Ue:Ke;function rg({multiPlayState:t,index:o,sentenceData:n,selectedData:s,playSentence:i}){return e.jsx("div",{className:`${Kt.correctTextCard}`,children:s.ox?e.jsx(e.Fragment,{children:e.jsxs("div",{className:Kt.correctAnswer,children:[e.jsx("span",{className:Kt.playIcon}),e.jsx("span",{onClick:()=>i(o),className:`${t.playState==="playing"&&t.seq===o?Kt.highlight:""}`,dangerouslySetInnerHTML:{__html:n.Question.Text}})]})}):e.jsx(e.Fragment,{children:s.answerCount===s.maxCount?e.jsxs("div",{className:Kt.incorrectAnswer,children:[e.jsx("span",{className:Kt.playIcon}),e.jsx("span",{onClick:()=>i(o),className:`sentence ${t.playState==="playing"&&t.seq===o?Kt.highlight:""}`,dangerouslySetInnerHTML:{__html:n.Question.Text}})]}):e.jsx(e.Fragment,{})})})}const ag=new N(navigator.userAgent),cg=ag.phone(),Xo=cg?Ue:Ke;function ug({isStepEnd:t,multiPlayState:o,sentenceData:n,selectedData:s,playSentence:i}){const{studyInfo:u}=r.useContext(se),d=r.useRef(null);return r.useEffect(()=>{d.current&&u.mode==="student"&&d.current.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})},[s]),e.jsxs("div",{ref:d,className:`${Xo.correctOrders} ${t&&Xo.stepEnd}`,children:[n.map((a,h)=>s[h]?e.jsx(rg,{multiPlayState:o,index:h,sentenceData:a,selectedData:s[h],playSentence:i},`$ss-0${h}`):e.jsx(e.Fragment,{})),!s[0]&&e.jsx(sg,{})]})}const lg=new N(navigator.userAgent),dg=lg.phone(),Zo=dg?Ue:Ke;function mg(){return e.jsx("div",{className:Zo.correctDirection,children:e.jsx("div",{className:Zo.iconArrowUp})})}const xg=new N(navigator.userAgent),hg=xg.phone(),Cs=hg?Ue:Ke;function _g({index:t,exampleData:o,checkAnswer:n,onAnimationEnd:s}){return e.jsxs("div",{className:`${Cs.textCard}`,onClick:i=>n(i.currentTarget,o.Question.Text),onAnimationEnd:i=>s(i.currentTarget),children:[e.jsx("div",{className:Cs.cardNumber,children:Number(t+1)}),e.jsx("div",{className:Cs.awnserText,dangerouslySetInnerHTML:{__html:o.Question.Text}})]})}const pg=new N(navigator.userAgent),gg=pg.phone(),yg=gg?Ue:Ke;function fg({exampleData:t,checkAnswer:o,onAnimationEnd:n}){return e.jsx("div",{className:yg.answers,children:t.map((s,i)=>e.jsx(_g,{index:i,exampleData:s,checkAnswer:o,onAnimationEnd:n},`e-0${i}`))})}const bg=new N(navigator.userAgent),vg=bg.phone(),wg=vg?Ue:Ke;function kg({tryCnt:t=0,maxCnt:o=0,onClickHint:n}){return e.jsxs("div",{className:wg.hintButton,onClick:()=>n(),children:["Chance ",o-t," / ",o]})}const Sg=new N(navigator.userAgent),jg=Sg.phone(),ei=jg?Ue:Ke;function zg({multiPlayState:t,playAll:o}){return e.jsxs("div",{className:ei.wordPlayButton,onClick:()=>o(),children:[t.playState==="playing"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ei.txtL,children:"Play Sound"})]})}const $g=new N(navigator.userAgent),Cg=$g.phone(),Qg=Cg?Ue:Ke;function Ag({goNext:t}){return e.jsx("div",{onClick:()=>t(),className:`${Qg.btnNext} animate__animated animate__flash`,children:"Next"})}const Ng=new N(navigator.userAgent),Tg=Ng.phone(),Tt=Tg?Ue:Ke;function Ig({inputRefs:t,word:o,inputIndex:n,currentInputIndex:s,changeInputIndex:i}){const[u,d]=r.useState(""),[a,h]=r.useState(0),[_,v]=r.useState(0),y=r.useRef(null),g=r.useRef(null);r.useEffect(()=>{y.current&&y.current.offsetWidth>0&&h(y.current.offsetWidth),g.current&&g.current.offsetWidth>0&&v(g.current.offsetWidth)}),r.useEffect(()=>{if(s===n){const k=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/,m=o.substring(0,1);k.test(m)&&d(m)}},[s]);const b=k=>{k.preventDefault();let m=k.currentTarget.value;const c=o.substring(0,m.length)===m&&o.substring(0,m.length).length<o.length;if(m===o)d(m),i(s+1);else{const l=/^[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]+/,x=o.replace(m,"");if(c)if(l.test(x)&&m!==""){const p=x.match(l);m+p===o?(d(o),i(s+1)):d(m+p)}else d(m);else d(m)}};return e.jsxs(e.Fragment,{children:[n>s&&e.jsxs("span",{className:`${Tt.reviewAnswer}`,children:[e.jsx("span",{className:Tt.otherInput,children:e.jsx("input",{ref:k=>t.current[n]=k,style:{width:`${a+4}px`},disabled:!0})}),e.jsx("div",{ref:y,className:Tt.hintText,children:o})]}),n===s&&e.jsxs("span",{className:`${Tt.reviewAnswer} ${Tt.currentOrder}`,children:[e.jsx("span",{className:Tt.currentInput,children:e.jsx("input",{ref:k=>t.current[n]=k,type:"text",style:{width:`${_+4}px`},value:u,onChange:k=>b(k),onCopy:k=>k.preventDefault(),onPaste:k=>k.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",tabIndex:-1})}),e.jsx("div",{ref:g,className:Tt.hintText,children:o})]}),n<s&&e.jsx("span",{className:`${Tt.reviewAnswer} ${Tt.correctAnswer}`,children:o})]})}const Eg=new N(navigator.userAgent),Bg=Eg.phone(),rn=Bg?Ue:Ke;function Pg({isSideOpen:t,correctSentence:o,changePenaltyState:n}){const s=r.useRef([]),[i,u]=r.useState(0),[d,a]=r.useState(!1),h=/<[^>]*>/gi;r.useEffect(()=>{const y=()=>{s.current[i]&&(s.current[i].focus(),t&&s.current[i].blur())};return y(),window.addEventListener("click",y),()=>{window.removeEventListener("click",y)}},[i,t]);const _=y=>{y>=s.current.length?(u(y),v()):u(y)},v=()=>{a(!0)};return e.jsxs("div",{className:`${rn.testReview}`,children:[e.jsx("div",{className:rn.title,children:"Test Review"}),e.jsx("div",{className:rn.container,children:e.jsx("div",{className:rn.sentence,children:o.replace(h,"").split(" ").map((y,g)=>e.jsx(Ig,{inputRefs:s,inputIndex:g,currentInputIndex:i,word:y,changeInputIndex:_}))})}),e.jsx(ee,{height:10}),e.jsx("div",{className:`${d?rn.nextButton:rn.deactNextButton} ${d&&"animate__animated animate__bounce"}`,onClick:()=>{d&&n("none")},children:"Next"})]})}const Mg=new N(navigator.userAgent),Lg=Mg.phone(),Jn="Summary Test",Ut=Lg?Ue:Ke;function Rg(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=t.currentStep,d=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?n.BookCode.includes("EB")?n.BookLevel.includes("1")||n.BookLevel.includes("K")?window.onLogoutStudy():D():n.BookCode.includes("PB")&&D():window.onLogoutStudy()}),a=lt(),[h,_]=r.useState("animate__bounceInRight"),{isStepIntro:v,closeStepIntro:y}=ze(),{isResultShow:g,changeResultShow:b}=Re(),[k,m]=r.useState(!1),c=r.useRef(!0),[l,x]=Ce(j_,t,u),[p,f]=r.useState(1),[w,S]=r.useState(0),[M,z]=r.useState(0),[P,C]=r.useState({penaltyState:"none",sentence:""}),{bottomPopupState:j,changeBottomPopupState:B}=Xe(),{scoreBoardData:R,setStudentAnswers:O,setStudentAnswersSummary1ReviewFail:W,addStudentAnswer:V,makeUserAnswerData:q,convertRecordToScoreBoard:T}=Qe(i.mode),{exampleManager:I}=eg(),[G,U]=r.useState([]),[Y,F]=r.useState([]),{playAudio:E,stopAudio:A}=Le(),[Q,L]=r.useState({playState:"",seq:-1,playType:""}),[X,te]=r.useState({IsEnabled:!1,Max:0,Try:0}),[oe,ce]=r.useState(!1),[ae,xe]=r.useState(!1);if(r.useEffect(()=>{!v&&l&&(i.mode==="review"&&Number(n.Average)>=70?xe(!0):(P.penaltyState==="none"&&d.setup(l.QuizTime,!0),c.current=!1))},[v]),r.useEffect(()=>{if(l){const[ue,we]=ut(i.mode,x,l.QuizAnswerCount),ke=I.getExamplesByQuizNo(l.Quiz,ue,t.mode);i.mode==="review"?Number(n.Average)<70?U(ge.shuffle(ke)):(O(x,l.QuizAnswerCount),F(T(x,l.QuizAnswerCount))):(i.mode==="student"&&F(T(x,l.QuizAnswerCount)),O(x,l.QuizAnswerCount),U(ke),F(T(x,l.QuizAnswerCount))),l.Hint.IsEnabled&&(i.mode==="student"?te({IsEnabled:l.Hint.IsEnabled,Max:l.Hint.Max,Try:l.Hint.Try}):te({IsEnabled:l.Hint.IsEnabled,Max:l.Hint.Max,Try:0})),x.length>0&&i.mode==="student"?(l.IsEnablePenaltyReview&&x[x.length-1].PenaltyWord!==""?(C({penaltyState:"penalty",sentence:x[x.length-1].PenaltyWord}),f(ue-1)):f(ue),S(we),z(we)):(S(we),z(we),f(ue))}},[l]),r.useEffect(()=>{if(A(),l&&Q.seq>-1){if(Q.playType==="sentence"){const ue=()=>{L({playState:"",playType:"",seq:-1})};E(l.Quiz[Q.seq].Question.Sound,ue)}else if(Q.playType==="all"){const ue=()=>{Q.seq<l.Quiz.length-1?L({playState:"playing",playType:"all",seq:Q.seq+1}):(A(),L({playState:"",playType:"",seq:-1}))};E(l.Quiz[Q.seq].Question.Sound,ue)}}},[Q]),r.useEffect(()=>{!v&&!g&&l&&(S(0),z(0),ve(p-2),P.penaltyState==="none"&&d.setup(l.QuizTime,!0),c.current=!1)},[p]),r.useEffect(()=>{oe&&K()},[oe]),r.useEffect(()=>{P.penaltyState==="penalty"&&l&&d.stop()},[P]),!l)return e.jsx(e.Fragment,{children:"Loading..."});const re=async(ue,we)=>{try{if(!c.current){c.current=!0,A(),L({playState:"",playType:"",seq:-1});const ke=/<[^>]*>/gi,Je=l.Quiz[p-1].Question.Text===we,le={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:w+1,ox:Je},fe=q({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text.replace(ke,""),selectedAnswer:we.replace(ke,""),tryCount:w+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:Je,answerData:le,isEnabledPenalty:l.IsEnablePenaltyReview,isFinishStudy:t.lastStep===u});d.stop();const pe=await Ie(i.mode,fe);if(Number(pe.result)===0){pe.resultMessage&&(s.finishStudy={id:Number(pe.result),cause:pe.resultMessage});const ye=i.mode==="review"&&Number(n.Average)<70;V(le,ye),Je||z(M+1),S(w+1),H(ue,Je)}}}catch(ke){console.error(ke)}},H=(ue,we)=>{B({isActive:!0,isCorrect:we}),we?ue&&a.play(ue,["animate__fadeIn",Ut.correct]):a.play(ue,["animate__headShake",Ut.incorrect])},J=ue=>{const we=!!a.isContain(ue,"animate__fadeIn");setTimeout(()=>{if(a.remove(ue,["animate__fadeIn","animate__headShake",Ut.correct,Ut.incorrect]),B({isActive:!1,isCorrect:!1}),we)setTimeout(()=>{const ke=G.filter(Je=>Je.QuizNo!==p);U([...ke]),F(R),p+1>l.Quiz.length?(ve(p-1),ie(!0)):f(p+1)},300);else if(w>=l.QuizAnswerCount){const ke=G.filter(Je=>Je.QuizNo!==p);U([...ke]),F(R),p+1>l.Quiz.length?l.IsEnablePenaltyReview?C({penaltyState:"penalty",sentence:l.Quiz[p-1].Question.Text}):(ve(p-1),ie(!0)):l.IsEnablePenaltyReview?C({penaltyState:"penalty",sentence:l.Quiz[p-1].Question.Text}):f(p+1)}else d.setup(l.QuizTime,!0),c.current=!1},1e3)},D=async()=>{try{if(!c.current){c.current=!0,A(),L({playState:"",playType:"",seq:-1});const ue={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:w+1,ox:!1},we=q({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text,selectedAnswer:"",tryCount:w+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:!1,answerData:ue,isEnabledPenalty:l.IsEnablePenaltyReview,isFinishStudy:t.lastStep===u});d.stop();const ke=await Ie(i.mode,we);Number(ke.result)===0&&(ke.resultMessage&&(s.finishStudy={id:Number(ke.result),cause:ke.resultMessage}),V(ue),z(M+1),S(w+1),B({isActive:!0,isCorrect:!1}),setTimeout(()=>{if(B({isActive:!1,isCorrect:!1}),w+1>=l.QuizAnswerCount){const Je=G.filter(le=>le.QuizNo!==p);U(Je),F(le=>[...le,ue]),p+1>l.Quiz.length?l.IsEnablePenaltyReview?C({penaltyState:"penalty",sentence:l.Quiz[p-1].Question.Text}):(ve(p-1),ie(!0)):l.IsEnablePenaltyReview?C({penaltyState:"penalty",sentence:l.Quiz[p-1].Question.Text}):f(p+1)}else d.setup(l.QuizTime,!0),c.current=!1},1e3))}}catch(ue){console.error(ue)}},Z=async()=>{try{if(X.IsEnabled&&X&&X.Try!==void 0&&X.Max!==void 0&&X.Max-X.Try>0&&!c.current){c.current=!0,A(),L({playState:"",playType:"",seq:-1}),d.stop();let ue={Type:0,Hint:"",TryHint:0,ErrorNo:0};if(i.mode==="student"?ue=await $_(t.studyId,t.studentHistoryId,p,`${t.currentStep}`):ue={Type:0,Hint:l.Quiz[p-1].Question.Text,TryHint:X.Try+1,ErrorNo:0},ue.ErrorNo===0){te({IsEnabled:l.Hint.IsEnabled,Max:l.Hint.Max,Try:ue.TryHint});const we={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:w+1,ox:!0},ke=q({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text,selectedAnswer:l.Quiz[p-1].Question.Text,tryCount:w+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:!0,answerData:we,isEnabledPenalty:l.IsEnablePenaltyReview,isFinishStudy:t.lastStep===u}),Je=await Ie(i.mode,ke);Number(Je.result)===0&&(Je.resultMessage&&(s.finishStudy={id:Number(Je.result),cause:Je.resultMessage}),V(we),S(w+1),ce(!0))}}}catch(ue){console.error(ue)}},K=()=>{const ue=G.filter(we=>we.QuizNo!==p);U([...ue]),F(R),p+1>l.Quiz.length?(ve(p-1),ie(!0)):f(p+1),ce(!1)},ie=ue=>{d.setup(0),xe(ue)},me=ue=>{m(ue)},ve=ue=>{Q.playState===""&&ue>-1?L({playState:"playing",playType:"sentence",seq:ue}):Q.playState==="playing"&&Q.seq===ue?L({playState:"",playType:"",seq:-1}):Q.playState==="playing"&&Q.seq!==ue&&L({playState:"playing",playType:"sentence",seq:ue})},_e=()=>{A(),Q.playState==="playing"?L({playState:"",playType:"",seq:-1}):L({playState:"playing",playType:"all",seq:0})},$t=()=>{A(),L({playState:"",playType:"",seq:-1}),b(!0)},pn=ue=>{ue==="none"?Bt():C({penaltyState:ue,sentence:l.Quiz[p-1].Question.Text})},Bt=async()=>{(async()=>{const we=p+1>l.Quiz.length,ke=await _s({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${u}`,quizId:l.Quiz[p-1].QuizId,isLastQuiz:we,isFinishStudy:!!(we&&t.lastStep===u)});Number(ke.result)===0&&(ke.resultMessage&&(s.finishStudy={id:Number(ke.result),cause:ke.resultMessage}),A(),we?(C({penaltyState:"none",sentence:""}),ve(p-1),ie(!0)):(C({penaltyState:"none",sentence:""}),f(p+1)))})()};return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`animate__animated ${h}`,onAnimationEnd:()=>{h==="animate__bounceOutLeft"&&y()},children:e.jsx(Me,{step:u,quizType:Jn,comment:o("study.나열된 문장을 보고 올바른 순서대로 고르세요."),onStepIntroClozeHandler:()=>{_("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:g?e.jsx(it,{step:u,quizType:Jn,quizAnswerCount:l.QuizAnswerCount,studentAnswer:R,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:p,totalQuizCnt:Object.keys(l.Quiz).length,life:l.QuizAnswerCount-M,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:me}),e.jsx("div",{className:`${Ut.comment} animate__animated animate__fadeInLeft`,children:Jn}),e.jsx(Te,{children:P.penaltyState==="none"?e.jsxs(Be,{typeCSS:Ut.summaryTest1,containerCSS:Ut.container,children:[e.jsx(e.Fragment,{children:ae&&e.jsx(zg,{multiPlayState:Q,playAll:_e})}),e.jsx(ug,{isStepEnd:ae,multiPlayState:Q,sentenceData:l.Quiz,selectedData:Y,playSentence:ve}),e.jsx(e.Fragment,{children:ae?e.jsx(Ag,{goNext:$t}):e.jsxs(e.Fragment,{children:[e.jsx(mg,{}),e.jsx(fg,{exampleData:G,checkAnswer:re,onAnimationEnd:J}),X.IsEnabled&&e.jsx(kg,{tryCnt:X.Try,maxCnt:X.Max,onClickHint:Z})]})})]}):e.jsx(Pg,{isSideOpen:k,correctSentence:P.sentence,changePenaltyState:pn})}),k&&e.jsx(Ne,{isSideOpen:k,currentStep:u,currentStepType:Jn,quizLength:l.Quiz.length,maxAnswerCount:l.QuizAnswerCount,changeSideMenu:me,scoreBoardData:R,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:j})]})})})}const Fg=new N(navigator.userAgent),qg=Fg.phone(),Yn=qg?Ue:Ke;function Hg({isComplete:t,wordData:o,questionNo:n}){const s=r.useRef(null);r.useEffect(()=>{o.QuestionIndex===n&&s.current!==null&&s.current.scrollIntoView()},[n]);let i="";return o.State==="none"&&o.QuestionIndex>0?o.QuestionIndex===n&&(i="?"):i=o.Word,e.jsx("span",{ref:s,className:`
        ${Yn.answerBox}
        ${o.QuestionIndex===n&&!t?Yn.currentOrder:""}
        ${o.State==="correct"?Yn.correctAnswer:""}        
        ${o.State==="incorrect"?Yn.incorrectAnswer:""}
      `,dangerouslySetInnerHTML:{__html:i}})}const Og=new N(navigator.userAgent),Dg=Og.phone(),ti=Dg?Ue:Ke;function Vg({isComplete:t,sentenceData:o,questionNo:n}){const s=r.useRef(null);return r.useEffect(()=>{t&&s.current&&s.current.scrollTo({top:0,behavior:"smooth"})},[t]),e.jsx("div",{ref:s,className:ti.questionBox,children:o.map((i,u)=>i.QuestionIndex>0?e.jsx(Hg,{isComplete:t,wordData:i,questionNo:n},`answer-${u}`):e.jsx("span",{className:ti.word,dangerouslySetInnerHTML:{__html:i.Word}},`answer-${u}`))})}const Wg=new N(navigator.userAgent),Gg=Wg.phone(),ni=Gg?Ue:Ke;function Kg(){return e.jsx("div",{className:ni.correctDirection,children:e.jsx("div",{className:ni.iconArrowUp})})}const Ug=new N(navigator.userAgent),Jg=Ug.phone(),Qs=Jg?Ue:Ke;function Yg({index:t,exampleData:o,checkAnswer:n,onAnimationEnd:s}){return e.jsxs("div",{className:`${Qs.textCard}`,onClick:i=>n(i.currentTarget,o.Text),onAnimationEnd:i=>s(i.currentTarget),children:[e.jsx("div",{className:Qs.cardNumber,children:Number(t+1)}),e.jsx("div",{className:Qs.awnserText,children:o.Text})]})}const Xg=new N(navigator.userAgent),Zg=Xg.phone(),si=Zg?Ue:Ke;function ey({exampleData:t,checkAnswer:o,onAnimationEnd:n}){return e.jsx("div",{className:si.answers,children:e.jsx("div",{className:si.container,children:t.map((s,i)=>e.jsx(Yg,{index:i,exampleData:s,checkAnswer:o,onAnimationEnd:n},`example-${i}`))})})}const ty=new N(navigator.userAgent),ny=ty.phone(),oi=ny?Ue:Ke;function sy({playState:t,playSentence:o}){return e.jsxs("div",{className:oi.wordPlayButton,onClick:()=>o(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:oi.txtL,children:"Play Sound (completed sentence)"})]})}const oy=new N(navigator.userAgent),iy=oy.phone(),ry=iy?Ue:Ke;function ay({showResult:t}){return e.jsx("div",{className:`${ry.btnNext}`,onClick:()=>t(),children:"Next"})}const cy=new N(navigator.userAgent),uy=cy.phone(),Xn="Summary Test",Jt=uy?Ue:Ke;function ly(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=t.currentStep,d=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?D():window.onLogoutStudy()}),a=lt(),[h,_]=r.useState("animate__bounceInRight"),{isStepIntro:v,closeStepIntro:y}=ze(),{isResultShow:g,changeResultShow:b}=Re(),[k,m]=r.useState(!1),c=r.useRef(!0),[l,x]=Ce(z_,t,u),[p,f]=r.useState(1),[w,S]=r.useState(1),[M,z]=r.useState([]),[P,C]=r.useState([]),[j,B]=r.useState([]),[R,O]=r.useState([]),[W,V]=r.useState(""),[q,T]=r.useState(0),[I,G]=r.useState(0),{scoreBoardData:U,addStudentAnswer:Y,addStudentAnswers:F,convertPartialRecordToScoreBoardSummary2:E,convertPartialRecordToScoreBoard:A,makeUserPartialAnswerData:Q}=Qe(i.mode),{bottomPopupState:L,changeBottomPopupState:X}=Xe(),{playState:te,playAudio:oe,stopAudio:ce}=Le(),[ae,xe]=r.useState(!1);if(r.useEffect(()=>{!v&&l&&(i.mode==="review"&&Number(n.Average)>=70?xe(!0):(d.setup(l.QuizTime,!0),c.current=!1))},[v]),r.useEffect(()=>{if(l){let[le,fe,pe]=[1,1,0];if(x&&x.length>0){const Pt=l.Quiz.find(Rt=>Rt.QuizNo===x[x.length-1].QuizNo),dt=(Pt==null?void 0:Pt.Examples.length)||0;[le,fe,pe]=Na(i.mode,x,dt,l.QuizAnswerCount)}const ye=pn(l.Quiz),Ye=me(l.Sentence,x,ye);if(le>1||pe>0){const[Pt,dt]=Bt(ye,le-1);f(fe),S(le),ie(x,fe),B(Pt),O(ge.shuffle(dt))}else i.mode==="staff"?O(ye):O(ge.shuffle(ye));const _t=E(x,l.QuizAnswerCount);F([..._t]),G(pe),T(pe),z(Ye),C(ye)}},[l]),r.useEffect(()=>{l&&!v&&(T(0),G(0),d.setup(l.QuizTime,!0),c.current=!1)},[w]),r.useEffect(()=>{ae&&l&&ue()},[ae]),!l)return e.jsx(e.Fragment,{children:"Loading..."});const re=async(le,fe)=>{try{if(!c.current){c.current=!0;const pe=P[w-1].Text===fe;d.stop();let Ye=W+(pe?"1":"2");const _t={quizNo:w,maxCount:l.QuizAnswerCount,answerCount:q+1,ox:pe},Pt=Q({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:w,correct:P[w-1].Text,selectedAnswer:fe,partialRecord:Ye,tryCount:q+1,maxQuizCount:l.QuizAnswerCount,quizLength:P.length,isCorrect:pe,answerData:_t,isFinishStudy:t.lastStep===u}),dt=await Zs(i.mode,Pt);Number(dt.result)===0&&(dt.resultMessage&&(s.finishStudy={id:Number(dt.result),cause:dt.resultMessage}),Y(_t),pe||G(I+1),V(Ye),T(q+1),H(pe,le))}}catch(pe){console.error(pe)}},H=(le,fe)=>{X({isActive:!0,isCorrect:le}),le?a.play(fe,[Jt.correct,"animate__fadeIn"]):a.play(fe,[Jt.incorrect,"animate__headShake"])},J=le=>{const fe=!!a.isContain(le,"animate__fadeIn");setTimeout(()=>{if(a.remove(le,["animate__fadeIn","animate__headShake",Jt.correct,Jt.incorrect]),X({isActive:!1,isCorrect:!1}),fe){const pe=ve(w,fe),ye=_e(w),Ye=$t(w);if(z(pe),B(ye),O(Ye),w+1<=P.length){const _t=K();p!==_t?(V(""),f(_t)):V(W+","),S(w+1)}else xe(!0)}else if(q<l.QuizAnswerCount)d.setup(l.QuizTime,!0),c.current=!1;else{const pe=ve(w,fe),ye=_e(w),Ye=$t(w);if(z(pe),B(ye),O(Ye),w+1<=P.length){const _t=K();p!==_t?(V(""),f(_t)):V(W+","),S(w+1)}else xe(!0)}},1e3)},D=async()=>{try{if(!c.current){c.current=!0,d.stop();let le=W+"2";const fe={quizNo:w,maxCount:l.QuizAnswerCount,answerCount:q+1,ox:!1},pe=Q({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:w,correct:"2",selectedAnswer:le,partialRecord:le,tryCount:q+1,maxQuizCount:l.QuizAnswerCount,quizLength:P.length,isCorrect:!1,answerData:fe,isFinishStudy:t.lastStep===u}),ye=await Zs(i.mode,pe);Number(ye.result)===0&&(ye.resultMessage&&(s.finishStudy={id:Number(ye.result),cause:ye.resultMessage}),Y(fe),G(I+1),V(le),T(q+1),X({isActive:!0,isCorrect:!1}),Z(q+1,le))}}catch(le){console.error(le)}},Z=(le,fe)=>{setTimeout(()=>{if(X({isActive:!1,isCorrect:!1}),le>=l.QuizAnswerCount){const pe=ve(w,!1),ye=_e(w),Ye=$t(w);if(z(pe),B(ye),O(Ye),w+1<=P.length){const _t=K();p!==_t?(V(""),f(_t)):V(fe+","),S(w+1)}else xe(!0)}else d.setup(l.QuizTime,!0),c.current=!1},1e3)},K=()=>{let le=1;return l.Quiz.map((fe,pe)=>{fe.Examples.length>0&&fe.Examples.map(ye=>{ye.Text===P[w].Text&&(le=pe+1)})}),le},ie=(le,fe)=>{let pe="";le.filter(ye=>{ye.QuizNo===fe&&(ye.AnswerCount===l.QuizAnswerCount||ye.StudentAnswer.slice(-1)==="1"?pe=ye.StudentAnswer+",":pe=ye.StudentAnswer)}),V(pe)},me=(le,fe,pe)=>{const ye=A(fe,l.QuizAnswerCount);let Ye=0;return le.Texts.map(dt=>dt.split(" ")).reduce((dt,Rt)=>[...dt,...Rt]).map(dt=>{if(dt.includes("┒")){let Rt="none";return ye[Ye]&&(ye[Ye].ox?Rt="correct":!ye[Ye].ox&&ye[Ye].answerCount===l.QuizAnswerCount&&(Rt="incorrect")),{Word:pe[Ye].Text,QuestionIndex:++Ye,State:Rt}}else return{Word:dt,QuestionIndex:0,State:"none"}})},ve=(le,fe)=>{let pe=[...M];const ye=M.findIndex(Ye=>Ye.QuestionIndex===le);return pe[ye].State=fe?"correct":"incorrect",pe},_e=le=>[...j,P[le-1]],$t=le=>{const fe=P[le-1].Text;return R.filter(ye=>ye.Text!==fe)},pn=le=>le.map(pe=>pe.Examples).reduce((pe,ye)=>[...pe,...ye]),Bt=(le,fe)=>{const pe=le.slice(0,fe),ye=le.slice(fe,le.length);return[pe,ye]},ue=()=>{te==="playing"?ce():oe(l.Sentence.Sounds[0])},we=()=>{ce(),b(!0)},ke=le=>{m(le)},Je=l.Quiz.reduce((le,fe)=>le+fe.Examples.length,0);return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`animate__animated ${h}`,onAnimationEnd:()=>{h==="animate__bounceOutLeft"&&y()},children:e.jsx(Me,{step:u,quizType:Xn,comment:o("study.지문을 보고 빈칸에 들어갈 알맞은 답을 순서대로 고르세요."),onStepIntroClozeHandler:()=>{_("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:g?e.jsx(it,{step:u,quizType:Xn,quizAnswerCount:l.QuizAnswerCount,studentAnswer:U,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:w,totalQuizCnt:P.length,life:l.QuizAnswerCount-I,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:ke}),e.jsx("div",{className:`${Jt.comment} animate__animated animate__fadeInLeft`,children:Xn}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:Jt.summaryTest2,containerCSS:Jt.container,children:[e.jsx(e.Fragment,{children:ae&&e.jsx(sy,{playState:te,playSentence:ue})}),e.jsx(Vg,{isComplete:ae,sentenceData:M,questionNo:w}),e.jsx(e.Fragment,{children:ae?e.jsx(ay,{showResult:we}):e.jsxs(e.Fragment,{children:[e.jsx(Kg,{}),e.jsx(ey,{exampleData:R,checkAnswer:re,onAnimationEnd:J})]})})]})}),k&&e.jsx(Ne,{isSideOpen:k,currentStep:u,currentStepType:Xn,quizLength:Je,maxAnswerCount:l.QuizAnswerCount,changeSideMenu:ke,scoreBoardData:U,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:L})]})})})}async function dy(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/true-or-false?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text,Sound:_.Sound}))}))}))}const my="_comment_1mrbx_1",xy="_trueOrFalse_1mrbx_20",hy="_container_1mrbx_20",_y="_questionText_1mrbx_27",py="_textCard_1mrbx_32",gy="_correct_1mrbx_66",yy="_incorrect_1mrbx_71",fy="_answer_1mrbx_76",by="_awnserText_1mrbx_87",vy="_answers_1mrbx_91",wy="_wordPlayButton_1mrbx_97",ky="_txtL_1mrbx_112",Sy="_trueSentencePopup_1mrbx_124",jy="_title_1mrbx_127",zy="_sentence_1mrbx_146",$y="_nextButton_1mrbx_152",Qt={comment:my,trueOrFalse:xy,container:hy,questionText:_y,textCard:py,correct:gy,incorrect:yy,answer:fy,true:"_true_1mrbx_20",false:"_false_1mrbx_83",awnserText:by,answers:vy,wordPlayButton:wy,txtL:ky,trueSentencePopup:Sy,title:jy,sentence:zy,nextButton:$y},Cy="_comment_1s0al_1",Qy="_trueOrFalse_1s0al_15",Ay="_container_1s0al_18",Ny="_questionText_1s0al_25",Ty="_textCard_1s0al_30",Iy="_correct_1s0al_64",Ey="_incorrect_1s0al_69",By="_answer_1s0al_74",Py="_awnserText_1s0al_85",My="_answers_1s0al_89",Ly="_wordPlayButton_1s0al_95",Ry="_txtL_1s0al_110",Fy="_trueSentencePopup_1s0al_122",qy="_title_1s0al_125",Hy="_sentence_1s0al_144",Oy="_nextButton_1s0al_150",tn={comment:Cy,trueOrFalse:Qy,container:Ay,questionText:Ny,textCard:Ty,correct:Iy,incorrect:Ey,answer:By,true:"_true_1s0al_15",false:"_false_1s0al_81",awnserText:Py,answers:My,wordPlayButton:Ly,txtL:Ry,trueSentencePopup:Fy,title:qy,sentence:Hy,nextButton:Oy},Dy=new N(navigator.userAgent),Vy=Dy.phone(),Wy=Vy?tn:Qt;function Gy({text:t}){return e.jsx("div",{className:Wy.questionText,dangerouslySetInnerHTML:{__html:t}})}const Ky=new N(navigator.userAgent),Uy=Ky.phone(),Zn=Uy?tn:Qt;function Jy({quizNo:t,isCorrect:o,checkAnswer:n}){const{bookInfo:s,studyInfo:i}=r.useContext(se),[u,d]=r.useState({quizNo:t,view:""});return r.useEffect(()=>{i.mode==="staff"?d({quizNo:t,view:o?Qt.correct:""}):d({quizNo:t,view:i.mode==="review"&&Number(s.Average)>=70&&o?Qt.correct:""})},[t]),e.jsx("div",{className:`${Zn.textCard}  ${t===u.quizNo&&u.view}`,onClick:a=>n(a.currentTarget,!0),children:e.jsxs("div",{className:Zn.answer,children:[e.jsx("div",{className:Zn.true,children:"O"}),e.jsx("div",{className:Zn.answerText,children:"True"})]})})}const Yy=new N(navigator.userAgent),Xy=Yy.phone(),es=Xy?tn:Qt;function Zy({quizNo:t,isCorrect:o,checkAnswer:n}){const{bookInfo:s,studyInfo:i}=r.useContext(se),[u,d]=r.useState({quizNo:t,view:""});return r.useEffect(()=>{i.mode==="staff"?d({quizNo:t,view:o?"":Qt.correct}):d({quizNo:t,view:i.mode==="review"&&Number(s.Average)>=70&&!o?Qt.correct:""})},[t]),e.jsx("div",{className:`${es.textCard}  ${t===u.quizNo&&u.view}`,onClick:a=>n(a.currentTarget,!1),children:e.jsxs("div",{className:es.answer,children:[e.jsx("div",{className:es.false,children:"X"}),e.jsx("div",{className:es.answerText,children:"False"})]})})}const ef=new N(navigator.userAgent),tf=ef.phone(),nf=tf?tn:Qt;function sf({quizNo:t,isCorrect:o,checkAnswer:n}){return e.jsxs("div",{className:nf.answers,children:[e.jsx(Jy,{quizNo:t,isCorrect:o,checkAnswer:n}),e.jsx(Zy,{quizNo:t,isCorrect:o,checkAnswer:n})]})}const of=new N(navigator.userAgent),rf=of.phone(),ii=rf?tn:Qt;function af({playState:t,playTrueSentence:o}){return e.jsxs("div",{className:ii.wordPlayButton,onClick:()=>o(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ii.txtL,children:"Play Sound"})]})}const cf=new N(navigator.userAgent),uf=cf.phone(),vn=uf?tn:Qt;function lf({playState:t,sentence:o,playTrueSentence:n,goNextQuiz:s}){return e.jsxs("div",{className:vn.trueSentencePopup,children:[e.jsx("div",{className:vn.title,children:"True Sentence"}),e.jsxs("div",{className:vn.container,children:[e.jsx(af,{playState:t,playTrueSentence:n}),e.jsx("div",{className:vn.sentence,dangerouslySetInnerHTML:{__html:o}})]}),e.jsx("div",{className:vn.nextButton,onClick:()=>s(),children:"Next"})]})}const df=new N(navigator.userAgent),mf=df.phone(),ts="True or False",Yt=mf?tn:Qt;function xf(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?c&&(c.QuizTime>300?window.onLogoutStudy():G()):window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(dy,t,i),{scoreBoardData:x,setStudentAnswers:p,addStudentAnswer:f,makeUserAnswerData:w}=Qe(s.mode),[S,M]=r.useState(1),[z,P]=r.useState(0),[C,j]=r.useState(0),{bottomPopupState:B,changeBottomPopupState:R}=Xe(),[O,W]=r.useState(!1),{playState:V,playAudio:q,stopAudio:T}=Le();if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),E(),m.current=!1)},[_]),r.useEffect(()=>{if(c){const[Q,L]=ut(s.mode,l,c.QuizAnswerCount);P(L),j(L),p(l,c.QuizAnswerCount),M(Q)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),P(0),j(0),E(),m.current=!1)},[S]),r.useEffect(()=>{c&&!_&&!y&&(O?A():S+1>c.Quiz.length?g(!0):M(S+1))},[O]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(Q,L)=>{try{if(!m.current){m.current=!0,T(),u.stop();const X=/<[^>]*>/gi,te=c.Quiz[S-1].Question.Text,oe=c.Quiz[S-1].Examples[0].Text,ce=te===oe,ae=ce===L,xe={quizNo:S,maxCount:c.QuizAnswerCount,answerCount:z+1,ox:ae},re=w({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[S-1].QuizId,quizNo:c.Quiz[S-1].QuizNo,currentQuizNo:S,correct:oe.replace(X,""),selectedAnswer:ae?oe.replace(X,""):"user has the wrong opinion.",tryCount:z+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:ae,answerData:xe,isFinishStudy:t.lastStep===i}),H=await Ie(s.mode,re);Number(H.result)===0&&(H.resultMessage&&(n.finishStudy={id:Number(H.result),cause:H.resultMessage}),f(xe),ae?d.play(Q,["animate__fadeIn",Yt.correct]):(d.play(Q,["animate__pulse",Yt.incorrect]),j(C+1)),P(z+1),U(ae,ce,Q))}}catch(X){console.error(X)}},G=async()=>{try{if(!m.current){m.current=!0,T(),u.stop();const Q=/<[^>]*>/gi,L=c.Quiz[S-1].Question.Text,X=c.Quiz[S-1].Examples[0].Text,te=L===X,oe=!1,ce={quizNo:S,maxCount:c.QuizAnswerCount,answerCount:z+1,ox:!1},ae=w({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[S-1].QuizId,quizNo:c.Quiz[S-1].QuizNo,currentQuizNo:S,correct:c.Quiz[S-1].Question.Text.replace(Q,""),selectedAnswer:"user has the wrong opinion",tryCount:z+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:oe,answerData:ce,isFinishStudy:t.lastStep===i}),xe=await Ie(s.mode,ae);Number(xe.result)===0&&(xe.resultMessage&&(n.finishStudy={id:Number(xe.result),cause:xe.resultMessage}),f(ce),j(C+1),P(z+1),U(!1,te))}}catch(Q){console.error(Q)}},U=(Q,L,X)=>{R({isActive:!0,isCorrect:Q}),setTimeout(()=>{R({isActive:!1,isCorrect:!1}),X&&d.remove(X,["animate__fadeIn","animate__headShake",Yt.correct,Yt.incorrect]),L?S+1>c.Quiz.length?g(!0):M(S+1):W(!0)},2e3)},Y=()=>{T(),W(!1)},F=Q=>{k(Q)},E=()=>{V==="playing"?T():q(c.Quiz[S-1].Question.Sound)},A=()=>{V==="playing"?T():q(c.Quiz[S-1].Examples[0].Sound)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:ts,comment:o("study.문장을 읽고 맞으면 O, 틀리면 X를 누르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:i,quizType:ts,quizAnswerCount:c.QuizAnswerCount,studentAnswer:x,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:S,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-C,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${Yt.comment} animate__animated animate__fadeInLeft`,children:ts}),e.jsx(Te,{children:O?e.jsx(lf,{playState:V,sentence:c.Quiz[S-1].Examples[0].Text,playTrueSentence:A,goNextQuiz:Y}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Yt.trueOrFalse,containerCSS:Yt.container,children:[e.jsx(ee,{height:10}),e.jsx(Gy,{text:c.Quiz[S-1].Question.Text}),e.jsx(ee,{height:10}),e.jsx(sf,{quizNo:S,isCorrect:c.Quiz[S-1].Question.Text===c.Quiz[S-1].Examples[0].Text,checkAnswer:I})]}),e.jsx(ee,{height:15})]})}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:ts,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,scoreBoardData:x,changeSideMenu:F,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:B})]})})})}const hf="_comment_gchfy_1",_f="_wordPlayButton_gchfy_20",pf="_txtL_gchfy_34",gf="_txtP_gchfy_38",yf="_wordPlayButton2_gchfy_43",ff="_btnNext_gchfy_66",bf="_reTryButton_gchfy_89",vf="_iconChevLeft_gchfy_112",wf="_iconChevRight_gchfy_127",kf="_vocabularyPractice1_gchfy_142",Sf="_container_gchfy_149",jf="_wordCard_gchfy_157",zf="_wordImage_gchfy_174",$f="_screenBlock_gchfy_180",Cf="_wordText_gchfy_188",Qf="_btnRec_gchfy_199",Af="_recIcon_gchfy_206",Nf="_indicator_gchfy_224",Tf="_speakResultVoca1_gchfy_290",If="_phonemes_gchfy_319",Ef="_phonemeItem_gchfy_328",Bf="_phoneme_gchfy_319",Pf="_red_gchfy_336",Mf="_orange_gchfy_339",Lf="_green_gchfy_342",Rf="_phonemeScore_gchfy_345",Ff="_signBox_gchfy_352",qf="_goodJob_gchfy_363",Hf="_tryAgain_gchfy_366",Of="_txt_gchfy_34",Df="_iconArrow_gchfy_375",Vf="_goNextStepBox_gchfy_383",Wf="_vocabularyPractice2_gchfy_401",Gf="_word_gchfy_20",Kf="_speakResultVoca2_gchfy_552",Uf="_vocabularyPractice3_gchfy_663",Jf="_wordTyping_gchfy_676",Yf="_textField_gchfy_680",Xf="_inputField_gchfy_685",Zf="_overLength_gchfy_703",eb="_count_gchfy_732",tb="_enterButton_gchfy_740",nb="_enterIcon_gchfy_754",sb="_skipButton_gchfy_778",ob="_meaning_gchfy_806",ib="_vocabularyPractice4_gchfy_837",rb="_sentence_gchfy_919",ab="_speakResultVoca4_gchfy_980",cb="_studyModeSelectTab_gchfy_1091",ub="_btnTab_gchfy_1097",lb="_active_gchfy_1102",db="_speakQuestionText_gchfy_1114",mb="_recProgress_gchfy_1145",xb="_speakResult_gchfy_290",hb="_speakResultSign_gchfy_1254",Se={comment:hf,wordPlayButton:_f,txtL:pf,txtP:gf,wordPlayButton2:yf,btnNext:ff,reTryButton:bf,iconChevLeft:vf,iconChevRight:wf,vocabularyPractice1:kf,container:Sf,wordCard:jf,wordImage:zf,screenBlock:$f,wordText:Cf,btnRec:Qf,recIcon:Af,indicator:Nf,speakResultVoca1:Tf,phonemes:If,phonemeItem:Ef,phoneme:Bf,red:Pf,orange:Mf,green:Lf,phonemeScore:Rf,signBox:Ff,goodJob:qf,tryAgain:Hf,txt:Of,iconArrow:Df,goNextStepBox:Vf,vocabularyPractice2:Wf,word:Gf,speakResultVoca2:Kf,vocabularyPractice3:Uf,wordTyping:Jf,textField:Yf,inputField:Xf,overLength:Zf,count:eb,enterButton:tb,enterIcon:nb,skipButton:sb,meaning:ob,vocabularyPractice4:ib,sentence:rb,speakResultVoca4:ab,studyModeSelectTab:cb,btnTab:ub,active:lb,speakQuestionText:db,recProgress:mb,speakResult:xb,speakResultSign:hb},_b="_comment_pb44h_1",pb="_wordPlayButton_pb44h_20",gb="_txtL_pb44h_34",yb="_txtP_pb44h_38",fb="_wordPlayButton2_pb44h_43",bb="_btnNext_pb44h_64",vb="_reTryButton_pb44h_86",wb="_iconChevLeft_pb44h_108",kb="_iconChevRight_pb44h_123",Sb="_vocabularyPractice1_pb44h_138",jb="_container_pb44h_141",zb="_wordCard_pb44h_149",$b="_wordImage_pb44h_166",Cb="_wordText_pb44h_172",Qb="_btnRec_pb44h_180",Ab="_recIcon_pb44h_187",Nb="_indicator_pb44h_206",Tb="_speakResultVoca1_pb44h_271",Ib="_phonemes_pb44h_300",Eb="_phonemeItem_pb44h_309",Bb="_phoneme_pb44h_300",Pb="_red_pb44h_317",Mb="_orange_pb44h_320",Lb="_green_pb44h_323",Rb="_phonemeScore_pb44h_326",Fb="_signBox_pb44h_333",qb="_goodJob_pb44h_344",Hb="_tryAgain_pb44h_347",Ob="_txt_pb44h_34",Db="_iconArrow_pb44h_356",Vb="_goNextStepBox_pb44h_364",Wb="_vocabularyPractice2_pb44h_382",Gb="_word_pb44h_20",Kb="_speakResultVoca2_pb44h_511",Ub="_vocabularyPractice3_pb44h_622",Jb="_wordTyping_pb44h_638",Yb="_textField_pb44h_644",Xb="_inputField_pb44h_649",Zb="_overLength_pb44h_667",ev="_count_pb44h_697",tv="_enterButton_pb44h_710",nv="_enterIcon_pb44h_725",sv="_skipButton_pb44h_748",ov="_meaning_pb44h_774",iv="_vocabularyPractice4_pb44h_808",rv="_screenBlock_pb44h_822",av="_sentence_pb44h_888",cv="_speakResultVoca4_pb44h_948",uv="_studyModeSelectTab_pb44h_1059",lv="_btnTab_pb44h_1065",dv="_active_pb44h_1070",mv="_speakQuestionText_pb44h_1082",xv="_recProgress_pb44h_1110",hv="_speakResult_pb44h_271",_v="_speakResultSign_pb44h_1219",je={comment:_b,wordPlayButton:pb,txtL:gb,txtP:yb,wordPlayButton2:fb,btnNext:bb,reTryButton:vb,iconChevLeft:wb,iconChevRight:kb,vocabularyPractice1:Sb,container:jb,wordCard:zb,wordImage:$b,wordText:Cb,btnRec:Qb,recIcon:Ab,indicator:Nb,speakResultVoca1:Tb,phonemes:Ib,phonemeItem:Eb,phoneme:Bb,red:Pb,orange:Mb,green:Lb,phonemeScore:Rb,signBox:Fb,goodJob:qb,tryAgain:Hb,txt:Ob,iconArrow:Db,goNextStepBox:Vb,vocabularyPractice2:Wb,word:Gb,speakResultVoca2:Kb,vocabularyPractice3:Ub,wordTyping:Jb,textField:Yb,inputField:Xb,overLength:Zb,count:ev,enterButton:tv,enterIcon:nv,skipButton:sv,meaning:ov,vocabularyPractice4:iv,screenBlock:rv,sentence:av,speakResultVoca4:cv,studyModeSelectTab:uv,btnTab:lv,active:dv,speakQuestionText:mv,recProgress:xv,speakResult:hv,speakResultSign:_v};async function Fi(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-1-practice?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Image:a.Question.Image,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}async function pv(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Image:a.Question.Image,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}async function qi(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-2-practice?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Image:a.Question.Image,Sound:a.Question.Sound,Word:a.Question.Word,WordSound:a.Question.WordSound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}async function gv(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Image:a.Question.Image,Sound:a.Question.Sound,Word:a.Question.Word,WordSound:a.Question.WordSound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}async function Hi(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-3-practice?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),IsEnabledTyping:d.IsEnabledTyping,IsSkipAvailable:d.IsSkipAvailable,MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica}}))}))}async function yv(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-3?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,IsEnablePenaltyReview:!!d.IsEnablePenaltyReview,Hint:{IsEnabled:d.Hint.IsEnabled,Max:d.Hint.Max,Try:d.Hint.Try},Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica}}))}))}async function fv(t,o,n){const s=`${Ci}/Vocabulary?studentHistoryId=${o}&studyId=${t}&quizNo=${n}`;return $i(s,async u=>({Type:u.Type,Hint:u.Hint,TryHint:u.TryHint,ErrorNo:u.ErrorNo}))}async function Oi(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-4-practice?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}async function bv(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,i=`${Pe}/vocabulary-4?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(i,async d=>({ContentsId:Number(d.ContentsId),IsQuizTimeoutIncorrect:!!d.isQuizTimeoutIncorrect,QuizAnswerCount:Number(d.QuizAnswerCount),QuizTime:Number(d.QuizTime),MainMeanLanguage:d.MainMeanLanguage,SubMeanLanguage:d.SubMeanLanguage,Quiz:d.Quiz.map(a=>({QuizId:a.QuizId.toString(),QuizNo:Number(a.QuizNo),Question:{Text:a.Question.Text,Sound:a.Question.Sound,SpeechPart:a.Question.SpeechPart,Korean:a.Question.Korean,Chinese:a.Question.Chinese,Japanese:a.Question.Japanese,Vietnamese:a.Question.Vietnamese,Indonesian:a.Question.Indonesian,English:a.Question.English,Britannica:a.Question.Britannica},Examples:a.Examples.map(h=>({Text:h.Text}))}))}))}const vv="https://api.readinggate.elasolution.com",wv="e874641aac784ff6b9d62c3483f7aaaa";function fs(){const{t}=de(),o=(s,i,u,d,a,h,_,v,y)=>{try{const g=new Audio(_),b=()=>{const k=g.duration>=5?1.4:1.2,m=Math.ceil(g.duration*1e3*k);if(navigator.mediaDevices.getUserMedia){console.log("The mediaDevices.getUserMedia() method is supported.");const c=p=>{v("recording");const f=new MediaRecorder(p),w=[];f.ondataavailable=S=>{w.push(S.data)},f.onstop=()=>{p.getTracks().forEach(function(z){z.stop()});const S=new Blob(w,{type:f.mimeType}),M=new File([S],"student_audio.mp3",{type:"audio/mp3"});n(s,i,u,d,a,M,h,y)},f.onerror=S=>{alert(S)},f.start(),setTimeout(()=>{f.stop()},m)},l=p=>{v("reset"),console.error("The following error occured: "+p)},x={audio:!0};navigator.mediaDevices.getUserMedia(x).then(c,l).catch(p=>{console.log(p.name),console.log(p.message)})}else v("reset"),alert("MediaDevices.getUserMedia() not supported on your browser!")};Ti?g.addEventListener("loadedmetadata",b):g.addEventListener("canplaythrough",b)}catch(g){alert(g)}},n=async(s,i,u,d,a,h,_,v)=>{const y=new FormData;y.append("audio",h),y.append("text",_),xn.post(`${vv}/pron_v2/phoneme`,y,{headers:{"X-API-Key":wv,"Content-Type":"multipart/form-data"}}).then(g=>{try{xn.post(`/${Qi}`,{studyId:s,studentHistoryId:i,errorCode:g.status,bookCode:u,libName:"Voca",apiName:"PRON_V2/PHONEME",quizNo:d,sentence:_,tryCount:`${a+1}`,scorePhoneme:g.data.average_phoneme_score,scoreTotal:g.data.average_phoneme_score})}catch{console.log("Error save statistics")}switch(g.status){case 200:v(g.data);break;case 401:alert(t("study.인증키가 잘못되었습니다. 리딩게이트로 전화주세요. 1599-0533"));break;case 403:alert(g.data);break;case 422:alert(g.data);break}}).catch(g=>{console.error(g)})};return{startRecording:o}}const kv="Comp 1",Sv="",jv=[{ty:4,nm:"Shape Layer 2",mn:"",sr:1,st:0,op:41.0000016699642,ip:0,hd:!1,cl:"",ln:"",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[127,127,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[147,147,100],t:10},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[127,127,100],t:20.0000008146167}],ix:6},sk:{a:0,k:0},p:{a:0,k:[31.524,31.524,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[26.25,26.25],ix:2}},{ty:"fl",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9882,.3333,.3333],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[.375,.375],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"Shape Layer 1",mn:"",sr:1,st:0,op:41.0000016699642,ip:0,hd:!1,cl:"",ln:"",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[127,127,100],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[250,250,100],t:40.0000016292334}],ix:6},sk:{a:0,k:0},p:{a:0,k:[31.524,31.524,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:40.0000016292334}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Group",nm:"Ellipse 1",ix:1,cix:2,np:3,it:[{ty:"el",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Shape - Ellipse",nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0],ix:3},s:{a:0,k:[26.25,26.25],ix:2}},{ty:"fl",bm:0,cl:"",ln:"",hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9882,.3333,.3333],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[.375,.375],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2}],zv=0,$v=64,Cv=64,Qv={a:"",k:"",d:"",g:"LottieFiles AE 1.0.0",tc:"#000000"},Av="4.8.0",Nv=29.9700012207031,Tv=41.0000016699642,Iv=0,Ev=[],Di={nm:kv,mn:Sv,layers:jv,ddd:zv,h:$v,w:Cv,meta:Qv,v:Av,fr:Nv,op:Tv,ip:Iv,assets:Ev},Bv="5.5.8",Pv=30,Mv=0,Lv=60,Rv=128,Fv=128,qv="Comp 1",Hv=0,Ov=[],Dv=[{ddd:0,ind:1,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[102.49999999999999,113.99999999999999,0],ix:2},a:{a:0,k:[0,50,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.665,y:1},o:{x:.088,y:0},t:0,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-8.75],[10,45],[5,50],[-5,50],[-10,45],[-10,-8.75],[-5,-13.75],[5,-13.75]],c:!0}]},{i:{x:.888,y:.992},o:{x:.315,y:0},t:15,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-29.5],[10,45],[5,50],[-5,50],[-10,45],[-10,-29.5],[-5,-34.5],[5,-34.5]],c:!0}]},{i:{x:.777,y:1},o:{x:.117,y:.013},t:30,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-8.75],[10,45],[5,50],[-5,50],[-10,45],[-10,-8.75],[-5,-13.75],[5,-13.75]],c:!0}]},{i:{x:.853,y:1},o:{x:.098,y:0},t:46,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,18.75],[10,45],[5,50],[-5,50],[-10,45],[-10,18.75],[-5,13.75],[5,13.75]],c:!0}]},{t:60,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-8.75],[10,45],[5,50],[-5,50],[-10,45],[-10,-8.75],[-5,-13.75],[5,-13.75]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9568627450980393,.9411764705882353,.9568627450980393,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],ip:0,op:61,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[62.5,113.99999999999999,0],ix:2},a:{a:0,k:[0,50,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.631,y:1},o:{x:.167,y:0},t:0,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-33],[10,45],[5,50],[-5,50],[-10,45],[-10,-33],[-5,-38],[5,-38]],c:!0}]},{i:{x:.667,y:1},o:{x:.391,y:0},t:13.846,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,4],[10,45],[5,50],[-5,50],[-10,45],[-10,4],[-5,-1],[5,-1]],c:!0}]},{i:{x:.88,y:1},o:{x:.093,y:0},t:27,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-33],[10,45],[5,50],[-5,50],[-10,45],[-10,-33],[-5,-38],[5,-38]],c:!0}]},{i:{x:.873,y:1},o:{x:.165,y:0},t:45,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,11.875],[10,45],[5,50],[-5,50],[-10,45],[-10,11.875],[-5,6.875],[5,6.875]],c:!0}]},{t:60,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,-33],[10,45],[5,50],[-5,50],[-10,45],[-10,-33],[-5,-38],[5,-38]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9568627450980393,.9411764705882353,.9568627450980393,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],ip:0,op:61,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22.5,113.99999999999999,0],ix:2},a:{a:0,k:[0,50,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.562,y:1},o:{x:.46,y:0},t:0,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,29.25],[10,45],[5,50],[-5,50],[-10,45],[-10,29.25],[-5,24.25],[5,24.25]],c:!0}]},{i:{x:.505,y:1},o:{x:.402,y:0},t:15,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,13],[10,45],[5,50],[-5,50],[-10,45],[-10,13],[-5,8],[5,8]],c:!0}]},{i:{x:.407,y:1},o:{x:.167,y:0},t:32,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,29.25],[10,45],[5,50],[-5,50],[-10,45],[-10,29.25],[-5,24.25],[5,24.25]],c:!0}]},{i:{x:.599,y:1},o:{x:.526,y:0},t:47,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,3],[10,45],[5,50],[-5,50],[-10,45],[-10,3],[-5,-2],[5,-2]],c:!0}]},{t:60,s:[{i:[[0,-2.761],[0,0],[2.761,0],[0,0],[0,2.761],[0,0],[-2.761,0],[0,0]],o:[[0,0],[0,2.761],[0,0],[-2.761,0],[0,0],[0,-2.761],[0,0],[2.761,0]],v:[[10,29.25],[10,45],[5,50],[-5,50],[-10,45],[-10,29.25],[-5,24.25],[5,24.25]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9568627450980393,.9411764705882353,.9568627450980393,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],ip:0,op:61,st:0,bm:0}],Vv=[],Wv={v:Bv,fr:Pv,ip:Mv,op:Lv,w:Rv,h:Fv,nm:qv,ddd:Hv,assets:Ov,layers:Dv,markers:Vv},Gv="best-seller",Kv=0,Uv=700,Jv=700,Yv={g:"@lottiefiles/toolkit-js 0.33.2"},Xv=[{ty:4,nm:"Layer 2 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[34.732,47.8,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[34.733,-6.771,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0],[9.278,2.974],[.372,.093],[3.698,-7.396],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[2.974,-9.279],[-.366,-.117],[-8.022,-2.006],[0,0],[0,0],[0,0],[0,0]],v:[[-16.8,47.55],[21.791,7.264],[31.508,-23.045],[20.093,-45.23],[18.988,-45.545],[-1.071,-36.318],[-10.742,-16.979],[-34.482,7.021],[-16.329,45.669]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9843,.8588,.5529],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.732,47.8],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1,parent:3},{ty:4,nm:"Layer 3 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[36.38,56.411,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[-35.879,56.089,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[6.624,.007],[0,-6.627],[-6.627,0],[0,6.627]],o:[[-6.627,0],[0,6.627],[6.627,0],[-.007,-6.624]],v:[[0,-12],[-12,0],[0,12],[12,0]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.1765,.2784,.3608],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.25,76.573],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 2",ix:2,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-36.13,-56.161],[36.13,-56.161],[36.13,56.161],[-36.13,56.161]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.2588,.4078,.5294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.38,56.411],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2,parent:3},{ty:4,nm:"Layer 4 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[-35.879,77.25,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0,0,100],t:18},{s:[100,100,100],t:28}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.13,371,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[15],t:22},{o:{x:.333,y:0},i:{x:.667,y:1},s:[-12],t:26},{s:[0],t:35}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0],[0,0],[0,13.255],[0,0],[0,0],[0,3.005],[10.69,0],[.025,0],[0,0]],o:[[0,0],[0,0],[13.255,0],[0,0],[0,0],[1.344,-2.688],[.001,-10.69],[-.025,0],[0,0],[0,0]],v:[[-59.871,-56],[-59.871,56],[27.87,56],[51.87,32],[51.87,-16],[57.826,-27.913],[59.87,-36.569],[40.515,-55.926],[40.44,-55.926],[-3.597,-55.758]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.9843,.8588,.5529],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[60.121,56.25],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"Layer 5 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[144.25,144.25,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0,0,100],t:4},{o:{x:.333,y:0},i:{x:.667,y:1},s:[110,110,100],t:11},{s:[100,100,100],t:19}],ix:6},sk:{a:0,k:0},p:{a:0,k:[350,342,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-79.529,0],[0,-79.529],[79.529,0],[0,79.529]],o:[[79.529,0],[0,79.529],[-79.529,0],[0,-79.529]],v:[[0,-144],[144,0],[0,144],[-144,0]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[144.25,144.25],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"Layer 6 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[195.385,195.385,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0,0,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[110,110,100],t:7},{s:[100,100,100],t:15}],ix:6},sk:{a:0,k:0},p:{a:0,k:[350,342,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-18.346,-12.541],[-12.224,.931],[-9.617,-20.034],[-11.052,-5.305],[1.689,-22.159],[-6.919,-10.121],[12.541,-18.346],[-.931,-12.224],[20.034,-9.617],[5.305,-11.052],[22.159,1.689],[10.121,-6.919],[18.346,12.541],[12.224,-.931],[9.617,20.034],[11.052,5.305],[-1.689,22.159],[6.919,10.121],[-12.541,18.346],[.931,12.224],[-20.034,9.617],[-5.305,11.052],[-22.159,-1.689],[-10.121,6.919]],o:[[10.121,6.919],[22.159,-1.689],[5.305,11.052],[20.034,9.617],[-.931,12.224],[12.541,18.346],[-6.919,10.121],[1.689,22.159],[-11.052,5.305],[-9.617,20.034],[-12.224,-.931],[-18.346,12.541],[-10.121,-6.919],[-22.159,1.689],[-5.305,-11.052],[-20.034,-9.617],[.931,-12.224],[-12.541,-18.346],[6.919,-10.121],[-1.689,-22.159],[11.052,-5.305],[9.617,-20.034],[12.224,.931],[18.346,-12.541]],v:[[30.426,-182.594],[64.947,-173.344],[117.647,-142.918],[142.918,-117.647],[173.344,-64.947],[182.594,-30.426],[182.594,30.426],[173.344,64.947],[142.918,117.647],[117.647,142.918],[64.947,173.344],[30.426,182.594],[-30.426,182.594],[-64.947,173.344],[-117.647,142.918],[-142.918,117.647],[-173.344,64.947],[-182.594,30.426],[-182.594,-30.426],[-173.344,-64.947],[-142.918,-117.647],[-117.647,-142.918],[-64.947,-173.344],[-30.426,-182.594]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[1,.7059,.1922],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[195.385,195.385],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"Layer 7 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[144.25,20.25,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[310,386,0],ix:2},r:{a:1,k:[{o:{x:.925,y:0},i:{x:.865,y:.826},s:[117],t:3},{o:{x:.215,y:-3.017},i:{x:.509,y:1},s:[-10],t:17},{s:[0],t:29}],ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:3},{s:[100],t:29}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[8,-108],[-96,68],[-40,60],[-8,108],[96,-68]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8706,.3333,.251],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.25,108.25],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"Layer 8 Outlines",sr:1,st:0,op:61,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[42.25,20.25,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[384,386,0],ix:2},r:{a:1,k:[{o:{x:.925,y:0},i:{x:.865,y:.826},s:[-115],t:3},{o:{x:.215,y:-2.965},i:{x:.509,y:1},s:[10],t:17},{s:[0],t:29}],ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:3},{s:[100],t:29}],ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-8,-108],[96,68],[40,60],[8,108],[-96,-68]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Fill 1",c:{a:0,k:[.8706,.3333,.251],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.25,108.25],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:0,nm:"crackers",sr:1,st:9,op:39,ip:9,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[500,500,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[350,350,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],w:1e3,h:1e3,refId:"comp_0",ind:8}],Zv="5.7.4",ew=30,tw=60,nw=0,sw=[{nm:"",id:"comp_0",layers:[{ty:4,nm:"Layer 20 Outlines",sr:1,st:0,op:30,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[257.117,257.118,0],ix:1},s:{a:1,k:[{o:{x:.823,y:0},i:{x:.079,y:1},s:[0,0,100],t:0},{s:[174,174,100],t:28}],ix:6},sk:{a:0,k:0},p:{a:0,k:[500,500,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:1,k:[{o:{x:.333,y:0},i:{x:0,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[50],t:10},{s:[0],t:23}],ix:11}},ef:[{ty:21,mn:"ADBE Fill",nm:"Fill",ix:1,en:1,ef:[{ty:10,mn:"ADBE Fill-0001",nm:"Fill Mask",ix:1,v:{a:0,k:0,ix:1}},{ty:7,mn:"ADBE Fill-0007",nm:"All Masks",ix:2,v:{a:0,k:0,ix:2}},{ty:2,mn:"ADBE Fill-0002",nm:"Color",ix:3,v:{a:0,k:[1,0,0],ix:3}},{ty:7,mn:"ADBE Fill-0006",nm:"Invert",ix:4,v:{a:0,k:0,ix:4}},{ty:0,mn:"ADBE Fill-0003",nm:"Horizontal Feather",ix:5,v:{a:0,k:0,ix:5}},{ty:0,mn:"ADBE Fill-0004",nm:"Vertical Feather",ix:6,v:{a:0,k:0,ix:6}},{ty:0,mn:"ADBE Fill-0005",nm:"Opacity",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,-100.581],[100.581,0],[0,100.581],[-100.58,0]],o:[[0,100.581],[-100.58,0],[0,-100.581],[100.581,0]],v:[[182.117,0],[-.001,182.118],[-182.117,0],[-.001,-182.118]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[257.117,257.118],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"Layer 5 Outlines",sr:1,st:0,op:30,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[335.642,330.771,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[500,505.182,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[{ty:21,mn:"ADBE Fill",nm:"Fill",ix:1,en:1,ef:[{ty:10,mn:"ADBE Fill-0001",nm:"Fill Mask",ix:1,v:{a:0,k:0,ix:1}},{ty:7,mn:"ADBE Fill-0007",nm:"All Masks",ix:2,v:{a:0,k:0,ix:2}},{ty:2,mn:"ADBE Fill-0002",nm:"Color",ix:3,v:{a:0,k:[1,.6627,.102],ix:3}},{ty:7,mn:"ADBE Fill-0006",nm:"Invert",ix:4,v:{a:0,k:0,ix:4}},{ty:0,mn:"ADBE Fill-0003",nm:"Horizontal Feather",ix:5,v:{a:0,k:0,ix:5}},{ty:0,mn:"ADBE Fill-0004",nm:"Vertical Feather",ix:6,v:{a:0,k:0,ix:6}},{ty:0,mn:"ADBE Fill-0005",nm:"Opacity",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[335.642,15],[335.642,325.588]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 2",ix:2,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-99.821,-118.962],[99.821,118.962]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[226.179,210.135],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 3",ix:3,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-152.935,-26.966],[152.935,26.966]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[167.935,311.017],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 4",ix:4,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-134.488,77.647],[134.488,-77.647]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[188.163,425.735],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 5",ix:5,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-53.114,145.928],[53.113,-145.928]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[277.398,500.613],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 6",ix:6,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[53.113,145.928],[-53.113,-145.928]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[393.886,500.613],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 7",ix:7,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[134.488,77.647],[-134.488,-77.647]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[483.121,425.735],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 8",ix:8,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[152.935,-26.966],[-152.935,26.966]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[503.349,311.017],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 9",ix:9,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[99.821,-118.962],[-99.821,118.962]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[445.105,210.135],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:10,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:7},{s:[0],t:25}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:0},{s:[0],t:20}],ix:1},m:1}],ind:2},{ty:4,nm:"Layer 5 Outlines 2",sr:1,st:2,op:32,ip:2,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[335.642,330.771,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[500,505.182,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[{ty:21,mn:"ADBE Fill",nm:"Fill",ix:1,en:1,ef:[{ty:10,mn:"ADBE Fill-0001",nm:"Fill Mask",ix:1,v:{a:0,k:0,ix:1}},{ty:7,mn:"ADBE Fill-0007",nm:"All Masks",ix:2,v:{a:0,k:0,ix:2}},{ty:2,mn:"ADBE Fill-0002",nm:"Color",ix:3,v:{a:0,k:[.9647,1,0],ix:3}},{ty:7,mn:"ADBE Fill-0006",nm:"Invert",ix:4,v:{a:0,k:0,ix:4}},{ty:0,mn:"ADBE Fill-0003",nm:"Horizontal Feather",ix:5,v:{a:0,k:0,ix:5}},{ty:0,mn:"ADBE Fill-0004",nm:"Vertical Feather",ix:6,v:{a:0,k:0,ix:6}},{ty:0,mn:"ADBE Fill-0005",nm:"Opacity",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[335.642,15],[335.642,325.588]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[0,0],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 2",ix:2,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-99.821,-118.962],[99.821,118.962]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[226.179,210.135],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 3",ix:3,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-152.935,-26.966],[152.935,26.966]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[167.935,311.017],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 4",ix:4,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-134.488,77.647],[134.488,-77.647]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[188.163,425.735],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 5",ix:5,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-53.114,145.928],[53.113,-145.928]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[277.398,500.613],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 6",ix:6,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[53.113,145.928],[-53.113,-145.928]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[393.886,500.613],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 7",ix:7,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[134.488,77.647],[-134.488,-77.647]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[483.121,425.735],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 8",ix:8,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[152.935,-26.966],[-152.935,26.966]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[503.349,311.017],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Group 9",ix:9,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Path 1",ix:1,d:1,ks:{a:0,k:{c:!1,i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[99.821,-118.962],[-99.821,118.962]]},ix:2}},{ty:"st",bm:0,hd:!1,mn:"ADBE Vector Graphic - Stroke",nm:"Stroke 1",lc:2,lj:2,ml:1,o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},c:{a:0,k:[.8196,0,.1569],ix:3}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[445.105,210.135],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"tm",bm:0,hd:!1,mn:"ADBE Vector Filter - Trim",nm:"Trim Paths 1",ix:10,e:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:9},{s:[0],t:27}],ix:2},o:{a:0,k:0,ix:3},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100],t:2},{s:[0],t:22}],ix:1},m:1}],ind:3}]}],ow={nm:Gv,ddd:Kv,h:Uv,w:Jv,meta:Yv,layers:Xv,v:Zv,fr:ew,op:tw,ip:nw,assets:sw},iw="5.5.7",rw={g:"LottieFiles AE 0.1.20",a:"",k:"",d:"",tc:""},aw=29.9700012207031,cw=0,uw=30.0000012219251,lw=240,dw=120,mw="spot_celebration",xw=0,hw=[],_w=[{ddd:0,ind:1,ty:4,nm:"hand-1 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.389,y:0},t:0,s:[110.657,60.209,0],to:[.724,0,0],ti:[0,0,0]},{i:{x:.623,y:1},o:{x:.167,y:.167},t:2.024,s:[115,60.209,0],to:[0,0,0],ti:[.724,0,0]},{i:{x:0,y:0},o:{x:.333,y:.333},t:4.048,s:[110.657,60.209,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:6.476,s:[110.657,60.209,0],to:[.724,0,0],ti:[0,0,0]},{i:{x:.665,y:1},o:{x:.167,y:.167},t:8.5,s:[115,60.209,0],to:[0,0,0],ti:[.724,0,0]},{i:{x:0,y:0},o:{x:.333,y:.333},t:10.524,s:[110.657,60.209,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:12.953,s:[110.657,60.209,0],to:[.724,0,0],ti:[0,0,0]},{i:{x:.673,y:1},o:{x:.167,y:.167},t:14.976,s:[115,60.209,0],to:[0,0,0],ti:[.724,0,0]},{t:17.0000006924242,s:[110.657,60.209,0]}],ix:2},a:{a:0,k:[32.553,37.706,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.429,.24],[-2.884,5.153],[-.429,-.24],[2.885,-5.151]],o:[[-.43,-.24],[2.885,-5.151],[.429,.24],[-2.885,5.152]],v:[[-5.223,9.328],[-.777,-.436],[5.223,-9.328],[.777,.435]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9686274509803922,.7647058823529411,.2823529411764706,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[53.708,31.209],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.419,.258],[-4.27,6.936],[-.419,-.258],[4.269,-6.935]],o:[[-.419,-.258],[4.269,-6.936],[.419,.258],[-4.269,6.936]],v:[[-7.73,12.558],[-.758,-.467],[7.73,-12.558],[.758,.467]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9686274509803922,.7647058823529411,.2823529411764706,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[47.387,21.728],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.405,.279],[-4.573,6.65],[-.406,-.278],[4.572,-6.65]],o:[[-.405,-.279],[4.573,-6.65],[.405,.279],[-4.573,6.65]],v:[[-8.28,12.04],[-.735,-.506],[8.28,-12.042],[.734,.505]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9686274509803922,.7647058823529411,.2823529411764706,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[37.738,16.357],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-6.325,8.378],[-1.545,.86],[-1.401,-.707],[-.22,-1.281],[-2.303,-1.33],[1.017,-1.762],[-1.904,-1.099],[.438,-2.609],[0,0],[-1.884,-1.46],[.706,-2.636],[8.825,-14.156],[10.784,5.694],[-.367,10.607],[-2.949,2.041],[-.571,-3.589]],o:[[0,0],[6.324,-8.378],[1.545,-.86],[1.402,.706],[1.596,-1.939],[2.304,1.33],[0,0],[1.904,1.099],[-.459,2.736],[0,0],[1.945,1.507],[-.707,2.636],[-9.158,14.689],[-11.407,-6.023],[.346,-10.016],[2.841,-1.965],[.691,4.346]],v:[[-17.535,-7.632],[-6.74,-22.076],[6.333,-36.38],[10.971,-36.749],[13.465,-33.391],[20.363,-34.589],[22.563,-28.538],[26.479,-28.079],[28.655,-22.57],[26.377,-15.826],[30.358,-14.93],[30.987,-7.947],[16.788,21.879],[-17.294,31.762],[-31.936,3.014],[-23.617,-22.577],[-17.156,-17.087]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.984313725490196,.8588235294117647,.5490196078431373,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[32.553,37.706],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"hand-2 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.389,y:0},t:0,s:[129.637,60.209,0],to:[-.94,0,0],ti:[0,0,0]},{i:{x:.623,y:1},o:{x:.167,y:.167},t:2.024,s:[124,60.209,0],to:[0,0,0],ti:[-.94,0,0]},{i:{x:0,y:0},o:{x:.333,y:.333},t:4.048,s:[129.637,60.209,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:6.476,s:[129.637,60.209,0],to:[-.94,0,0],ti:[0,0,0]},{i:{x:.665,y:1},o:{x:.167,y:.167},t:8.5,s:[124,60.209,0],to:[0,0,0],ti:[-.94,0,0]},{i:{x:0,y:0},o:{x:.333,y:.333},t:10.524,s:[129.637,60.209,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:0},t:12.953,s:[129.637,60.209,0],to:[-.94,0,0],ti:[0,0,0]},{i:{x:.673,y:1},o:{x:.167,y:.167},t:14.976,s:[124,60.209,0],to:[0,0,0],ti:[-.94,0,0]},{t:17.0000006924242,s:[129.637,60.209,0]}],ix:2},a:{a:0,k:[32.553,37.706,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-6.324,8.378],[-1.545,.86],[-1.402,-.707],[-.22,-1.281],[-2.303,-1.33],[1.017,-1.762],[-1.905,-1.099],[.438,-2.609],[0,0],[-1.884,-1.46],[.707,-2.636],[8.826,-14.156],[10.784,5.694],[-.366,10.607],[-2.949,2.041],[-.571,-3.589]],o:[[0,0],[6.325,-8.378],[1.545,-.86],[1.401,.706],[1.596,-1.939],[2.304,1.33],[0,0],[1.904,1.099],[-.459,2.736],[0,0],[1.945,1.507],[-.706,2.636],[-9.157,14.689],[-11.407,-6.023],[.347,-10.016],[2.841,-1.965],[.692,4.346]],v:[[-17.535,-7.632],[-6.742,-22.076],[6.333,-36.38],[10.971,-36.749],[13.464,-33.391],[20.363,-34.589],[22.563,-28.538],[26.479,-28.079],[28.655,-22.57],[26.377,-15.826],[30.358,-14.93],[30.986,-7.947],[16.786,21.879],[-17.294,31.762],[-31.938,3.014],[-23.617,-22.577],[-17.158,-17.087]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.9764705882352941,.807843137254902,.3843137254901961,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[32.553,37.706],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"particle-8 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:6.4,s:[100]},{t:22.4000009123707,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.138,y:1},o:{x:.167,y:.167},t:0,s:[161.579,70.143,0],to:[2.5,.542,0],ti:[-2.5,-.542,0]},{t:17.0000006924242,s:[176.579,73.393,0]}],ix:2},a:{a:0,k:[4.076,4.076,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.789,-1.677],[-1.677,-.789],[-.788,1.678],[1.677,.789]],o:[[-.789,1.677],[1.678,.789],[.789,-1.677],[-1.677,-.788]],v:[[-3.036,-1.428],[-1.429,3.036],[3.036,1.428],[1.428,-3.038]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.25882352941176473,.5843137254901961,.9764705882352941,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[4.076,4.076],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"particle-7 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:6.4,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:13,s:[100]},{t:24.00000097754,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.212,y:1},o:{x:.167,y:.167},t:4.8,s:[173.53,67.136,0],to:[5.854,-.5,0],ti:[-5.854,.5,0]},{t:20.0000008146167,s:[208.655,64.136,0]}],ix:2},a:{a:0,k:[5.942,5.942,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.505,-2.865],[-2.864,-.506],[-.505,2.865],[2.864,.505]],o:[[-.505,2.865],[2.865,.505],[.505,-2.864],[-2.865,-.505]],v:[[-5.187,-.915],[-.915,5.187],[5.187,.914],[.915,-5.187]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.43529411764705883,.7098039215686275,.984313725490196,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[5.942,5.942],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"particle-6 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:6.4,s:[100]},{t:22.4000009123707,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.138,y:1},o:{x:.167,y:.167},t:0,s:[168.108,53.605,0],to:[4.583,-.875,0],ti:[-4.583,.875,0]},{t:17.0000006924242,s:[195.608,48.355,0]}],ix:2},a:{a:0,k:[4.804,4.804,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.404,-2.292],[-2.292,-.404],[-.404,2.292],[2.292,.404]],o:[[-.404,2.292],[2.291,.404],[.404,-2.291],[-2.292,-.404]],v:[[-4.149,-.732],[-.731,4.15],[4.15,.732],[.732,-4.15]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.32941176470588235,.6431372549019608,.984313725490196,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[4.803,4.804],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"particle-5 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:6.4,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:13,s:[100]},{t:24.00000097754,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.212,y:1},o:{x:.167,y:.167},t:4.8,s:[163.17,58.428,0],to:[2.771,-.562,0],ti:[-2.771,.562,0]},{t:20.0000008146167,s:[179.795,55.053,0]}],ix:2},a:{a:0,k:[2.982,2.982,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.242,-1.375],[-1.375,-.242],[-.242,1.375],[1.375,.243]],o:[[-.243,1.375],[1.375,.243],[.243,-1.375],[-1.376,-.242]],v:[[-2.49,-.439],[-.439,2.489],[2.49,.439],[.439,-2.49]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.5882352941176471,.792156862745098,.9921568627450981,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2.982,2.982],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"particle-4 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:6.4,s:[100]},{t:22.4000009123707,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.138,y:1},o:{x:.167,y:.167},t:0,s:[73.269,64.839,0],to:[-4.458,.625,0],ti:[4.458,-.625,0]},{t:17.0000006924242,s:[46.519,68.589,0]}],ix:2},a:{a:0,k:[3.164,3.163,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.601,-1.278],[-1.277,-.601],[-.601,1.277],[1.277,.6]],o:[[-.601,1.277],[1.278,.6],[.601,-1.278],[-1.278,-.601]],v:[[-2.313,-1.088],[-1.088,2.313],[2.313,1.089],[1.088,-2.312]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.5882352941176471,.792156862745098,.9921568627450981,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3.164,3.164],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"particle-3 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:6.4,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:13,s:[100]},{t:24.00000097754,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.212,y:1},o:{x:.167,y:.167},t:4.8,s:[75.582,55.3,0],to:[-2.375,-.333,0],ti:[2.375,.333,0]},{t:20.0000008146167,s:[61.332,53.3,0]}],ix:2},a:{a:0,k:[4.016,4.015,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.497,1.055],[1.055,-1.497],[-1.497,-1.056],[-1.055,1.497]],o:[[-1.497,-1.055],[-1.056,1.497],[1.497,1.055],[1.056,-1.496]],v:[[1.911,-2.711],[-2.71,-1.911],[-1.911,2.71],[2.71,1.91]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.43529411764705883,.7098039215686275,.984313725490196,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[4.016,4.015],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:9,ty:4,nm:"particle-2 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:6.4,s:[100]},{t:22.4000009123707,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.138,y:1},o:{x:.167,y:.167},t:0,s:[73.293,48.233,0],to:[-3.708,-.958,0],ti:[3.708,.958,0]},{t:17.0000006924242,s:[51.043,42.483,0]}],ix:2},a:{a:0,k:[5.368,5.368,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.197,-1.138],[1.138,2.197],[-2.198,1.139],[-1.138,-2.198]],o:[[-2.197,1.139],[-1.139,-2.198],[2.197,-1.138],[1.139,2.197]],v:[[2.062,3.979],[-3.979,2.061],[-2.062,-3.98],[3.979,-2.062]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.32941176470588235,.6431372549019608,.984313725490196,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[5.368,5.368],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0},{ddd:0,ind:10,ty:4,nm:"particle-1 Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:6.4,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.333],y:[0]},t:13,s:[100]},{t:24.00000097754,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.212,y:1},o:{x:.167,y:.167},t:4.8,s:[62.37,58.549,0],to:[-5.25,-.25,0],ti:[5.25,.25,0]},{t:20.0000008146167,s:[30.87,57.049,0]}],ix:2},a:{a:0,k:[4.349,4.348,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.364,-2.063],[-2.062,-.364],[-.364,2.062],[2.063,.364]],o:[[-.364,2.063],[2.063,.364],[.364,-2.063],[-2.062,-.364]],v:[[-3.734,-.659],[-.659,3.734],[3.734,.658],[.659,-3.734]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.25882352941176473,.5843137254901961,.9764705882352941,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[4.348,4.348],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30.0000012219251,st:0,bm:0}],pw=[],gw={v:iw,meta:rw,fr:aw,ip:cw,op:uw,w:lw,h:dw,nm:mw,ddd:xw,assets:hw,layers:_w,markers:pw};function $n(){const t={loop:!0,autoplay:!0,animationData:Di,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(zn,{isClickToPauseDisabled:!0,options:t,height:40,width:40})})}function yw(){const t={loop:!0,autoplay:!0,animationData:Di,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(zn,{isClickToPauseDisabled:!0,options:t,height:200,width:200})})}function fw(){const t={loop:!0,autoplay:!0,animationData:Wv,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(zn,{isClickToPauseDisabled:!0,options:t,height:40,width:50})})}function bw({width:t,height:o}){const n={loop:!1,autoplay:!0,animationData:ow,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(zn,{isClickToPauseDisabled:!0,options:n,width:t,height:o})})}function vw({width:t,height:o}){const n={loop:!1,autoplay:!0,animationData:gw,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(zn,{isClickToPauseDisabled:!0,options:n,width:t,height:o})})}function bs(){const{t}=de(),[o,n]=r.useState(""),s=t("speak.기기의 마이크 사용이 차단되었습니다. 해제 후 다시 사용해 주세요.");return r.useEffect(()=>{(async()=>{try{const u=await navigator.permissions.query({name:"microphone"});n(u.state),u.onchange=()=>{n(u.state)}}catch(u){console.error(t("speak.마이크 권한을 확인할 수 없습니다."),u)}})()},[]),{micPermission:o,alertMessage:s}}const ww=new N(navigator.userAgent),kw=ww.phone(),ri=kw?je:Se;function Sw({playState:t,cardInfo:o,playWord:n}){return e.jsxs("div",{className:ri.wordPlayButton,onClick:()=>n(),children:[t===""?e.jsx(Fe,{isColor:!0,width:24,height:24}):e.jsx(qe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ri.txtL,children:o.Question.Text})]})}const jw=new N(navigator.userAgent),zw=jw.phone(),tt=zw?je:Se;function $w({word:t,phonemeScore:o,changePlayBarState:n}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:tt.speakResultVoca1,children:[e.jsx("div",{className:tt.container,children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:tt.wordText,children:t}),e.jsx("div",{className:tt.phonemes,children:o.words.map(s=>e.jsx(e.Fragment,{children:s.phonemes.map(i=>e.jsxs("div",{className:tt.phonemeItem,children:[e.jsx("div",{className:`${tt.phoneme} 
                        ${i.score<At&&tt.red}
                        ${i.score>=At&&i.score<Nt&&tt.orange}  
                        ${i.score>=Nt&&tt.green}  
                        `,children:i.phoneme}),e.jsxs("div",{className:tt.phonemeScore,children:[Math.floor(i.score),"%"]})]}))}))})]})}),o&&o.average_phoneme_score>=be?e.jsxs("div",{className:`${tt.signBox} ${tt.goodJob}`,onClick:()=>n(""),children:[e.jsx("div",{className:tt.txt,children:"Good Job"}),e.jsx("div",{className:tt.iconArrow})]}):e.jsxs("div",{className:`${tt.signBox} ${tt.tryAgain}`,onClick:()=>n(""),children:[e.jsx("div",{className:tt.txt,children:"Try Again"}),e.jsx("div",{className:tt.iconArrow})]})]})})}const Cw=new N(navigator.userAgent),Qw=Cw.phone(),an=Qw?je:Se;function Aw({isSpeakResult:t,playState:o,playBarState:n,cardInfo:s,phonemeScore:i,playWord:u,startRecord:d,changePlayBarState:a}){const h=bs();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${an.wordCard} animate__animated`,children:[e.jsx("div",{className:an.wordImage,children:e.jsx("img",{src:s.Question.Image,width:"100%"})}),n==="recording"&&!t&&e.jsx("div",{className:an.screenBlock}),e.jsxs("div",{className:an.wordText,children:[e.jsx(Sw,{playState:o,cardInfo:s,playWord:u}),e.jsx("div",{className:an.btnRec,onClick:()=>{h.micPermission==="denied"?alert(h.alertMessage):d()},children:n==="recording"?e.jsx($n,{}):e.jsx("div",{className:an.recIcon})})]})]}),t&&e.jsx($w,{word:s.Question.Text,phonemeScore:i,changePlayBarState:a})]})}const Nw=new N(navigator.userAgent),Tw=Nw.phone(),As=Tw?je:Se;function Iw({isLastPage:t,quizNo:o,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:As.indicator,children:[e.jsx("span",{style:t||o>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(o-1),children:e.jsx("div",{className:As.iconChevLeft})}),e.jsxs("span",{children:[o," / ",n]}),e.jsx("span",{onClick:()=>s(o+1),children:e.jsx("div",{className:As.iconChevRight})})]})}const Ew=new N(navigator.userAgent),Bw=Ew.phone(),Pw=Bw?je:Se;function Mw({goTest:t}){return e.jsx("div",{className:`${Pw.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const Ns="Vocabulary Practice",Lw=new N(navigator.userAgent),Rw=Lw.phone(),Ts=Rw?je:Se;function Fw(t){const{t:o}=de(),{studyInfo:n,bookInfo:s}=r.useContext(se),i=t.currentStep,{startRecording:u}=fs(),d=$e(()=>{window.onLogoutStudy()}),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),[y,g]=r.useState(!1),b=r.useRef(!0),{scoreBoardData:k}=Qe(n.mode),[m,c]=Ce(Fi,t,i),[l,x]=r.useState(1),[p,f]=r.useState(0),[w,S]=r.useState(!1),{playState:M,playAudio:z,stopAudio:P}=Le(),[C,j]=r.useState(""),[B,R]=r.useState(),[O,W]=r.useState(!1);if(r.useEffect(()=>{!_&&m&&(d.setup(m.QuizTime,!0),q(),b.current=!1)},[_]),r.useEffect(()=>{!_&&m&&(P(),f(0),l===m.Quiz.length&&S(!0),q())},[l]),r.useEffect(()=>{m&&M===""&&l===Object.keys(m.Quiz).length&&S(!0)},[M]),r.useEffect(()=>{!_&&!w&&x(1)},[w]),r.useEffect(()=>{B&&(f(p+1),W(!0))},[B]),r.useEffect(()=>{C===""&&B&&m?(b.current=!1,R(void 0),W(!1),B.average_phoneme_score>=be&&l+1<=Object.keys(m.Quiz).length&&V(l+1)):C==="reset"&&U("")},[C]),!m)return e.jsx("div",{children:"Loading..."});const V=F=>{P(),F<1?w&&x(Object.keys(m.Quiz).length):F>Object.keys(m.Quiz).length?x(1):x(F)},q=()=>{M===""&&C===""?z(m.Quiz[l-1].Question.Sound):P()},T=F=>{g(F)},I=()=>{P(),t.changeVocaState(!1)},G=()=>{b.current||(b.current=!0,P(),u(n.studyId,n.studentHistoryId,s.BookCode,l,p,m.Quiz[l-1].Question.Text,m.Quiz[l-1].Question.Sound,U,Y))},U=F=>{j(F)},Y=F=>{R(F)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Ns,comment:o("study.카드를 넘기면서 단어를 학습하세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:l,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:T}),e.jsx("div",{className:`${Ts.comment} animate__animated animate__fadeInLeft`,children:Ns}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:Ts.vocabularyPractice1,containerCSS:Ts.container,children:[e.jsx(Aw,{isSpeakResult:O,playState:M,playBarState:C,cardInfo:m.Quiz[l-1],phonemeScore:B,playWord:q,startRecord:G,changePlayBarState:U}),e.jsx(Iw,{isLastPage:w,quizNo:l,totalQuizCnt:m.Quiz.length,changeQuizNo:V}),e.jsx(e.Fragment,{children:w&&e.jsx(Mw,{goTest:I})})]})}),y&&e.jsx(Ne,{isSideOpen:y,currentStep:i,currentStepType:Ns,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,changeSideMenu:T,scoreBoardData:k,changeStep:t.changeStep})]})})}const qw="_comment_qyrao_1",Hw="_wordPlayButton_qyrao_20",Ow="_txtL_qyrao_35",Dw="_cardNumber_qyrao_46",Vw="_hintButton_qyrao_61",Ww="_hintPopup_qyrao_84",Gw="_screenBlock_qyrao_121",Kw="_testReview_qyrao_131",Uw="_title_qyrao_134",Jw="_container_qyrao_139",Yw="_sentence_qyrao_148",Xw="_nextButton_qyrao_158",Zw="_deactNextButton_qyrao_180",ek="_reviewAnswer_qyrao_206",tk="_currentOrder_qyrao_217",nk="_blink_qyrao_1",sk="_currentInput_qyrao_238",ok="_otherInput_qyrao_239",ik="_enterButton_qyrao_246",rk="_hintText_qyrao_272",ak="_correctAnswer_qyrao_280",ck="_overLength_qyrao_295",uk="_vocabularyTest1_qyrao_299",lk="_questionBox_qyrao_304",dk="_wordImage_qyrao_320",mk="_wordText_qyrao_329",xk="_textCard_qyrao_335",hk="_correct_qyrao_280",_k="_incorrect_qyrao_375",pk="_awnserText_qyrao_384",gk="_answers_qyrao_388",yk="_vocabularyTest2_qyrao_395",fk="_blank_qyrao_442",bk="_vocabularyTest3_qyrao_526",vk="_wordCard_qyrao_539",wk="_wordTyping_qyrao_539",kk="_textField_qyrao_543",Sk="_inputField_qyrao_551",jk="_count_qyrao_608",zk="_enterIcon_qyrao_630",$k="_meaning_qyrao_640",Ck="_txtP_qyrao_648",Qk="_vocabularyTest4_qyrao_654",He={comment:qw,wordPlayButton:Hw,txtL:Ow,cardNumber:Dw,hintButton:Vw,hintPopup:Ww,screenBlock:Gw,testReview:Kw,title:Uw,container:Jw,sentence:Yw,nextButton:Xw,deactNextButton:Zw,reviewAnswer:ek,currentOrder:tk,blink:nk,currentInput:sk,otherInput:ok,enterButton:ik,hintText:rk,correctAnswer:ak,overLength:ck,vocabularyTest1:uk,questionBox:lk,wordImage:dk,wordText:mk,textCard:xk,correct:hk,incorrect:_k,awnserText:pk,answers:gk,vocabularyTest2:yk,blank:fk,vocabularyTest3:bk,wordCard:vk,wordTyping:wk,textField:kk,inputField:Sk,count:jk,enterIcon:zk,meaning:$k,txtP:Ck,vocabularyTest4:Qk},Ak="_comment_rs3hk_1",Nk="_wordPlayButton_rs3hk_20",Tk="_txtL_rs3hk_35",Ik="_cardNumber_rs3hk_47",Ek="_hintButton_rs3hk_62",Bk="_hintPopup_rs3hk_85",Pk="_screenBlock_rs3hk_122",Mk="_testReview_rs3hk_132",Lk="_title_rs3hk_132",Rk="_container_rs3hk_137",Fk="_sentence_rs3hk_146",qk="_nextButton_rs3hk_155",Hk="_deactNextButton_rs3hk_177",Ok="_reviewAnswer_rs3hk_198",Dk="_currentOrder_rs3hk_209",Vk="_blink_rs3hk_1",Wk="_currentInput_rs3hk_230",Gk="_otherInput_rs3hk_231",Kk="_enterButton_rs3hk_238",Uk="_hintText_rs3hk_264",Jk="_correctAnswer_rs3hk_272",Yk="_overLength_rs3hk_287",Xk="_vocabularyTest1_rs3hk_291",Zk="_questionBox_rs3hk_296",eS="_wordImage_rs3hk_311",tS="_wordText_rs3hk_320",nS="_textCard_rs3hk_326",sS="_correct_rs3hk_272",oS="_incorrect_rs3hk_360",iS="_awnserText_rs3hk_369",rS="_answers_rs3hk_373",aS="_vocabularyTest2_rs3hk_380",cS="_blank_rs3hk_426",uS="_vocabularyTest3_rs3hk_505",lS="_wordCard_rs3hk_518",dS="_wordTyping_rs3hk_521",mS="_textField_rs3hk_525",xS="_inputField_rs3hk_533",hS="_count_rs3hk_590",_S="_enterIcon_rs3hk_612",pS="_meaning_rs3hk_622",gS="_txtP_rs3hk_631",yS="_vocabularyTest4_rs3hk_637",Oe={comment:Ak,wordPlayButton:Nk,txtL:Tk,cardNumber:Ik,hintButton:Ek,hintPopup:Bk,screenBlock:Pk,testReview:Mk,title:Lk,container:Rk,sentence:Fk,nextButton:qk,deactNextButton:Hk,reviewAnswer:Ok,currentOrder:Dk,blink:Vk,currentInput:Wk,otherInput:Gk,enterButton:Kk,hintText:Uk,correctAnswer:Jk,overLength:Yk,vocabularyTest1:Xk,questionBox:Zk,wordImage:eS,wordText:tS,textCard:nS,correct:sS,incorrect:oS,awnserText:iS,answers:rS,vocabularyTest2:aS,blank:cS,vocabularyTest3:uS,wordCard:lS,wordTyping:dS,textField:mS,inputField:xS,count:hS,enterIcon:_S,meaning:pS,txtP:gS,vocabularyTest4:yS},fS=new N(navigator.userAgent),bS=fS.phone(),ai=bS?Oe:He;function vS({img:t}){return e.jsx("div",{className:ai.questionBox,children:e.jsx("div",{className:ai.wordImage,children:e.jsx("img",{src:t,width:"100%"})})})}const wS=new N(navigator.userAgent),kS=wS.phone(),ns=kS?Oe:He;function SS({index:t,text:o,correctText:n,checkAnswer:s,onAnimationEndHandler:i}){const{bookInfo:u,studyInfo:d}=r.useContext(se);return e.jsxs("div",{className:`${ns.textCard} 
      ${d.mode==="review"&&Number(u.Average)>=70&&o===n?ns.correct:""}
      animate__animated`,onClick:a=>s(a.currentTarget,o),onAnimationEnd:a=>i(a),children:[e.jsx("div",{className:ns.cardNumber,children:t}),e.jsx("div",{className:ns.awnserText,children:o})]})}const jS=new N(navigator.userAgent),zS=jS.phone(),$S=zS?Oe:He;function CS({exampleData:t,correctText:o,checkAnswer:n,onAnimationEndHandler:s}){return e.jsx("div",{className:$S.answers,children:t.map((i,u)=>e.jsx(SS,{index:u+1,text:i.Text,correctText:o,checkAnswer:n,onAnimationEndHandler:s}))})}const QS=new N(navigator.userAgent),go=QS.phone(),ss="Vocabulary Test",It=go?Oe:He;function AS(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?I(void 0):window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!1),[c,l]=Ce(pv,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playAudio:V}=Le(),q=r.useRef(null),T=r.useRef(null);if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),q.current&&T.current&&(u.setup(c.QuizTime,!0),d.remove(q.current,["animate__fadeInRight"]),d.remove(T.current,["animate__fadeInRight"])),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[E,A]=ut(s.mode,l,c.QuizAnswerCount);j(A),R(A),s.mode==="staff"?P(c.Quiz[E-1].Examples):P(ge.shuffle(c.Quiz[E-1].Examples)),w(l,c.QuizAnswerCount),p(E)}catch(E){console.error(E)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),q.current&&T.current&&(d.play(q.current,["animate__fadeInRight"]),d.play(T.current,["animate__fadeInRight"])),j(0),R(0),s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),setTimeout(()=>{q.current&&T.current&&(u.setup(c.QuizTime,!0),d.remove(q.current,["animate__fadeInRight"]),d.remove(T.current,["animate__fadeInRight"])),m.current=!1},1e3))},[x]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(E=void 0,A="quiz time over")=>{try{if(!m.current){m.current=!0;const Q=c.Quiz[x-1].Question.Text===A,L={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:Q},X=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:A,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:Q,answerData:L,isFinishStudy:t.lastStep===i});u.stop();const te=await Ie(s.mode,X);Number(te.result)===0&&(te.resultMessage&&(n.finishStudy={id:Number(te.result),cause:te.resultMessage}),Q||R(B+1),j(C+1),S(L),G(E,Q,C+1))}}catch(Q){console.error(Q)}},G=(E,A,Q)=>{u.stop(),W({isActive:!0,isCorrect:A}),E?A?d.play(E,["animate__fadeIn",It.correct]):d.play(E,["animate__headShake",It.incorrect]):Y(Q)},U=E=>{const A=E.currentTarget;setTimeout(()=>{if(W({isActive:!1,isCorrect:!1}),!!d.isContain(A,"animate__fadeIn")){const L=()=>{d.remove(A,["animate__fadeIn",It.correct]),x+1>c.Quiz.length?g(!0):p(x+1)};V(c.Quiz[x-1].Question.Sound,L)}else if(C>=c.QuizAnswerCount)if(x+1>c.Quiz.length){const L=()=>{d.remove(A,["animate__headShake",It.incorrect]),g(!0)};V(c.Quiz[x-1].Question.Sound,L)}else{const L=()=>{d.remove(A,["animate__headShake",It.incorrect]),p(x+1)};V(c.Quiz[x-1].Question.Sound,L)}else d.remove(A,["animate__headShake",It.incorrect]),u.setup(c.QuizTime,!0),m.current=!1},1500)},Y=E=>{setTimeout(()=>{if(W({isActive:!1,isCorrect:!1}),E>=c.QuizAnswerCount)if(x+1>c.Quiz.length){const A=()=>{g(!0)};V(c.Quiz[x-1].Question.Sound,A)}else{const A=()=>{p(x+1)};V(c.Quiz[x-1].Question.Sound,A)}else u.setup(c.QuizTime,!0),m.current=!1},1e3)},F=E=>{k(E)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:ss,comment:o("study.그림을 보고 알맞은 단어를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(it,{step:i,quizType:ss,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${It.comment} animate__animated animate__fadeInLeft`,children:ss}),e.jsxs(Te,{children:[go?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:It.vocabularyTest1,containerCSS:It.container,children:[e.jsx(vS,{img:c.Quiz[x-1].Question.Image}),e.jsx(ee,{height:20}),e.jsx(CS,{exampleData:z,correctText:c.Quiz[x-1].Question.Text,checkAnswer:I,onAnimationEndHandler:U})]}),go?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:ss,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:F,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const NS=new N(navigator.userAgent),TS=NS.phone(),ci=TS?je:Se;function IS({multiPlayState:t,cardInfo:o,playWord:n}){return e.jsxs("div",{className:ci.wordPlayButton,onClick:()=>n(),children:[t.playState==="playing"&&t.playType==="word"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ci.txtL,children:o.Question.Word})]})}const ES=new N(navigator.userAgent),BS=ES.phone(),ui=BS?je:Se;function PS({multiPlayState:t,cardInfo:o,playSentence:n}){return e.jsxs("div",{className:ui.wordPlayButton,onClick:()=>n(),children:[t.playState==="playing"&&t.playType==="sentence"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ui.txtP,children:hn(o.Question.Text,o.Question.Word,()=>e.jsx("span",{style:{color:"#f15144"},children:o.Question.Word}))})]})}const MS=new N(navigator.userAgent),LS=MS.phone(),nt=LS?je:Se;function RS({word:t,phonemeScore:o,changePlayBarState:n}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:nt.speakResultVoca2,children:[e.jsx("div",{className:nt.container,children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:nt.wordText,children:t}),e.jsx("div",{className:nt.phonemes,children:o.words.map(s=>e.jsx(e.Fragment,{children:s.phonemes.map(i=>e.jsxs("div",{className:nt.phonemeItem,children:[e.jsx("div",{className:`${nt.phoneme} 
                        ${i.score<At&&nt.red}
                        ${i.score>=At&&i.score<Nt&&nt.orange}  
                        ${i.score>=Nt&&nt.green}  
                        `,children:i.phoneme}),e.jsxs("div",{className:nt.phonemeScore,children:[Math.floor(i.score),"%"]})]}))}))})]})}),o&&o.average_phoneme_score>=be?e.jsxs("div",{className:`${nt.signBox} ${nt.goodJob}`,onClick:()=>n(""),children:[e.jsx("div",{className:nt.txt,children:"Good Job"}),e.jsx("div",{className:nt.iconArrow})]}):e.jsxs("div",{className:`${nt.signBox} ${nt.tryAgain}`,onClick:()=>n(""),children:[e.jsx("div",{className:nt.txt,children:"Try Again"}),e.jsx("div",{className:nt.iconArrow})]})]})})}const FS=new N(navigator.userAgent),qS=FS.phone(),Mt=qS?je:Se;function HS({isSpeakResult:t,playBarState:o,cardInfo:n,multiPlayState:s,phonemeScore:i,playWord:u,startRecord:d,playSentence:a,changePlayBarState:h}){const _=bs();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${Mt.wordCard} animate__animated animate__slideInRight`,children:[e.jsx("div",{className:Mt.wordImage,children:e.jsx("img",{src:n.Question.Image,width:"100%"})}),o==="recording"&&!t&&e.jsx("div",{className:Mt.screenBlock}),e.jsxs("div",{className:`${Mt.wordText} ${Mt.word}`,children:[e.jsx(IS,{multiPlayState:s,cardInfo:n,playWord:u}),e.jsx("div",{className:Mt.btnRec,onClick:()=>{_.micPermission==="denied"?alert(_.alertMessage):d()},children:o==="recording"?e.jsx($n,{}):e.jsx("div",{className:Mt.recIcon})})]}),e.jsx("div",{className:Mt.wordText,children:e.jsx(PS,{multiPlayState:s,cardInfo:n,playSentence:a})})]}),t&&e.jsx(RS,{word:n.Question.Word,phonemeScore:i,changePlayBarState:h})]})}const OS=new N(navigator.userAgent),DS=OS.phone(),Is=DS?je:Se;function VS({isLastPage:t,quizNo:o,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:Is.indicator,children:[e.jsx("span",{style:t||o>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(o-1),children:e.jsx("div",{className:Is.iconChevLeft})}),e.jsxs("span",{children:[o," / ",n]}),e.jsx("span",{onClick:()=>s(o+1),children:e.jsx("div",{className:Is.iconChevRight})})]})}const WS=new N(navigator.userAgent),GS=WS.phone(),KS=GS?je:Se;function US({goTest:t}){return e.jsx("div",{className:`${KS.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const JS=new N(navigator.userAgent),YS=JS.phone(),Es="Vocabulary Practice",Bs=YS?je:Se;function XS(t){const{t:o}=de(),{studyInfo:n,bookInfo:s}=r.useContext(se),i=t.currentStep,{startRecording:u}=fs(),d=$e(()=>{window.onLogoutStudy()}),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),[y,g]=r.useState(!1),b=r.useRef(!0),{scoreBoardData:k}=Qe(n.mode),[m,c]=Ce(qi,t,i),[l,x]=r.useState(1),[p,f]=r.useState(0),[w,S]=r.useState(!1),{playAudio:M,stopAudio:z}=Le(),[P,C]=r.useState({playState:"",playType:""}),[j,B]=r.useState(""),[R,O]=r.useState(),[W,V]=r.useState(!1);if(r.useEffect(()=>{!_&&m&&(d.setup(m.QuizTime,!0),setTimeout(()=>{G()},500),b.current=!1)},[_]),r.useEffect(()=>{!_&&m&&(z(),f(0),l===m.Quiz.length&&S(!0),G())},[l]),r.useEffect(()=>{m&&P.playState===""&&l===Object.keys(m.Quiz).length&&(S(!0),z())},[P]),r.useEffect(()=>{!_&&!w&&x(1)},[w]),r.useEffect(()=>{R&&(f(p+1),V(!0))},[R]),r.useEffect(()=>{j===""&&R&&m?(b.current=!1,O(void 0),V(!1),R.average_phoneme_score>=be&&l+1<=Object.keys(m.Quiz).length&&q(l+1)):j==="reset"&&E("")},[j]),!m)return e.jsx("div",{children:"Loading..."});const q=Q=>{Q<1?w&&x(Object.keys(m.Quiz).length):Q>Object.keys(m.Quiz).length?x(1):x(Q)},T=()=>{if(z(),P.playState==="playing"&&P.playType==="word")C({playState:"",playType:""});else{C({playState:"playing",playType:"word"});const Q=()=>{C({playState:"",playType:""})};M(m.Quiz[l-1].Question.WordSound,Q)}},I=()=>{if(z(),P.playState==="playing"&&P.playType==="sentence")C({playState:"",playType:""});else{C({playState:"playing",playType:"sentence"});const Q=()=>{C({playState:"",playType:""})};M(m.Quiz[l-1].Question.Sound,Q)}},G=()=>{z(),C({playState:"playing",playType:"word"});const Q=()=>{C({playState:"",playType:""})},L=()=>{C({playState:"playing",playType:"sentence"}),M(m.Quiz[l-1].Question.Sound,Q)};M(m.Quiz[l-1].Question.WordSound,L)},U=Q=>{g(Q)},Y=()=>{z(),t.changeVocaState(!1)},F=()=>{b.current||(b.current=!0,z(),C({playState:"",playType:""}),u(n.studyId,n.studentHistoryId,s.BookCode,l,p,m.Quiz[l-1].Question.Word,m.Quiz[l-1].Question.WordSound,E,A))},E=Q=>{B(Q)},A=Q=>{O(Q)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Es,comment:o("study.카드를 넘기면서 단어를 학습하세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:l,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:U}),e.jsx("div",{className:`${Bs.comment} animate__animated animate__fadeInLeft`,children:Es}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:Bs.vocabularyPractice2,containerCSS:Bs.container,children:[e.jsx(HS,{isSpeakResult:W,playBarState:j,cardInfo:m.Quiz[l-1],phonemeScore:R,multiPlayState:P,playWord:T,startRecord:F,playSentence:I,changePlayBarState:E}),e.jsx(VS,{isLastPage:w,quizNo:l,totalQuizCnt:m.Quiz.length,changeQuizNo:q}),e.jsx(e.Fragment,{children:w&&e.jsx(US,{goTest:Y})})]})}),y&&e.jsx(Ne,{isSideOpen:y,currentStep:i,currentStepType:Es,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,changeSideMenu:U,scoreBoardData:k,changeStep:t.changeStep})]})})}const ZS=new N(navigator.userAgent),e2=ZS.phone(),Ps=e2?Oe:He;function t2({src:t,sentence:o,blankWord:n}){let s="";for(let i=0;i<n.length;i++)s+="_";return e.jsxs("div",{className:Ps.questionBox,children:[e.jsx("div",{className:Ps.wordImage,children:e.jsx("img",{src:t,width:"100%"})}),e.jsxs("div",{className:Ps.wordText,children:[o.split(n)[0]," ",s,o.split(n)[1]]})]})}const n2=new N(navigator.userAgent),s2=n2.phone(),os=s2?Oe:He;function o2({index:t,correctText:o,exampleData:n,checkAnswer:s,onAnimationEndHandler:i}){const{bookInfo:u,studyInfo:d}=r.useContext(se);return e.jsxs("div",{className:`${os.textCard}
      ${d.mode==="review"&&Number(u.Average)>=70&&n.Text===o?os.correct:""}`,onClick:a=>s(a.currentTarget,n.Text),onAnimationEnd:a=>i(a),children:[e.jsx("div",{className:os.cardNumber,children:Number(t+1)}),e.jsx("div",{className:os.awnserText,children:n.Text})]})}const i2=new N(navigator.userAgent),r2=i2.phone(),a2=r2?Oe:He;function c2({correctText:t,exampleData:o,checkAnswer:n,onAnimationEndHandler:s}){return e.jsx("div",{className:a2.answers,children:o.map((i,u)=>e.jsx(o2,{index:u,correctText:t,exampleData:i,checkAnswer:n,onAnimationEndHandler:s},`e-0${u}`))})}const u2=new N(navigator.userAgent),yo=u2.phone(),is="Vocabulary Test",Et=yo?Oe:He;function l2(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(gv,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe(),{playAudio:V}=Le(),q=r.useRef(null),T=r.useRef(null);if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),q.current&&T.current&&(d.remove(q.current,["animate__fadeInRight"]),d.remove(T.current,["animate__fadeInRight"])),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[F,E]=ut(s.mode,l,c.QuizAnswerCount);j(E),R(E),s.mode==="staff"?P(c.Quiz[F-1].Examples):P(ge.shuffle(c.Quiz[F-1].Examples)),w(l,c.QuizAnswerCount),p(F)}catch(F){console.error(F)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),q.current&&T.current&&(d.play(q.current,["animate__fadeInRight"]),d.play(T.current,["animate__fadeInRight"])),j(0),R(0),s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),setTimeout(()=>{q.current&&T.current&&(d.remove(q.current,["animate__fadeInRight"]),d.remove(T.current,["animate__fadeInRight"])),m.current=!1},1e3))},[x]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const I=async(F,E)=>{try{if(!m.current){m.current=!0;const A=c.Quiz[x-1].Examples[0].Text===E,Q={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:A},L=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Examples[0].Text,selectedAnswer:E,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:A,answerData:Q,isFinishStudy:t.lastStep===i});u.stop();const X=await Ie(s.mode,L);Number(X.result)===0&&(X.resultMessage&&(n.finishStudy={id:Number(X.result),cause:X.resultMessage}),A||R(B+1),j(C+1),S(Q),G(F,A))}}catch(A){console.error(A)}},G=(F,E)=>{W({isActive:!0,isCorrect:E}),E?d.play(F,["animate__fadeIn",Et.correct]):d.play(F,["animate__headShake",Et.incorrect])},U=F=>{const E=F.currentTarget,A=!!d.isContain(E,"animate__fadeIn");setTimeout(()=>{if(W({isActive:!1,isCorrect:!1}),A){const Q=()=>{d.remove(E,["animate__fadeIn",Et.correct]),x+1>c.Quiz.length?g(!0):p(x+1)};V(c.Quiz[x-1].Question.Sound,Q)}else C>=c.QuizAnswerCount?x+1>c.Quiz.length?V(c.Quiz[x-1].Question.Sound,()=>{d.remove(E,["animate__headShake",Et.incorrect]),g(!0)}):V(c.Quiz[x-1].Question.Sound,()=>{d.remove(E,["animate__headShake",Et.incorrect]),p(x+1)}):(d.remove(E,["animate__headShake",Et.incorrect]),u.setup(c.QuizTime,!0),q.current&&T.current&&(d.remove(q.current,["animate__fadeInRight"]),d.remove(T.current,["animate__fadeInRight"])),m.current=!1)},1e3)},Y=F=>{k(F)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:is,comment:o("study.그림과 문장의 빈칸을 보고 알맞은 단어를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(it,{step:i,quizType:is,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:Y}),e.jsx("div",{className:`${Et.comment} animate__animated animate__fadeInLeft`,children:is}),e.jsxs(Te,{children:[yo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Et.vocabularyTest2,containerCSS:Et.container,children:[e.jsx(t2,{src:c.Quiz[x-1].Question.Image,sentence:c.Quiz[x-1].Question.Text,blankWord:c.Quiz[x-1].Examples[0].Text}),e.jsx(ee,{height:20}),e.jsx(c2,{correctText:c.Quiz[x-1].Examples[0].Text,exampleData:z,checkAnswer:I,onAnimationEndHandler:U})]}),yo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:is,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:Y,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const d2=new N(navigator.userAgent),m2=d2.phone(),Lt=m2?zt:jt;function x2({goVocaTest:t,changeRetry:o}){const n=en();return e.jsxs("div",{className:Lt.testResult,children:[e.jsx("div",{className:`${Lt.quizType} ${Lt.nextToVocaTest}`,children:"Begin Vocabulary Test?"}),e.jsx(ee,{height:30}),e.jsxs("div",{className:`${Lt.container} ${Lt.borderNone}`,children:[e.jsx("div",{className:`${Lt.readingUnit} animate__animated animate__jackInTheBox`,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${n}_10.png`,alt:""})}),e.jsx(ee,{height:50})]}),e.jsx("div",{className:Lt.goButton,onClick:()=>{t()},children:"Go!"}),e.jsx(ee,{height:20}),e.jsx("div",{className:Lt.notYetButton,onClick:()=>{o(!0)},children:"Not yet"})]})}const h2=new N(navigator.userAgent),_2=h2.phone(),p2=_2?je:Se;function g2({playState:t,playWord:o}){return e.jsx("div",{className:p2.wordPlayButton2,onClick:()=>o(),tabIndex:-1,children:t==="playing"?e.jsx(qe,{isColor:!0,width:34,height:34}):e.jsx(Fe,{isColor:!0,width:34,height:34})})}const y2=new N(navigator.userAgent),f2=y2.phone(),cn=f2?je:Se;function b2({isSideOpen:t,isEnabledTyping:o,quizData:n,quizNo:s,tryCount:i,inputVal:u,disabled:d,changeInputVal:a,checkAnswer:h}){const _=r.useRef(null);r.useEffect(()=>{const g=()=>{_.current&&(t?_.current.blur():_.current.focus())};return g(),window.addEventListener("click",g),()=>{window.removeEventListener("click",g)}},[t]);const v=g=>{g.preventDefault();const b=/^[ㄱ-ㅎa-zA-Z-'’‘”~ ]+(?:'){0,1}[a-zA-Z]?$/g;let k=g.currentTarget.value;switch(k.slice(-1)){case"‘":k=k.replace("‘","'");break;case"’":k=k.replace("’","'");break;case"”":k=k.replace("”",'"');break}b.test(k)||(k=k.slice(0,k.length-1)),a(k)},y=g=>{(g.currentTarget.value===n.Quiz[s-1].Question.Text||g.key==="Enter")&&h()};return e.jsxs("div",{className:cn.textField,children:[e.jsx("input",{ref:_,className:`${cn.inputField} ${n.Quiz[s-1].Question.Text.length>15?cn.overLength:""}`,type:"text",value:u,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",onChange:g=>v(g),onKeyUp:g=>y(g),onCopy:g=>g.preventDefault(),onPaste:g=>g.preventDefault(),disabled:!o||d,autoFocus:!0,tabIndex:-1}),e.jsx("div",{className:`${cn.wordText} ${n.Quiz[s-1].Question.Text.length>15?cn.overLength:""}`,children:n.Quiz[s-1].Question.Text}),e.jsxs("div",{className:cn.count,children:[i+1," / ",n.QuizAnswerCount]})]})}const v2=new N(navigator.userAgent),w2=v2.phone(),jo=w2?je:Se,k2=({meanData:t,mainMeanLang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":s=t.Question[n];break;case"English":t.Question.English!==""&&t.Question.Britannica!==""||t.Question.English===""&&t.Question.Britannica!==""?s=t.Question.Britannica:t.Question.English!==""&&t.Question.Britannica===""&&(s=t.Question[n]);break;default:s=t.Question.Korean}return e.jsxs("div",{className:jo.txtL,children:[t.Question.SpeechPart,". ",s]})},S2=({meanData:t,mainMeanLang:o})=>{const n=ge.upperFirst(o);let s="";return n==="English"?e.jsx(e.Fragment,{}):(s=t.Question.Britannica!==""?t.Question.Britannica:t.Question.English,e.jsxs("div",{className:jo.txtP,children:[t.Question.SpeechPart,". ",s]}))};function j2({meanData:t,mainMeanLang:o}){return e.jsxs("div",{className:jo.meaning,children:[e.jsx(k2,{meanData:t,mainMeanLang:o}),e.jsx(ee,{height:10}),e.jsx(S2,{meanData:t,mainMeanLang:o})]})}const z2=new N(navigator.userAgent),$2=z2.phone(),st=$2?je:Se;function C2({word:t,phonemeScore:o,changePlayBarState:n}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:st.speakResult,children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:st.word,children:t}),e.jsx("div",{className:st.phonemes,children:o.words.map(s=>e.jsx(e.Fragment,{children:s.phonemes.map(i=>e.jsxs("div",{className:st.phonemeItem,children:[e.jsx("div",{className:`${st.phoneme} 
                        ${i.score<At&&st.red}
                        ${i.score>=At&&i.score<Nt&&st.orange}  
                        ${i.score>=Nt&&st.green}  
                        `,children:i.phoneme}),e.jsxs("div",{className:st.phonemeScore,children:[Math.floor(i.score),"%"]})]}))}))})]})}),e.jsx("div",{className:st.speakResultSign,onClick:()=>n(""),children:o&&o.average_phoneme_score>=be?e.jsxs("div",{className:`${st.signBox} ${st.goodJob}`,children:[e.jsx("div",{className:st.txt,children:"Good Job"}),e.jsx("div",{className:st.iconArrow})]}):e.jsxs("div",{className:`${st.signBox} ${st.tryAgain}`,children:[e.jsx("div",{className:st.txt,children:"Try Again"}),e.jsx("div",{className:st.iconArrow})]})})]})}const Q2=new N(navigator.userAgent),A2=Q2.phone(),N2=A2?je:Se;function T2({checkAnswer:t}){return e.jsxs("div",{className:N2.skipButton,onClick:()=>t("user press skip"),children:[e.jsx("span",{children:"SKIP"}),e.jsx(kc,{width:14,height:14})]})}const I2=new N(navigator.userAgent),Vi=I2.phone(),un=Vi?je:Se;function E2({isSideOpen:t,inputVal:o,playBarState:n,playState:s,quizData:i,quizNo:u,tryCount:d,isSpeakResult:a,phonemeScore:h,playWord:_,startRecord:v,checkAnswer:y,changeInputVal:g,changePlayBarState:b}){return e.jsxs("div",{className:un.wordCard,children:[e.jsxs("div",{className:un.wordTyping,children:[e.jsx(g2,{playState:s,playWord:_}),e.jsx(b2,{isSideOpen:t,isEnabledTyping:i.IsEnabledTyping,quizData:i,quizNo:u,tryCount:d,inputVal:o,disabled:n==="recording",changeInputVal:g,checkAnswer:y}),o===""?e.jsx("div",{className:un.btnRec,onClick:()=>{v()},children:n==="recording"?e.jsx($n,{}):e.jsx("div",{className:un.recIcon})}):e.jsx("div",{className:un.enterButton,onClick:()=>y(),children:e.jsx("div",{className:un.enterIcon})})]}),i.IsSkipAvailable&&e.jsx(T2,{checkAnswer:y}),e.jsx(ee,{height:Vi?30:20}),a?e.jsx(e.Fragment,{children:e.jsx(C2,{word:i.Quiz[u-1].Question.Text,phonemeScore:h,changePlayBarState:b})}):e.jsx(e.Fragment,{children:e.jsx(j2,{meanData:i.Quiz[u-1],mainMeanLang:i.MainMeanLanguage})})]})}const B2=new N(navigator.userAgent),P2=B2.phone(),Ms="Vocabulary Practice",Ls=P2?je:Se;function M2(t){const{t:o}=de(),{handler:n,studyInfo:s,bookInfo:i}=r.useContext(se),u=t.currentStep,{startRecording:d}=fs(),a=$e(()=>{window.onLogoutStudy()}),[h,_]=r.useState("animate__bounceInRight"),{isStepIntro:v,closeStepIntro:y}=ze(),{isResultShow:g,changeResultShow:b}=Re(),[k,m]=r.useState(!1),c=r.useRef(!0),[l,x]=Ce(Hi,t,`${u}P`),[p,f]=r.useState(1),{scoreBoardData:w,setStudentAnswers:S,addStudentAnswer:M,resetStudentAnswer:z,makeUserAnswerData:P}=Qe(s.mode),[C,j]=r.useState(0),[B,R]=r.useState(0),[O,W]=r.useState(""),{playState:V,playAudio:q,stopAudio:T}=Le(),[I,G]=r.useState(!1),[U,Y]=r.useState(""),[F,E]=r.useState(),[A,Q]=r.useState(!1);if(r.useEffect(()=>{!v&&l&&(a.setup(l.QuizTime,!0),s.mode==="staff"&&W(l.Quiz[p-1].Question.Text),te(),c.current=!1)},[v]),r.useEffect(()=>{if(l){const[J,D]=Ia(s.mode,x,l.QuizAnswerCount);l.Quiz.length<J?ce():(x.length>0&&S(x,l.QuizAnswerCount),j(D),f(J))}},[l]),r.useEffect(()=>{l&&!v&&(s.mode==="staff"?W(l.Quiz[p-1].Question.Text):W(""),j(0),R(0),te(),c.current=!1)},[p]),r.useEffect(()=>{g&&G(!1)},[g]),r.useEffect(()=>{I&&(z(),f(1),b(!1))},[I]),r.useEffect(()=>{F&&(R(B+1),Q(!0))},[F]),r.useEffect(()=>{U===""&&F?(c.current=!1,E(void 0),Q(!1),F.average_phoneme_score>=be&&L("speaking correctly")):U==="reset"&&re("")},[U]),!l)return e.jsx(e.Fragment,{children:"Loading..."});const L=async J=>{try{if(!c.current)if(c.current=!0,l.IsEnabledTyping){let D=l.Quiz[p-1].Question.Text===O;if(J==="speaking correctly"&&(D=!0),D){let Z;const K={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:C+1,ox:D},ie=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:"2P",quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text,selectedAnswer:l.Quiz[p-1].Question.Text,tryCount:C+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:D,answerData:K,isFinishStudy:`${t.lastStep}`=="2P"});I?C+1>=l.QuizAnswerCount?p+1>l.Quiz.length?Z={result:"0",resultMessage:"finish"}:Z={result:"0",resultMessage:""}:Z={result:"0",resultMessage:""}:Z=await Ie(s.mode,ie),Number(Z.result)===0&&(Z.resultMessage&&(n.finishStudy={id:Number(Z.result),cause:Z.resultMessage}),M(K),j(C+1),R(0),C+1>=l.QuizAnswerCount?p+1>l.Quiz.length?b(!0):f(p+1):(s.mode==="staff"?W(l.Quiz[p-1].Question.Text):W(""),te(),c.current=!1))}else if(l.IsSkipAvailable&&J){T();const Z={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:C+1,ox:J==="speaking correctly"?!0:D};let K;const ie=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:"2P",quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text,selectedAnswer:J==="speaking correctly"?l.Quiz[p-1].Question.Text:O,tryCount:J==="user press skip"?l.QuizAnswerCount:C+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:D,answerData:Z,isFinishStudy:`${t.lastStep}`=="2P"});I?C+1>=l.QuizAnswerCount?p+1>l.Quiz.length?K={result:"0",resultMessage:"finish"}:K={result:"0",resultMessage:""}:K={result:"0",resultMessage:""}:K=await Ie(s.mode,ie),Number(K.result)===0&&(M(Z),p+1>l.Quiz.length?J==="user press skip"?b(!0):J==="speaking correctly"&&(C+1>=l.QuizAnswerCount?b(!0):(j(C+1),R(0),s.mode==="staff"?W(l.Quiz[p-1].Question.Text):W(""),te(),c.current=!1)):J==="user press skip"?f(p+1):J==="speaking correctly"&&(C+1>=l.QuizAnswerCount?f(p+1):(j(C+1),R(0),s.mode==="staff"?W(l.Quiz[p-1].Question.Text):W(""),te(),c.current=!1)))}else s.mode==="staff"?W(l.Quiz[p-1].Question.Text):W(""),c.current=!1}else{const D={quizNo:p,maxCount:l.QuizAnswerCount,answerCount:C+1,ox:!0};let Z;const K=P({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:"2P",quizId:l.Quiz[p-1].QuizId,quizNo:l.Quiz[p-1].QuizNo,currentQuizNo:p,correct:l.Quiz[p-1].Question.Text,selectedAnswer:O,tryCount:C+1,maxQuizCount:l.QuizAnswerCount,quizLength:l.Quiz.length,isCorrect:!0,answerData:D,isFinishStudy:`${t.lastStep}`=="2P"});I?C+1>=l.QuizAnswerCount?p+1>l.Quiz.length?Z={result:"0",resultMessage:"finish"}:Z={result:"0",resultMessage:""}:Z={result:"0",resultMessage:""}:Z=await Ie(s.mode,K),Number(Z.result)===0&&(M(D),p+1>l.Quiz.length?b(!0):f(p+1))}}catch(D){console.error(D)}},X=J=>{W(J)},te=()=>{V===""&&U===""?q(l.Quiz[p-1].Question.Sound):T()},oe=J=>{m(J)},ce=()=>{t.changeVocaState(!1)},ae=J=>{G(J)},xe=()=>{c.current||(c.current=!0,T(),d(s.studyId,s.studentHistoryId,i.BookCode,p,B,l.Quiz[p-1].Question.Text,l.Quiz[p-1].Question.Sound,re,H))},re=J=>{Y(J)},H=J=>{E(J)};return e.jsx(e.Fragment,{children:v?e.jsx("div",{className:`animate__animated ${h}`,onAnimationEnd:()=>{h==="animate__bounceOutLeft"&&y()},children:e.jsx(Me,{step:u,quizType:Ms,comment:o("study.단어를 보고 듣고 따라서 입력하세요."),onStepIntroClozeHandler:()=>{_("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:g?e.jsx(x2,{goVocaTest:ce,changeRetry:ae}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:p,totalQuizCnt:Object.keys(l.Quiz).length,life:l.QuizAnswerCount,timeMin:a.time.timeMin,timeSec:a.time.timeSec,changeSideMenu:oe}),e.jsx("div",{className:`${Ls.comment} animate__animated animate__fadeInLeft`,children:Ms}),e.jsxs(Te,{children:[e.jsx(ee,{height:10}),e.jsxs(Be,{typeCSS:Ls.vocabularyPractice3,containerCSS:Ls.container,children:[e.jsx(ee,{height:20}),e.jsx(E2,{isSideOpen:k,quizData:l,quizNo:p,tryCount:C,inputVal:O,playBarState:U,playState:V,isSpeakResult:A,phonemeScore:F,playWord:te,changeInputVal:X,startRecord:xe,checkAnswer:L,changePlayBarState:re})]})]}),k&&e.jsx(Ne,{isSideOpen:k,currentStep:u,currentStepType:Ms,quizLength:l.Quiz.length,maxAnswerCount:l.QuizAnswerCount,changeSideMenu:oe,scoreBoardData:w,changeStep:t.changeStep})]})})})}const L2=new N(navigator.userAgent),R2=L2.phone(),wn=R2?Oe:He;function F2({isWorking:t,bottomPopupState:o,isSideOpen:n,isHint:s,inputVal:i,correctAnswer:u,changeInputVal:d,checkAnswer:a}){const h=r.useRef(null);r.useEffect(()=>{const y=()=>{h.current&&(n||s?h.current.blur():h.current.focus())};return y(),window.addEventListener("click",y),()=>{window.removeEventListener("click",y)}},[n,s]);const _=y=>{if(!t){y.preventDefault();const g=/^[ㄱ-ㅎa-zA-Z-'’‘”~ ]+(?:'){0,1}[a-zA-Z]?$/g;let b=y.currentTarget.value;switch(b.slice(-1)){case"‘":b=b.replace("‘","'");break;case"’":b=b.replace("’","'");break;case"”":b=b.replace("”",'"');break}g.test(b)||(b=b.slice(0,b.length-1)),d(b)}},v=y=>{y.key==="Enter"&&!t&&i!==""&&a(i)};return e.jsx("div",{className:`${wn.textField} animate__animated} ${o.isActive&&!o.isCorrect?`animate__headShake ${wn.incorrect}`:""}`,children:o.isActive&&o.isCorrect?e.jsx("div",{className:`${wn.correctAnswer} animate__animated animate__flipInX`,children:u}):e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:h,className:wn.inputField,type:"text",value:i,onChange:y=>_(y),onKeyUp:y=>v(y),onCopy:y=>y.preventDefault(),onPaste:y=>y.preventDefault(),tabIndex:-1,autoFocus:!0,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search"}),e.jsx("div",{className:wn.wordText})]})})}const q2=new N(navigator.userAgent),H2=q2.phone(),zo=H2?Oe:He,O2=({meanData:t,mainMeanLang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":s=t.Question[n];break;case"English":t.Question.English!==""&&t.Question.Britannica!==""||t.Question.English===""&&t.Question.Britannica!==""?s=t.Question.Britannica:t.Question.English!==""&&t.Question.Britannica===""&&(s=t.Question[n]);break;default:s=t.Question.Korean}return e.jsxs("div",{className:zo.txtL,children:[t.Question.SpeechPart,". ",s]})},D2=({meanData:t,mainMeanLang:o})=>{const n=ge.upperFirst(o);let s="";return n==="English"?e.jsx(e.Fragment,{}):(s=t.Question.Britannica!==""?t.Question.Britannica:t.Question.English,e.jsxs("div",{className:zo.txtP,children:[t.Question.SpeechPart,". ",s]}))};function V2({meanData:t,mainMeanLang:o}){return e.jsxs("div",{className:zo.meaning,children:[e.jsx(O2,{meanData:t,mainMeanLang:o}),e.jsx(ee,{height:10}),e.jsx(D2,{meanData:t,mainMeanLang:o})]})}const W2=new N(navigator.userAgent),Wi=W2.phone(),kn=Wi?Oe:He;function G2({isWorking:t,bottomPopupState:o,isSideOpen:n,isHint:s,quizData:i,quizNo:u,inputVal:d,changeInputVal:a,checkAnswer:h}){return e.jsxs("div",{className:kn.wordCard,children:[e.jsxs("div",{className:kn.wordTyping,children:[e.jsx("div",{style:{width:Wi?0:70}}),e.jsx(F2,{isWorking:t,bottomPopupState:o,isSideOpen:n,isHint:s,inputVal:d,correctAnswer:i.Quiz[u-1].Question.Text,changeInputVal:a,checkAnswer:h}),o.isActive&&o.isCorrect?e.jsx("div",{className:kn.enterButton}):e.jsx(e.Fragment,{children:e.jsx("div",{className:kn.enterButton,onClick:()=>{d!==""&&h(d)},children:e.jsx("div",{className:kn.enterIcon,children:e.jsx(ys,{width:20,height:20})})})})]}),e.jsx(ee,{height:20}),e.jsx(V2,{meanData:i.Quiz[u-1],mainMeanLang:i.MainMeanLanguage})]})}const K2=new N(navigator.userAgent),U2=K2.phone(),gt=U2?Oe:He;function Rs({inputRefs:t,correctAnswer:o,inputIndex:n,currentInputIndex:s,changeInputIndex:i,playPenalty:u,changeNextButton:d}){const[a,h]=r.useState(""),_=v=>{v.preventDefault();const y=/^[ㄱ-ㅎa-zA-Z-'’‘”~ ]+(?:'){0,1}[a-zA-Z]?$/g;let g=v.currentTarget.value;switch(g.slice(-1)){case"‘":g=g.replace("‘","'");break;case"’":g=g.replace("’","'");break;case"”":g=g.replace("”",'"');break}y.test(g)||(g=g.slice(0,g.length-1)),g===o?(h(g),i(s+1),s+1>2&&u(()=>{d()})):h(g)};return e.jsxs(e.Fragment,{children:[n>s&&e.jsxs("span",{className:`${gt.reviewAnswer} ${n===s?gt.currentOrder:""} ${o.length>20?gt.overLength:""}`,children:[e.jsx("span",{className:gt.otherInput,children:e.jsx("input",{disabled:!0})}),e.jsx("div",{className:`${gt.hintText} `,children:o})]}),n===s&&e.jsxs("span",{className:`${gt.reviewAnswer} ${n===s?gt.currentOrder:""}  ${o.length>20?gt.overLength:""}`,children:[e.jsx("span",{className:gt.currentInput,children:e.jsx("input",{ref:v=>t.current[n]=v,type:"text",value:a,onChange:v=>_(v),onCopy:v=>v.preventDefault(),onPaste:v=>v.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",tabIndex:-1})}),e.jsx("div",{className:`${gt.hintText}`,children:o})]}),n<s&&e.jsx("span",{className:`${gt.reviewAnswer} ${gt.correctAnswer} ${o.length>20?gt.overLength:""} animate__animated animate__flipInX`,children:o})]})}const J2=new N(navigator.userAgent),Y2=J2.phone(),ln=Y2?Oe:He;function X2({isSideOpen:t,correctAnswer:o,playPenalty:n,changePenaltyState:s}){const i=r.useRef([]),[u,d]=r.useState(0),[a,h]=r.useState(!1);r.useEffect(()=>{const y=()=>{i.current[u]&&(i.current[u].focus(),t&&i.current[u].blur())};return y(),window.addEventListener("click",y),()=>{window.removeEventListener("click",y)}},[u,t]);const _=y=>{d(y)},v=()=>{h(!0)};return e.jsxs("div",{className:`${ln.testReview}`,children:[e.jsx("div",{className:ln.title,children:"Test Review"}),e.jsx("div",{className:ln.container,children:e.jsxs("div",{className:ln.sentence,children:[e.jsx(Rs,{inputRefs:i,inputIndex:0,currentInputIndex:u,correctAnswer:o,changeInputIndex:_,playPenalty:n,changeNextButton:v}),e.jsx(Rs,{inputRefs:i,inputIndex:1,currentInputIndex:u,correctAnswer:o,changeInputIndex:_,playPenalty:n,changeNextButton:v}),e.jsx(Rs,{inputRefs:i,inputIndex:2,currentInputIndex:u,correctAnswer:o,changeInputIndex:_,playPenalty:n,changeNextButton:v})]})}),e.jsx(ee,{height:10}),e.jsx("div",{className:`${a?ln.nextButton:ln.deactNextButton} ${a&&"animate__animated animate__bounce"}`,onClick:()=>a&&s(!1),children:"Next"})]})}const Z2=new N(navigator.userAgent),ej=Z2.phone(),li=ej?Oe:He;function tj({playState:t,playHint:o}){return e.jsxs("div",{className:li.wordPlayButton,onClick:()=>o(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:40,height:40}):e.jsx(Fe,{isColor:!0,width:40,height:40}),e.jsx("span",{className:li.txtL,children:"Play Sound"})]})}const nj=new N(navigator.userAgent),sj=nj.phone(),Fs=sj?Oe:He;function oj({isHint:t,playState:o,remainCount:n,totalCount:s,toggleHint:i,playHint:u}){return e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{className:Fs.hintButton,onClick:()=>i(),children:e.jsxs("span",{children:["Hint"," ",s!==void 0&&n!==void 0?s-n:0,"/",s]})}),t&&e.jsxs("div",{style:{position:"relative",zIndex:3},className:"animate__animated animate__fadeIn",children:[e.jsx("div",{className:Fs.hintPopup,children:e.jsx(tj,{playState:o,playHint:u})}),e.jsx("div",{className:Fs.screenBlock,onClick:()=>i()})]})]})}const ij=new N(navigator.userAgent),rj=ij.phone(),rs="Vocabulary Test",qs=rj?Oe:He;function aj(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=t.currentStep,d=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?L(""):window.onLogoutStudy()}),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(yv,t,u),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(i.mode),[z,P]=r.useState(0),[C,j]=r.useState(0),[B,R]=r.useState(!1),[O,W]=r.useState(0),[V,q]=r.useState(!1),[T,I]=r.useState(!1),{bottomPopupState:G,changeBottomPopupState:U}=Xe(),[Y,F]=r.useState(""),{playState:E,playAudio:A,stopAudio:Q}=Le();if(r.useEffect(()=>{!_&&c&&!T&&(d.setup(c.QuizTime,!0),i.mode==="review"&&Number(n.Average)>=70||i.mode==="staff"?F(c.Quiz[x-1].Question.Text):F(""),m.current=!1)},[_]),r.useEffect(()=>{if(c){const[H,J]=ut(i.mode,l,c.QuizAnswerCount);l.length>0&&c.IsEnablePenaltyReview&&l[l.length-1].PenaltyWord!==""?(I(!0),P(c.QuizAnswerCount),j(c.QuizAnswerCount),p(l[l.length-1].CurrentQuizNo)):(P(J),j(J),p(H)),c.Hint.IsEnabled&&c.Hint.Try&&(i.mode==="student"?W(c.Hint.Try):W(0)),w(l,c.QuizAnswerCount)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(i.mode==="review"&&Number(n.Average)>=70||i.mode==="staff"?F(c.Quiz[x-1].Question.Text):F(""),P(0),j(0),q(!1),R(!1),_||d.setup(c.QuizTime,!0),m.current=!1)},[x]),r.useEffect(()=>{!T&&c&&(async()=>{const J=x+1>c.Quiz.length,D=await _s({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${u}`,quizId:c.Quiz[x-1].QuizId,isLastQuiz:J,isFinishStudy:!!(J&&t.lastStep===u)});Number(D.result)===0&&(D.resultMessage&&(s.finishStudy={id:Number(D.result),cause:D.resultMessage}),x+1>c.Quiz.length?g(!0):(d.setup(c.QuizTime,!0),p(x+1)))})()},[T]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const L=async H=>{try{if(!m.current){m.current=!0;const J=c.Quiz[x-1].Question.Text===H.trimStart().trimEnd();J&&te(H);const D={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:z+1,ox:J},Z=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:H.trimStart().trimEnd(),tryCount:z+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:J,answerData:D,isEnabledPenalty:c.IsEnablePenaltyReview,isFinishStudy:t.lastStep===u});d.stop(),U({isActive:!0,isCorrect:J});const K=await Ie(i.mode,Z);Number(K.result)===0&&(K.resultMessage&&(s.finishStudy={id:Number(K.result),cause:K.resultMessage}),J||j(C+1),P(z+1),S(D),X(J,z+1))}}catch(J){console.error(J)}},X=(H,J)=>{setTimeout(()=>{H?x+1>c.Quiz.length?A(c.Quiz[x-1].Question.Sound,()=>{Q(),U({isActive:!1,isCorrect:!1}),g(!0)}):A(c.Quiz[x-1].Question.Sound,()=>{Q(),U({isActive:!1,isCorrect:!1}),p(x+1)}):(U({isActive:!1,isCorrect:!1}),J>=c.QuizAnswerCount?c.IsEnablePenaltyReview?(F(""),oe(!0)):x+1>c.Quiz.length?g(!0):(d.setup(c.QuizTime,!0),p(x+1)):(d.setup(c.QuizTime,!0),!c.Hint.IsEnabled&&J===c.QuizAnswerCount-1&&A(c.Quiz[x-1].Question.Sound),m.current=!1))},1e3)},te=H=>{F(H)},oe=H=>{I(H)},ce=async()=>{try{if(B)Q(),R(!1);else if(V)R(!0);else if(i.mode==="student"){const H=await fv(t.studyId,t.studentHistoryId,x);(H.ErrorNo===0||V)&&(q(!0),R(!0),W(H.TryHint))}else q(!0),R(!0),W(O+1)}catch(H){console.error(H)}},ae=()=>{E==="playing"?Q():A(c.Quiz[x-1].Question.Sound)},xe=H=>{Q();const J=()=>{Q(),H()};A(c.Quiz[x-1].Question.Sound,J)},re=H=>{k(H)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:u,quizType:rs,comment:o("study.뜻을 보고 올바른 단어를 입력하세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:u,quizType:rs,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-C,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:re}),e.jsx("div",{className:`${qs.comment} animate__animated animate__fadeInLeft`,children:rs}),e.jsx(Te,{children:T?e.jsx(X2,{isSideOpen:b,correctAnswer:c.Quiz[x-1].Question.Text,playPenalty:xe,changePenaltyState:oe}):e.jsxs(Be,{typeCSS:qs.vocabularyTest3,containerCSS:qs.container,children:[e.jsx(ee,{height:20}),e.jsx(G2,{isWorking:m.current,bottomPopupState:G,isSideOpen:b,isHint:B,quizData:c,quizNo:x,inputVal:Y,changeInputVal:te,checkAnswer:L}),e.jsx(e.Fragment,{children:c.Hint.IsEnabled&&e.jsx(oj,{isHint:B,playState:E,remainCount:O,totalCount:c.Hint.Max,toggleHint:ce,playHint:ae})})]})}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:u,currentStepType:rs,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:re,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:G})]})})})}const cj=new N(navigator.userAgent),uj=cj.phone(),di=uj?je:Se;function lj({playState:t,word:o,playWord:n}){return e.jsxs("div",{className:di.wordPlayButton,onClick:()=>n(),children:[t==="playing"?e.jsx(qe,{isColor:!0,width:24,height:24}):e.jsx(Fe,{isColor:!0,width:24,height:24}),e.jsx("div",{className:di.txtL,children:o})]})}const dj=new N(navigator.userAgent),mj=dj.phone(),Gi=mj?je:Se,xj=({meanData:t,lang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question[n];break;default:s=t.Question.Korean}return e.jsxs("div",{className:Gi.meaning,children:[t.Question.SpeechPart,". ",s]})},hj=({meanData:t,lang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question.Britannica?t.Question.Britannica:t.Question[n];break;default:s=t.Question.Britannica}return e.jsxs("div",{className:Gi.sentence,children:[t.Question.SpeechPart,". ",s]})};function _j({meanData:t,mainMeanLang:o,subMeanLang:n}){return e.jsxs(e.Fragment,{children:[e.jsx(xj,{meanData:t,lang:o}),e.jsx(hj,{meanData:t,lang:n})]})}const pj=new N(navigator.userAgent),gj=pj.phone(),as=gj?je:Se;function yj({playState:t,playBarState:o,quizData:n,quizNo:s,playWord:i,startRecord:u}){const d=bs();return e.jsxs("div",{className:`${as.wordCard} animate__animated animate__slideInRight`,children:[e.jsxs("div",{className:as.wordText,children:[e.jsx(lj,{playState:t,word:n.Quiz[s-1].Question.Text,playWord:i}),e.jsx("div",{className:as.btnRec,onClick:()=>{d.micPermission==="denied"?alert(d.alertMessage):u()},children:o==="recording"?e.jsx($n,{}):e.jsx("div",{className:as.recIcon})})]}),e.jsx(ee,{height:10}),e.jsx(_j,{meanData:n.Quiz[s-1],mainMeanLang:n.MainMeanLanguage,subMeanLang:n.SubMeanLanguage})]})}const fj=new N(navigator.userAgent),bj=fj.phone(),Hs=bj?je:Se;function vj({isLastPage:t,quizNo:o,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:Hs.indicator,children:[e.jsx("span",{style:t||o>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(o-1),children:e.jsx("div",{className:Hs.iconChevLeft})}),e.jsxs("span",{children:[o," / ",n]}),e.jsx("span",{onClick:()=>s(o+1),children:e.jsx("div",{className:Hs.iconChevRight})})]})}const wj=new N(navigator.userAgent),kj=wj.phone(),Sj=kj?je:Se;function jj({goTest:t}){return e.jsx("div",{className:`${Sj.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const zj=new N(navigator.userAgent),$j=zj.phone(),ot=$j?je:Se;function Cj({word:t,phonemeScore:o,changePlayBarState:n}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:ot.speakResultVoca4,children:[e.jsx("div",{className:ot.container,children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ot.wordText,children:t}),e.jsx("div",{className:ot.phonemes,children:o.words.map(s=>e.jsx(e.Fragment,{children:s.phonemes.map(i=>e.jsxs("div",{className:ot.phonemeItem,children:[e.jsx("div",{className:`${ot.phoneme} 
                        ${i.score<At&&ot.red}
                        ${i.score>=At&&i.score<Nt&&ot.orange}  
                        ${i.score>=Nt&&ot.green}  
                        `,children:i.phoneme}),e.jsxs("div",{className:ot.phonemeScore,children:[Math.floor(i.score),"%"]})]}))}))})]})}),o&&o.average_phoneme_score>=be?e.jsxs("div",{className:`${ot.signBox} ${ot.goodJob}`,onClick:()=>n(""),children:[e.jsx("div",{className:ot.txt,children:"Good Job"}),e.jsx("div",{className:ot.iconArrow})]}):e.jsxs("div",{className:`${ot.signBox} ${ot.tryAgain}`,onClick:()=>n(""),children:[e.jsx("div",{className:ot.txt,children:"Try Again"}),e.jsx("div",{className:ot.iconArrow})]})]})})}const Qj=new N(navigator.userAgent),Aj=Qj.phone(),Os="Vocabulary Practice",cs=Aj?je:Se;function Nj(t){const{t:o}=de(),{studyInfo:n,bookInfo:s}=r.useContext(se),i=t.currentStep,{startRecording:u}=fs(),d=$e(()=>{window.onLogoutStudy()}),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),[y,g]=r.useState(!1),b=lt(),k=r.useRef(!0),[m,c]=Ce(Oi,t,i),[l,x]=r.useState(1),{scoreBoardData:p}=Qe(n.mode),[f,w]=r.useState(0),[S,M]=r.useState(!1),{playState:z,playAudio:P,stopAudio:C}=Le(),[j,B]=r.useState(""),[R,O]=r.useState(),[W,V]=r.useState(!1),q=r.useRef(null);if(r.useEffect(()=>{!_&&m&&(d.setup(m.QuizTime,!0),q.current&&b.remove(q.current,["animate__fadeInRight","animate__fadeInLeft"]),setTimeout(()=>{I()},500),k.current=!1)},[_]),r.useEffect(()=>{!_&&m&&(C(),w(0),l===m.Quiz.length&&M(!0),q.current&&b.remove(q.current,["animate__fadeInRight","animate__fadeInLeft"]),I())},[l]),r.useEffect(()=>{m&&z===""&&l===Object.keys(m.Quiz).length&&M(!0)},[z]),r.useEffect(()=>{!_&&!S&&x(1)},[S]),r.useEffect(()=>{R&&(w(f+1),V(!0))},[R]),r.useEffect(()=>{j===""&&R&&m?(k.current=!1,O(void 0),V(!1),R.average_phoneme_score>=be&&l+1<=Object.keys(m.Quiz).length&&T(l+1)):j==="reset"&&F("")},[j]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const T=A=>{C(),A<1?S&&x(Object.keys(m.Quiz).length):A>Object.keys(m.Quiz).length?x(1):x(A)},I=()=>{z==="playing"?C():P(m.Quiz[l-1].Question.Sound)},G=A=>{g(A)},U=()=>{C(),t.changeVocaState(!1)},Y=()=>{k.current||(k.current=!0,C(),u(n.studyId,n.studentHistoryId,s.BookCode,l,f,m.Quiz[l-1].Question.Text,m.Quiz[l-1].Question.Sound,F,E))},F=A=>{B(A)},E=A=>{O(A)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:Os,comment:o("study.카드를 넘기면서 단어를 학습하세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:l,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:G}),e.jsx("div",{className:`${cs.comment} animate__animated animate__fadeInLeft`,children:Os}),e.jsx(Te,{children:e.jsxs(Be,{typeCSS:cs.vocabularyPractice4,containerCSS:cs.container,children:[e.jsx(e.Fragment,{children:j==="recording"&&!W&&e.jsx("div",{className:cs.screenBlock})}),e.jsx(yj,{playState:z,playBarState:j,quizData:m,quizNo:l,playWord:I,startRecord:Y}),e.jsx(vj,{isLastPage:S,quizNo:l,totalQuizCnt:m.Quiz.length,changeQuizNo:T}),e.jsx(e.Fragment,{children:W&&e.jsx(Cj,{word:m.Quiz[l-1].Question.Text,phonemeScore:R,changePlayBarState:F})}),e.jsx(e.Fragment,{children:S&&e.jsx(jj,{goTest:U})})]})}),y&&e.jsx(Ne,{isSideOpen:y,currentStep:i,currentStepType:Os,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,changeSideMenu:G,scoreBoardData:p,changeStep:t.changeStep})]})})}const Tj=new N(navigator.userAgent),Ij=Tj.phone(),us=Ij?Oe:He;function Ej({index:t,correctText:o,exampleData:n,checkAnswer:s,onExampleAnimationEndHandler:i}){const{bookInfo:u,studyInfo:d}=r.useContext(se);return e.jsxs("div",{className:`${us.textCard} 
      ${d.mode==="review"&&Number(u.Average)>=70&&n.Text===o?us.correct:""}`,onClick:a=>s(a.currentTarget,n.Text),onAnimationEnd:a=>i(a.currentTarget),children:[e.jsx("div",{className:us.cardNumber,children:Number(t+1)}),e.jsx("div",{className:us.awnserText,children:n.Text})]})}const Bj=new N(navigator.userAgent),Pj=Bj.phone(),Mj=Pj?Oe:He;function Lj({correctText:t,exampleData:o,checkAnswer:n,onExampleAnimationEndHandler:s}){return e.jsx("div",{className:Mj.answers,children:o.map((i,u)=>e.jsx(Ej,{index:u,correctText:t,exampleData:i,checkAnswer:n,onExampleAnimationEndHandler:s}))})}const Rj=new N(navigator.userAgent),Fj=Rj.phone(),Ki=Fj?Oe:He,qj=({meanData:t,lang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question[n];break;default:s=t.Question.Korean}return e.jsxs("div",{className:Ki.meaning,children:[t.Question.SpeechPart,". ",s]})},Hj=({meanData:t,lang:o})=>{const n=ge.upperFirst(o);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question.Britannica?t.Question.Britannica:t.Question[n];break;default:s=t.Question.Britannica}return e.jsxs("div",{className:Ki.sentence,children:[t.Question.SpeechPart,". ",s]})};function Oj({meanData:t,mainMeanLang:o,subMeanLang:n}){return e.jsxs(e.Fragment,{children:[e.jsx(qj,{meanData:t,lang:o}),e.jsx(Hj,{meanData:t,lang:n})]})}const Dj=new N(navigator.userAgent),Vj=Dj.phone(),Wj=Vj?Oe:He;function Gj({quizData:t,quizNo:o}){return e.jsx("div",{className:Wj.questionBox,children:e.jsx(Oj,{meanData:t.Quiz[o-1],mainMeanLang:t.MainMeanLanguage,subMeanLang:t.SubMeanLanguage})})}const Kj=new N(navigator.userAgent),fo=Kj.phone(),ls="Vocabulary Test",Xt=fo?Oe:He;function Uj(t){const{t:o}=de(),{handler:n,studyInfo:s}=r.useContext(se),i=t.currentStep,u=$e(()=>{confirm(o("study.문제를 풀 수 있는 시간이 초과되었습니다. 계속 진행하시겠습니까?"))?I():window.onLogoutStudy()}),d=lt(),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(bv,t,i),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(s.mode),[z,P]=r.useState([]),[C,j]=r.useState(0),[B,R]=r.useState(0),{bottomPopupState:O,changeBottomPopupState:W}=Xe();if(r.useEffect(()=>{!_&&c&&(u.setup(c.QuizTime,!0),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[Y,F]=ut(s.mode,l,c.QuizAnswerCount);u.setup(c.QuizTime,!0),j(F),R(F),s.mode==="staff"?P(c.Quiz[Y-1].Examples):P(ge.shuffle(c.Quiz[Y-1].Examples)),w(l,c.QuizAnswerCount),p(Y)}catch(Y){console.error(Y)}},[c]),r.useEffect(()=>{!_&&!y&&c&&(u.setup(c.QuizTime,!0),j(0),R(0),s.mode==="staff"?P(c.Quiz[x-1].Examples):P(ge.shuffle(c.Quiz[x-1].Examples)),m.current=!1)},[x]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const V=async(Y,F)=>{try{if(!m.current){m.current=!0;const E=c.Quiz[x-1].Question.Text===F,A={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:E},Q=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:i,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:F,tryCount:C+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:E,answerData:A,isFinishStudy:t.lastStep===i});u.stop();const L=await Ie(s.mode,Q);Number(L.result)===0&&(L.resultMessage&&(n.finishStudy={id:Number(L.result),cause:L.resultMessage}),E||R(B+1),j(C+1),S(A),q(Y,E))}}catch(E){console.error(E)}},q=(Y,F)=>{W({isActive:!0,isCorrect:F}),F?d.play(Y,["animate__fadeIn",Xt.correct]):d.play(Y,["animate__headShake",Xt.incorrect])},T=Y=>{setTimeout(()=>{W({isActive:!1,isCorrect:!1}),d.remove(Y,[Xt.correct,Xt.incorrect,"animate__fadeIn","animate__headShake"]),x+1<=c.Quiz.length?p(x+1):g(!0)},1e3)},I=async()=>{try{if(!m.current){m.current=!0;const Y={mobile:"",studentHistoryId:t.studentHistoryId,studyId:t.studyId,bookType:t.bookType,step:`${i}`,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,studentAnswer:"",answerCount:C+1};u.stop();const F=await Ie(s.mode,Y);if(Number(F.result)===0){F.resultMessage&&(n.finishStudy={id:Number(F.result),cause:F.resultMessage});const E={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:C+1,ox:!1};R(B+1),j(C+1),S(E),W({isActive:!0,isCorrect:!1}),G()}}}catch(Y){console.error(Y)}},G=()=>{setTimeout(()=>{W({isActive:!1,isCorrect:!1}),x+1>c.Quiz.length?g(!0):p(x+1)},1500)},U=Y=>{k(Y)};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:i,quizType:ls,comment:o("study.뜻을 보고 올바른 단어를 고르세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(it,{step:i,quizType:ls,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-B,timeMin:u.time.timeMin,timeSec:u.time.timeSec,changeSideMenu:U}),e.jsx("div",{className:`${Xt.comment} animate__animated animate__fadeInLeft`,children:ls}),e.jsxs(Te,{children:[fo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Xt.vocabularyTest4,containerCSS:Xt.container,children:[e.jsx(Gj,{quizData:c,quizNo:x}),e.jsx(ee,{height:20}),e.jsx(Lj,{correctText:c.Quiz[x-1].Question.Text,exampleData:z,checkAnswer:V,onExampleAnimationEndHandler:T})]}),fo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:i,currentStepType:ls,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:U,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:O})]})})})}const Jj="_comment_t5gwr_1",Yj="_wordPlayButton_t5gwr_20",Xj="_txtL_t5gwr_35",Zj="_goNextButton_t5gwr_46",ez="_iconArrowUp_t5gwr_69",tz="_writingActivity1_t5gwr_83",nz="_container_t5gwr_83",sz="_enterBox_t5gwr_90",oz="_correctText_t5gwr_101",iz="_textCard_t5gwr_106",rz="_incorrectText_t5gwr_113",az="_send_t5gwr_155",cz="_awnserText_t5gwr_177",uz="_answers_t5gwr_181",lz="_correctDirection_t5gwr_186",dz="_writingActivity2_t5gwr_192",mz="_tabs_t5gwr_199",xz="_tabButton_t5gwr_203",hz="_active_t5gwr_217",_z="_questionText_t5gwr_222",pz="_writingArea_t5gwr_226",gz="_wordLimitIndicator_t5gwr_250",yz="_limit_t5gwr_253",fz="_words_t5gwr_254",bz="_saveButton_t5gwr_265",vz="_submitButton_t5gwr_287",wz="_goNextStepBox_t5gwr_309",kz="_groupButtons_t5gwr_315",Sz="_revisionReport_t5gwr_321",De={comment:Jj,wordPlayButton:Yj,txtL:Xj,goNextButton:Zj,iconArrowUp:ez,writingActivity1:tz,container:nz,enterBox:sz,correctText:oz,textCard:iz,incorrectText:rz,send:az,awnserText:cz,answers:uz,correctDirection:lz,writingActivity2:dz,tabs:mz,tabButton:xz,active:hz,questionText:_z,writingArea:pz,wordLimitIndicator:gz,limit:yz,words:fz,saveButton:bz,submitButton:vz,goNextStepBox:wz,groupButtons:kz,revisionReport:Sz},jz="_comment_byvmw_1",zz="_wordPlayButton_byvmw_20",$z="_txtL_byvmw_34",Cz="_goNextButton_byvmw_45",Qz="_iconArrowUp_byvmw_68",Az="_writingActivity1_byvmw_82",Nz="_container_byvmw_82",Tz="_enterBox_byvmw_89",Iz="_correctText_byvmw_105",Ez="_textCard_byvmw_110",Bz="_incorrectText_byvmw_117",Pz="_send_byvmw_153",Mz="_awnserText_byvmw_175",Lz="_answers_byvmw_179",Rz="_correctDirection_byvmw_184",Fz="_writingActivity2_byvmw_190",qz="_tabs_byvmw_197",Hz="_tabButton_byvmw_201",Oz="_active_byvmw_215",Dz="_questionText_byvmw_220",Vz="_writingArea_byvmw_224",Wz="_wordLimitIndicator_byvmw_247",Gz="_limit_byvmw_250",Kz="_words_byvmw_251",Uz="_saveButton_byvmw_262",Jz="_submitButton_byvmw_284",Yz="_goNextStepBox_byvmw_306",Xz="_groupButtons_byvmw_313",Zz="_revisionReport_byvmw_319",Ve={comment:jz,wordPlayButton:zz,txtL:$z,goNextButton:Cz,iconArrowUp:Qz,writingActivity1:Az,container:Nz,enterBox:Tz,correctText:Iz,textCard:Ez,incorrectText:Bz,send:Pz,awnserText:Mz,answers:Lz,correctDirection:Rz,writingActivity2:Fz,tabs:qz,tabButton:Hz,active:Oz,questionText:Dz,writingArea:Vz,wordLimitIndicator:Wz,limit:Gz,words:Kz,saveButton:Uz,submitButton:Jz,goNextStepBox:Yz,groupButtons:Xz,revisionReport:Zz};async function e$(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/writing-activity-1?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({ContentsId:Number(a.ContentsId),IsQuizTimeoutIncorrect:!!a.isQuizTimeoutIncorrect,QuizAnswerCount:Number(a.QuizAnswerCount),QuizTime:Number(a.QuizTime),Quiz:a.Quiz.map(h=>({QuizId:h.QuizId.toString(),QuizNo:Number(h.QuizNo),Question:{Text:h.Question.Text,Sound:h.Question.Sound},Examples:h.Examples.map(_=>({Text:_.Text}))}))}))}async function $o(t){const{bookType:o,studyId:n,studentHistoryId:s}=t,u=`${Pe}/writing-activity-2?studentHistoryId=${s}&studyId=${n}&bookType=${o}`;return Ee(u,async a=>({QuizTime:a.QuizTime,Title:a.Title,Author:a.Author,Writing:a.Writing,Rewriting:a.Rewriting}))}const t$=new N(navigator.userAgent),n$=t$.phone(),mi=n$?Ve:De;function s$({playState:t,onPlay:o}){return e.jsxs("div",{className:mi.wordPlayButton,onClick:()=>o(),children:[t===""?e.jsx(Fe,{isColor:!0,width:34,height:34}):e.jsx(qe,{isColor:!0,width:34,height:34}),e.jsx("span",{className:mi.txtL,children:"Play Sound"})]})}const o$=new N(navigator.userAgent),i$=o$.phone(),xi=i$?Ve:De;function r$(){return e.jsx("div",{className:xi.correctDirection,children:e.jsx("div",{className:xi.iconArrowUp})})}const a$=new N(navigator.userAgent),c$=a$.phone(),hi=c$?Ve:De;function u$({exampleRefs:t,index:o,example:n,selectWord:s}){return e.jsx("div",{ref:i=>t.current[o]=i,className:`${hi.textCard}`,onClick:()=>s(o,n.Text),children:e.jsx("div",{className:hi.awnserText,children:n.Text})})}const l$=new N(navigator.userAgent),d$=l$.phone(),m$=d$?Ve:De;function x$({exampleRefs:t,exampleData:o,selectWord:n}){return e.jsx("div",{className:m$.answers,children:o.map((s,i)=>e.jsx(u$,{exampleRefs:t,index:i,example:s,selectWord:n}))})}const h$=new N(navigator.userAgent),_$=h$.phone(),_i=_$?Ve:De;function p$({text:t,removeWord:o}){return e.jsx("div",{className:`${_i.textCard}`,onClick:()=>o(t),children:e.jsx("div",{className:_i.awnserText,children:t})})}const g$=new N(navigator.userAgent),y$=g$.phone(),Ds=y$?Ve:De;function f$({sentenceState:t,sentenceData:o,removeWord:n}){return e.jsx("div",{className:`${Ds.enterBox} ${t==="correct"?Ds.correctText:t==="incorrect"?Ds.incorrectText:""}`,children:o.map((s,i)=>e.jsx(p$,{text:s,removeWord:n}))})}const b$=new N(navigator.userAgent),v$=b$.phone(),w$=v$?Ve:De;function k$({goNextQuiz:t}){return e.jsx("div",{onClick:()=>t(),className:`${w$.goNextButton} animate__animated animate__flash`,children:"Next"})}const S$=new N(navigator.userAgent),Ui=S$.phone(),ds="Writing Activity",dn=Ui?Ve:De;function j$(t){const{t:o}=de(),{bookInfo:n,handler:s,studyInfo:i}=r.useContext(se),u=t.currentStep,d=$e(()=>{window.onLogoutStudy()}),[a,h]=r.useState("animate__bounceInRight"),{isStepIntro:_,closeStepIntro:v}=ze(),{isResultShow:y,changeResultShow:g}=Re(),[b,k]=r.useState(!1),m=r.useRef(!0),[c,l]=Ce(e$,t,u),[x,p]=r.useState(1),{scoreBoardData:f,setStudentAnswers:w,addStudentAnswer:S,makeUserAnswerData:M}=Qe(i.mode),[z,P]=r.useState(0),[C,j]=r.useState(0),[B,R]=r.useState(""),O=r.useRef([]),[W,V]=r.useState([]),[q,T]=r.useState([]),{bottomPopupState:I,changeBottomPopupState:G}=Xe(),[U,Y]=r.useState(!1),{playState:F,playAudio:E,stopAudio:A}=Le();if(r.useEffect(()=>{!_&&c&&(d.setup(c.QuizTime,!0),n.BookLevel.includes("K")&&E(c.Quiz[x-1].Question.Sound),m.current=!1)},[_]),r.useEffect(()=>{if(c)try{const[H,J]=ut(i.mode,l,c.QuizAnswerCount);P(J),j(J),i.mode==="student"?V(ge.shuffle(c.Quiz[H-1].Examples)):V(c.Quiz[H-1].Examples),w(l,c.QuizAnswerCount),p(H)}catch(H){console.error(H)}},[c]),r.useEffect(()=>{c&&B===""&&q.length===c.Quiz[x-1].Examples.length&&te()},[q]),r.useEffect(()=>{!_&&!y&&c&&(i.mode==="student"?V(ge.shuffle(c.Quiz[x-1].Examples)):V(c.Quiz[x-1].Examples),j(0),P(0),R(""),X(),n.BookLevel.includes("K")&&E(c.Quiz[x-1].Question.Sound),m.current=!1)},[x]),r.useEffect(()=>{U&&c&&m.current&&A()},[U]),!c)return e.jsx(e.Fragment,{children:"Loading..."});const Q=(H,J)=>{O.current[H].classList.add(dn.send);const D=[...q,J];T(D)},L=H=>{if(!m.current){const J=W.findIndex(Z=>Z.Text===H),D=q.filter(Z=>Z!==H);O.current[J].classList.remove(dn.send),T(D)}},X=()=>{try{O.current&&O.current.map(H=>H.classList.remove(dn.send))}catch{}finally{T([])}},te=async()=>{try{if(!m.current){m.current=!0,d.stop(),A();const H=c.Quiz[x-1].Question.Text,J=q.reduce((ve,_e)=>ve+(" "+_e)),D=H===J;let Z=C;const K={quizNo:x,maxCount:c.QuizAnswerCount,answerCount:z+1,ox:D},ie=M({mobile:"",studyId:t.studyId,studentHistoryId:t.studentHistoryId,bookType:t.bookType,step:u,quizId:c.Quiz[x-1].QuizId,quizNo:c.Quiz[x-1].QuizNo,currentQuizNo:x,correct:c.Quiz[x-1].Question.Text,selectedAnswer:J,tryCount:z+1,maxQuizCount:c.QuizAnswerCount,quizLength:c.Quiz.length,isCorrect:D,answerData:K,isFinishStudy:t.lastStep===u}),me=await Ie(i.mode,ie);Number(me.result)===0&&(me.resultMessage&&(s.finishStudy={id:Number(me.result),cause:me.resultMessage}),D||j(C+1),S(K),P(z+1),oe(D,Z+1))}}catch(H){console.error(H)}},oe=(H,J)=>{R(H?"correct":"incorrect"),G({isActive:!0,isCorrect:H}),setTimeout(()=>{if(G({isActive:!1,isCorrect:!1}),H)if(n.BookLevel.includes("K"))ce();else{const D=()=>{Y(!0)};E(c.Quiz[x-1].Question.Sound,D)}else if(J>=c.QuizAnswerCount){const D=c.Quiz[x-1].Examples.map(Z=>Z.Text);if(T([...D]),n.BookLevel.includes("K"))ce();else{const Z=()=>{Y(!0)};E(c.Quiz[x-1].Question.Sound,Z)}}else d.setup(c.QuizTime,!0),R(""),X(),n.BookLevel.includes("K")&&E(c.Quiz[x-1].Question.Sound),m.current=!1},2e3)},ce=()=>{A();const H=()=>{if(X(),R(""),x+1>c.Quiz.length)g(!0);else if(n.BookLevel.includes("K"))d.setup(c.QuizTime,!0),A(),p(x+1);else{const J=()=>{Y(!0)};E(c.Quiz[x-1].Question.Sound,J)}};E(c.Quiz[x-1].Question.Sound,H)},ae=()=>{x+1>c.Quiz.length?(A(),d.stop(),g(!0)):(d.setup(c.QuizTime,!0),A(),p(x+1),Y(!1))},xe=H=>{k(H)},re=()=>{F===""?E(c.Quiz[x-1].Question.Sound):m.current||A()};return e.jsx(e.Fragment,{children:_?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&v()},children:e.jsx(Me,{step:u,quizType:ds,comment:o("study.카드를 순서대로 나열하여 올바른 문장을 완성하세요."),onStepIntroClozeHandler:()=>{h("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(it,{step:u,quizType:ds,quizAnswerCount:c.QuizAnswerCount,studentAnswer:f,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:x,totalQuizCnt:Object.keys(c.Quiz).length,life:c.QuizAnswerCount-C,timeMin:d.time.timeMin,timeSec:d.time.timeSec,changeSideMenu:xe}),e.jsx("div",{className:`${dn.comment} animate__animated animate__fadeInLeft`,children:ds}),e.jsxs(Te,{children:[e.jsx(s$,{playState:F,onPlay:re}),e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:dn.writingActivity1,containerCSS:dn.container,children:[e.jsx(f$,{sentenceState:B,sentenceData:q,removeWord:L}),e.jsx(e.Fragment,{children:U?e.jsx(k$,{goNextQuiz:ae}):e.jsxs(e.Fragment,{children:[e.jsx(r$,{}),e.jsx(x$,{exampleRefs:O,exampleData:W,selectWord:Q})]})})]}),Ui?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),b&&e.jsx(Ne,{isSideOpen:b,currentStep:u,currentStepType:ds,quizLength:c.Quiz.length,maxAnswerCount:c.QuizAnswerCount,changeSideMenu:xe,scoreBoardData:f,changeStep:t.changeStep}),e.jsx(Ze,{bottomPopupState:I})]})})})}const Co=()=>{const[t,o]=r.useState("loading");return{quizState:t,changeQuizState:s=>{if(t==="checking"&&s!=="studying")return!1;o(s)}}},z$=new N(navigator.userAgent),$$=z$.phone(),yt=$$?gs:ps;function Vs({currentSubmitCount:t,maxSubmitCount:o,noWritingActivity:n,goWritingActivity:s}){const{t:i}=de();return e.jsx("div",{className:yt.revisionFreeIntro,children:e.jsxs("div",{className:`${yt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:yt.stepOrder,children:"Step5"}),e.jsx("div",{className:yt.quizType,children:"Writing Activity"}),e.jsx("div",{className:yt.comment,children:i("study.글쓰기를 하시겠어요?")}),e.jsxs("div",{className:yt.revisionBoard,children:[e.jsxs("div",{className:yt.txtLabel,children:[i("study.남은 첨삭"),":"]}),e.jsxs("div",{className:yt.txtCount,children:[o-t," / ",o]}),e.jsxs("div",{className:yt.txtLabel,children:[i("study.첨삭 완료"),":"]}),e.jsx("div",{className:yt.txtCount,children:t})]}),e.jsxs("div",{className:yt.selectBox,children:[e.jsx("div",{className:yt.passButton,onClick:()=>n(),children:"Pass"}),e.jsx("div",{className:yt.goButton,onClick:()=>s(),children:"Go"})]})]})})}const C$=new N(navigator.userAgent),Q$=C$.phone(),Zt=Q$?gs:ps;function A$({unit:t,goWritingActivity:o}){const{t:n}=de();return e.jsx("div",{className:Zt.stepIntro,children:e.jsxs("div",{className:`${Zt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:Zt.stepOrder,children:"Step5"}),e.jsx("div",{className:Zt.quizType,children:"Writing Activity"}),e.jsx("div",{className:Zt.comment,children:n("study.글쓰기 후 첨삭을 받으세요.")}),e.jsx("div",{className:Zt.readingUnit,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${t}_13.png`,alt:""})}),e.jsx("div",{className:Zt.startButton,onClick:()=>o(),children:"Start"})]})})}const N$=new N(navigator.userAgent),T$=N$.phone(),ft=T$?zt:jt;function I$({currentSubmitCount:t,maxSubmitCount:o,noWritingActivity:n}){const{t:s}=de();return e.jsx("div",{className:ft.submitRevision,children:e.jsxs("div",{className:`${ft.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:ft.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:ft.title,children:s("study.이 달의 첨삭")}),e.jsx("div",{className:ft.comment,children:s("study.수고했어요! 이달의 남은 첨삭은 모두 사용했어요.")}),e.jsxs("div",{className:ft.revisionBoard,children:[e.jsxs("div",{className:ft.txtLabel,children:[s("study.남은 첨삭"),":"]}),e.jsxs("div",{className:ft.txtCount,children:[o-t," / ",o]}),e.jsxs("div",{className:ft.txtLabel,children:[s("study.첨삭 완료"),":"]}),e.jsx("div",{className:ft.txtCount,children:t})]}),e.jsx("div",{className:`${ft.selectBox} ${ft.revisionDone}`,children:e.jsx("div",{className:ft.noButton,onClick:()=>n(),children:"Done"})})]})})}function Ji({mode:t,type:o,currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:i,noWritingActivity:u}){const d=en();let a;switch(o){case"In School":case"Overseas":switch(t){case"All":a=e.jsx(A$,{unit:d,goWritingActivity:i});break;case"Free":a=e.jsx(Vs,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:i,noWritingActivity:u});break;case"Limit":s-n<1?a=e.jsx(I$,{currentSubmitCount:n,maxSubmitCount:s,noWritingActivity:u}):a=e.jsx(Vs,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:i,noWritingActivity:u});break}break;case"No Revision":a=e.jsx(Vs,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:i,noWritingActivity:u});break}return e.jsx(e.Fragment,{children:a})}const E$=new N(navigator.userAgent),B$=E$.phone(),pi=B$?Ve:De;function P$({currentTabIndex:t,index:o,changeTabNo:n}){return e.jsx("div",{className:`${pi.tabButton} ${t===o?pi.active:""}`,onClick:()=>n(o),children:o+1})}const M$=new N(navigator.userAgent),L$=M$.phone(),R$=L$?Ve:De;function F$({currentTabIndex:t,questionData:o,changeTabNo:n}){return e.jsx("div",{className:R$.tabs,children:o.map((s,i)=>e.jsx(P$,{currentTabIndex:t,index:i,changeTabNo:n}))})}const q$=new N(navigator.userAgent),H$=q$.phone(),O$=H$?Ve:De;function D$({question:t}){return e.jsx("div",{className:O$.questionText,children:t})}const V$=new N(navigator.userAgent),W$=V$.phone(),G$=W$?Ve:De;function K$({wordMinCount:t,wordMaxCount:o,answerData:n,onChangeHandler:s}){return e.jsx("div",{className:G$.writingArea,children:e.jsx("textarea",{placeholder:`Please fill out within ${t} to ${o} characters.`,value:n,onChange:i=>s(i.currentTarget.value)})})}const U$=new N(navigator.userAgent),J$=U$.phone(),Y$=J$?Ve:De;function X$({saveAnswer:t}){return e.jsx("div",{className:Y$.saveButton,onClick:()=>t(),children:"Save"})}const Z$=new N(navigator.userAgent),eC=Z$.phone(),tC=eC?Ve:De;function Yi({isSubmit:t,submitAnswer:o}){return e.jsx("div",{style:t?{}:{opacity:"0.5",cursor:"default"},className:tC.submitButton,onClick:()=>o(),children:"Submit"})}const nC=new N(navigator.userAgent),sC=nC.phone(),ms=sC?Ve:De;function oC({isSubmit:t,wordMinCount:o,wordMaxCount:n,answerLength:s,saveAnswer:i,submitAnswer:u}){return e.jsxs("div",{className:ms.goNextStepBox,children:[e.jsxs("div",{className:ms.wordLimitIndicator,children:[e.jsxs("div",{className:ms.limit,children:["• Word Limit: ",o,"~",n]}),e.jsxs("div",{className:ms.words,children:["• The number of words: ",s]})]}),e.jsx(X$,{saveAnswer:i}),e.jsx(Yi,{isSubmit:t,submitAnswer:u})]})}const iC=new N(navigator.userAgent),rC=iC.phone(),bt=rC?zt:jt;function Ws({currentSubmitCount:t,maxSubmitCount:o,submitNoRevision:n}){const{t:s}=de();return e.jsx("div",{className:bt.submitRevision,children:e.jsxs("div",{className:`${bt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:bt.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:bt.title,children:s("study.이 달의 첨삭")}),e.jsx("div",{className:bt.comment,children:s("study.수고했어요! 이달의 남은 첨삭은 모두 사용했어요.")}),e.jsxs("div",{className:bt.revisionBoard,children:[e.jsxs("div",{className:bt.txtLabel,children:[s("study.남은 첨삭"),":"]}),e.jsxs("div",{className:bt.txtCount,children:[o-t," / ",o]}),e.jsxs("div",{className:bt.txtLabel,children:[s("study.첨삭 완료"),":"]}),e.jsx("div",{className:bt.txtCount,children:t})]}),e.jsx("div",{className:`${bt.selectBox} ${bt.revisionDone}`,children:e.jsx("div",{className:bt.noButton,onClick:()=>n(),children:"Done"})})]})})}const aC=new N(navigator.userAgent),cC=aC.phone(),pt=cC?zt:jt;function uC({currentSubmitCount:t,maxSubmitCount:o,submitWritingActivity:n}){const{t:s}=de();return e.jsx("div",{className:pt.submitRevision,children:e.jsxs("div",{className:`${pt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:pt.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:pt.title,children:s("study.이 달의 첨삭")}),e.jsxs("div",{className:pt.revisionBoard,children:[e.jsxs("div",{className:pt.txtLabel,children:[s("study.목표 첨삭"),":"]}),e.jsx("div",{className:pt.txtCount,children:o}),e.jsxs("div",{className:pt.txtLabel,children:[s("study.남은 첨삭"),":"]}),e.jsx("div",{className:pt.txtCount,children:o-t-1}),e.jsxs("div",{className:pt.txtLabel,children:[s("study.첨삭 완료"),":"]}),e.jsxs("div",{className:pt.txtCount,children:[t+1," / ",o]})]}),e.jsx("div",{className:`${pt.selectBox} ${pt.revisionDone}`,children:e.jsx("div",{className:pt.yesButton,onClick:()=>n(),children:"Done"})})]})})}const lC=new N(navigator.userAgent),dC=lC.phone(),vt=dC?zt:jt;function gi({currentSubmitCount:t,maxSubmitCount:o,submitNoRevision:n,submitWritingActivity:s}){const{t:i}=de();return e.jsx("div",{className:vt.submitRevision,children:e.jsxs("div",{className:`${vt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:vt.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:vt.title,children:i("study.이 달의 첨삭")}),e.jsx("div",{className:vt.comment,children:i("study.첨삭을 받으시겠어요?")}),e.jsxs("div",{className:vt.revisionBoard,children:[e.jsxs("div",{className:vt.txtLabel,children:[i("study.남은 첨삭"),":"]}),e.jsxs("div",{className:vt.txtCount,children:[o-t," / ",o]}),e.jsxs("div",{className:vt.txtLabel,children:[i("study.첨삭 완료"),":"]}),e.jsx("div",{className:vt.txtCount,children:t})]}),e.jsxs("div",{className:vt.selectBox,children:[e.jsx("div",{className:vt.noButton,onClick:()=>n(),children:"No"}),e.jsx("div",{className:vt.yesButton,onClick:()=>s(),children:"Yes"})]})]})})}function mC({mode:t,type:o,currentSubmitCount:n,maxSubmitCount:s,submitWritingActivity:i,submitNoRevision:u}){let d;switch(o){case"In School":case"Overseas":switch(t){case"All":case"Free":s-n<1?d=e.jsx(Ws,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:u}):d=e.jsx(gi,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:u,submitWritingActivity:i});break;case"Limit":s-n<1?d=e.jsx(Ws,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:u}):d=e.jsx(uC,{currentSubmitCount:n,maxSubmitCount:s,submitWritingActivity:i});break}break;case"No Revision":s-n<1?d=e.jsx(Ws,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:u}):d=e.jsx(gi,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:u,submitWritingActivity:i});break}return e.jsx(e.Fragment,{children:d})}const xC=new N(navigator.userAgent),bo=xC.phone(),yi="Writing Activity",Gs=bo?Ve:De;function hC(t){const{studyInfo:o,handler:n}=r.useContext(se),s=t.currentStep,i=$e(()=>{window.onLogoutStudy()}),[u,d]=r.useState("animate__bounceInRight"),{isStepIntro:a,closeStepIntro:h}=ze(),{isResultShow:_,changeResultShow:v}=Re(),[y,g]=r.useState(!1),{quizState:b,changeQuizState:k}=Co(),[m,c]=Ce($o,t,s),{scoreBoardData:l,setStudentAnswers:x}=Qe(o.mode),[p,f]=r.useState(0),[w,S]=r.useState([]),[M,z]=r.useState(!1);if(r.useEffect(()=>{!a&&m&&(i.setup(m.QuizTime,!0),k("studying"))},[a]),r.useEffect(()=>{if(m)try{if(c.length>0){const I=[];c.map(G=>I.push(G.TempText)),S([...I])}else{const I=new Array(m.Writing.Question.length).fill("");switch(m.Writing.Activity){case"Book Report":I[0]=`The Title is ${m.Title}`,I[1]=`The author is ${m.Author}`;break;case"Book Review":I[0]="Describe briefly what happens in the book or the main idea.",I[1]="What are interesting features of the book?",I[2]="Describe some morals or new knowledge you've learnt from the book.";break;case"KWL Chart":I[0]="What I know",I[1]="What I want to know",I[2]="What I learned";break;case"Story Map":I[0]="What happened first?",I[1]="What happened next?",I[2]="What happened last?";break}S([...I])}x(c,0)}catch(I){console.error(I)}},[m]),r.useEffect(()=>{if(w&&m){const I=w.filter(U=>U==="").length,G=V();I===0&&G>=m.Writing.WordMinCount&&G<=m.Writing.WordMaxCount?z(!0):z(!1)}},[w]),r.useEffect(()=>{if(!a&&m&&b==="studying"){const I=setInterval(()=>{q()},3e5);return()=>{clearInterval(I)}}},[b,w]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const P=()=>{d("animate__bounceOutLeft")},C=async()=>{if(k("checking"),b==="loading"){const I=w.join("┒"),G={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,saveType:"R",writeText:I,isFinishStudy:!0},U=await Sn(o.mode,G);Number(U.result)===0&&(n.finishStudy={id:Number(U.result),cause:U.resultMessage},t.onFinishActivity())}},j=async()=>{if(k("checking"),b==="studying"){const I=w.join("┒"),G={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,saveType:"S",writeText:I,isFinishStudy:!0},U=await Sn(o.mode,G);Number(U.result)===0&&(n.finishStudy={id:Number(U.result),cause:U.resultMessage},t.onFinishActivity())}},B=async()=>{if(k("checking"),b==="studying"){const I=w.join("┒"),G={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,saveType:"E",writeText:I,isFinishStudy:!0},U=await Sn(o.mode,G);Number(U.result)===0&&(n.finishStudy={id:Number(U.result),cause:U.resultMessage},t.onFinishActivity())}},R=()=>{M&&v(!0)},O=I=>{f(I)},W=(I="")=>{let G=w!==void 0?[...w]:[I];G[p]=I,S([...G])},V=()=>w.reduce((G,U)=>G+(U===""?0:ge.trimStart(ge.trimEnd(U.replaceAll(/\s+/g," "))).split(" ").length),0),q=async()=>{try{k("checking");const I=w.join("┒");if(b==="studying"){const G={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,saveType:"X",writeText:I},U=await Sn(o.mode,G);Number(U.result)===0&&k("studying")}}catch(I){console.error(I)}},T=I=>{g(I)};return e.jsx(e.Fragment,{children:a?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&h()},children:e.jsx(Ji,{mode:m.Writing.Mode,type:m.Writing.Type,currentSubmitCount:m.Writing.CurrentSubmitCount,maxSubmitCount:m.Writing.MaxSubmitCount,goWritingActivity:P,noWritingActivity:C})}):e.jsx(e.Fragment,{children:_?e.jsx("div",{className:"animate__animated ",children:e.jsx(mC,{mode:m.Writing.Mode,type:m.Writing.Type,currentSubmitCount:m.Writing.CurrentSubmitCount,maxSubmitCount:m.Writing.MaxSubmitCount,submitWritingActivity:j,submitNoRevision:B})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:p+1,totalQuizCnt:m.Writing.Question.length,life:1,timeMin:i.time.timeMin,timeSec:i.time.timeSec,changeSideMenu:T}),e.jsx("div",{className:`${Gs.comment} animate__animated animate__fadeInLeft`,children:yi}),e.jsxs(Te,{children:[bo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsxs(Be,{typeCSS:Gs.writingActivity2,containerCSS:Gs.container,children:[e.jsx(F$,{currentTabIndex:p,questionData:m.Writing.Question,changeTabNo:O}),e.jsx(D$,{question:m.Writing.Question[p]}),e.jsx(K$,{wordMinCount:m.Writing.WordMinCount,wordMaxCount:m.Writing.WordMaxCount,answerData:w[p],onChangeHandler:W}),e.jsx(oC,{isSubmit:M,wordMinCount:m.Writing.WordMinCount,wordMaxCount:m.Writing.WordMaxCount,answerLength:V(),saveAnswer:q,submitAnswer:R})]}),bo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),y&&e.jsx(Ne,{isSideOpen:y,currentStep:s,currentStepType:yi,quizLength:0,maxAnswerCount:0,scoreBoardData:l,changeSideMenu:T,changeStep:t.changeStep})]})})})}const _C=new N(navigator.userAgent),vo=_C.phone(),fi="Writing Activity",Ks=vo?Ve:De;function pC(t){const{studyInfo:o,handler:n}=r.useContext(se),s=t.currentStep,i=$e(()=>{window.onLogoutStudy()}),[u,d]=r.useState("animate__bounceInRight"),{isStepIntro:a,closeStepIntro:h}=ze(),[_,v]=r.useState(!1),{quizState:y,changeQuizState:g}=Co(),[b,k]=Ce($o,t,s),{scoreBoardData:m,setStudentAnswers:c}=Qe(o.mode),[l,x]=r.useState([]);if(r.useEffect(()=>{!a&&b&&(i.setup(b.QuizTime,!0),g("studying"))},[a]),r.useEffect(()=>{if(b)try{if(k.length>0){const S=[];k.map(M=>S.push(M.TempText)),x([...S])}else{const S=new Array(b.Writing.Question.length).fill("");switch(b.Writing.Activity){case"Book Report":S[0]=`The Title is ${b.Title}`,S[1]=`The author is ${b.Author}`;break;case"Book Review":S[0]="Describe briefly what happens in the book or the main idea.",S[1]="What are interesting features of the book?",S[2]="Describe some morals or new knowledge you've learnt from the book.";break;case"KWL Chart":S[0]="What I know",S[1]="What I want to know",S[2]="What I learned";break;case"Story Map":S[0]="What happened first?",S[1]="What happened next?",S[2]="What happened last?";break}x([...S])}c(k,0)}catch(S){console.error(S)}},[b]),!b)return e.jsx(e.Fragment,{children:"Loading..."});const p=()=>{d("animate__bounceOutLeft")},f=async()=>{if(g("checking"),y==="loading"){const S=l.join("┒"),M={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,saveType:"R",writeText:S,isFinishStudy:!0},z=await Sn(o.mode,M);Number(z.result)===0&&(n.finishStudy={id:Number(z.result),cause:z.resultMessage},t.onFinishActivity())}},w=S=>{v(S)};return e.jsx(e.Fragment,{children:a?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&h()},children:e.jsx(Ji,{mode:b.Writing.Mode,type:b.Writing.Type,currentSubmitCount:b.Writing.CurrentSubmitCount,maxSubmitCount:b.Writing.MaxSubmitCount,goWritingActivity:p,noWritingActivity:f})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:1,totalQuizCnt:b.Writing.Question.length,life:1,timeMin:i.time.timeMin,timeSec:i.time.timeSec,changeSideMenu:w}),e.jsx("div",{className:`${Ks.comment} animate__animated animate__fadeInLeft`,children:fi}),e.jsxs(Te,{children:[vo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsx(Be,{typeCSS:Ks.writingActivity2,containerCSS:Ks.container,children:e.jsx("div",{children:b.Writing.Question.map((S,M)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:700},children:["Q. ",S]}),e.jsxs("div",{children:["A. ",k[M].TempText]}),e.jsx("br",{})]}))})}),vo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),_&&e.jsx(Ne,{isSideOpen:_,currentStep:s,currentStepType:fi,quizLength:0,maxAnswerCount:0,scoreBoardData:m,changeSideMenu:w,changeStep:t.changeStep})]})})}const gC=new N(navigator.userAgent),yC=gC.phone(),St=yC?gs:ps;function fC({currentSubmitCount:t,maxSubmitCount:o,goWritingActivity:n}){const{t:s}=de();return e.jsx("div",{className:St.revisionFreeIntro,children:e.jsxs("div",{className:`${St.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:St.stepOrder,children:"Step5"}),e.jsx("div",{className:St.quizType,children:"Writing Activity(R)"}),e.jsx("div",{className:St.comment,children:s("study.글쓰기를 하시겠어요?")}),e.jsxs("div",{className:St.revisionBoard,children:[e.jsxs("div",{className:St.txtLabel,children:[s("study.남은 첨삭"),":"]}),e.jsxs("div",{className:St.txtCount,children:[o-t," / ",o]}),e.jsxs("div",{className:St.txtLabel,children:[s("study.첨삭 완료"),":"]}),e.jsx("div",{className:St.txtCount,children:t})]}),e.jsx("div",{style:{display:"flex"},className:St.selectBox,children:e.jsx("div",{className:St.goButton,onClick:()=>n(),children:"Go"})})]})})}const bC=new N(navigator.userAgent),vC=bC.phone(),wC=vC?Ve:De;function kC({wordMinCount:t,wordMaxCount:o,answerData:n,isRewriting:s,onChangeHandler:i}){return e.jsx("div",{className:wC.writingArea,children:e.jsx("textarea",{placeholder:`Please fill out within ${t} to ${o} characters.`,disabled:!s,onChange:u=>i(u.currentTarget.value),value:n.join(`

`)})})}const SC=new N(navigator.userAgent),jC=SC.phone(),xs=jC?Ve:De;function zC({isSubmit:t,wordMinCount:o,wordMaxCount:n,answerLength:s,submitAnswer:i}){return e.jsxs("div",{className:xs.goNextStepBox,children:[e.jsxs("div",{className:xs.wordLimitIndicator,children:[e.jsxs("div",{className:xs.limit,children:["• Word Limit: ",o,"~",n]}),e.jsxs("div",{className:xs.words,children:["• The number of words: ",s]})]}),e.jsx(Yi,{isSubmit:t,submitAnswer:i})]})}const $C=new N(navigator.userAgent),CC=$C.phone(),QC=CC?Ve:De;function AC({revisionImageTop:t,revisionImageBottom:o,comment:n}){return e.jsxs("div",{className:QC.revisionReport,children:[e.jsx("img",{src:t,alt:""}),e.jsx("img",{src:o,alt:""}),e.jsx("span",{children:n})]})}const NC=new N(navigator.userAgent),wo=NC.phone(),bi="Writing Activity",Us=wo?Ve:De;function TC(t){const{studyInfo:o,handler:n}=r.useContext(se),s=t.currentStep,i=$e(()=>{window.onLogoutStudy()}),[u,d]=r.useState("animate__bounceInRight"),{isStepIntro:a,closeStepIntro:h}=ze(),[_,v]=r.useState(!1),{quizState:y,changeQuizState:g}=Co(),[b,k]=Ce($o,t,"7"),{scoreBoardData:m,setStudentAnswers:c}=Qe(o.mode),[l,x]=r.useState([]),[p,f]=r.useState(!1);if(r.useEffect(()=>{!a&&b&&(i.setup(b.QuizTime,!0),g("studying"))},[a]),r.useEffect(()=>{if(b)try{if(k.length>0){const C=[];k.map(j=>C.push(j.TempText)),x([...C])}else{const C=new Array(b.Writing.Question.length).fill("");switch(b.Writing.Activity){case"Book Report":C[0]=`The Title is ${b.Title}`,C[1]=`The author is ${b.Author}`;break;case"Book Review":C[0]="Describe briefly what happens in the book or the main idea.",C[1]="What are interesting features of the book?",C[2]="Describe some morals or new knowledge you've learnt from the book.";break;case"KWL Chart":C[0]="What I know",C[1]="What I want to know",C[2]="What I learned";break;case"Story Map":C[0]="What happened first?",C[1]="What happened next?",C[2]="What happened last?";break}x([...C])}c(k,0)}catch(C){console.error(C)}},[b]),r.useEffect(()=>{if(l&&b){const C=l.filter(B=>B==="").length,j=z();C===0&&j>=b.Writing.WordMinCount&&j<=b.Writing.WordMaxCount?f(!0):f(!1)}},[l]),!b)return e.jsx(e.Fragment,{children:"Loading..."});const w=()=>{d("animate__bounceOutLeft")},S=async()=>{if(g("checking"),y==="studying"){const C=l.join(" "),j={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,writeText:C},B=await gr(j);Number(B.result)===0&&(n.finishStudy={id:Number(B.result),cause:B.resultMessage},t.onFinishActivity())}},M=(C="")=>{let j=l!==void 0?[...l]:[C];j=C.split(`

`),x([...j])},z=()=>l.reduce((j,B)=>j+(B===""?0:ge.trimStart(ge.trimEnd(B.replaceAll(/\s+/g," "))).split(" ").length),0),P=C=>{v(C)};return e.jsx(e.Fragment,{children:a?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&h()},children:e.jsx(fC,{currentSubmitCount:b.Writing.CurrentSubmitCount,maxSubmitCount:b.Writing.MaxSubmitCount,goWritingActivity:w})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{quizNumber:1,totalQuizCnt:b.Writing.Question.length,life:1,timeMin:i.time.timeMin,timeSec:i.time.timeSec,changeSideMenu:P}),e.jsx("div",{className:`${Us.comment} animate__animated animate__fadeInLeft`,children:bi}),e.jsxs(Te,{children:[wo?e.jsx(e.Fragment,{}):e.jsx(ee,{height:15}),e.jsx(Be,{typeCSS:Us.writingActivity2,containerCSS:Us.container,children:b.Rewriting&&e.jsxs(e.Fragment,{children:[e.jsx(AC,{revisionImageTop:b.Rewriting.ReWritingImage1,revisionImageBottom:b.Rewriting.ReWritingImage2,comment:b.Rewriting.ReWritingComment}),e.jsx(kC,{wordMinCount:b.Writing.WordMinCount,wordMaxCount:b.Writing.WordMaxCount,answerData:l,isRewriting:b.Rewriting.IsReWriting,onChangeHandler:M}),b.Rewriting.IsReWriting&&e.jsx(zC,{isSubmit:p,wordMinCount:b.Writing.WordMinCount,wordMaxCount:b.Writing.WordMaxCount,answerLength:z(),submitAnswer:S})]})}),wo?e.jsx(ee,{height:5}):e.jsx(ee,{height:15})]}),_&&e.jsx(Ne,{isSideOpen:_,currentStep:s,currentStepType:bi,quizLength:0,maxAnswerCount:0,scoreBoardData:m,changeSideMenu:P,changeStep:t.changeStep})]})})}const IC=new N(navigator.userAgent),Xi=t=>{const{t:o}=de(),n=en(),{studyInfo:s,bookInfo:i,handler:u}=r.useContext(se);r.useEffect(()=>{if(s.availableQuizStatus===1){alert(o("common.ReTest 정책으로 당일 재학습 불가"));try{window.onExitStudy()}catch{location.replace("/")}}else if(s.availableQuizStatus===2){alert(o("common.일일 획득 가능 포인트 초과"));try{window.onExitStudy()}catch{location.replace("/")}}},[]);let d=s.startStep;i.RevisionStatusCode==="028010"&&s.openSteps.find(w=>w===5)&&(d=5);const[a,h]=r.useState(d);r.useEffect(()=>{s.startStep=a},[a]);const[_,v]=r.useState(!s.isPassedVocabularyPractice||s.mode!=="student"),y=s.mappedStepActivity[a-1],g=()=>{const f=s.openSteps.findIndex(w=>w===a);return f>=0&&s.openSteps.length>f+1?s.openSteps[f+1]:void 0},b=()=>{const f=g();if(f)h(f);else if(s.mode==="student")u.actionFinishStudy(u.finishStudy,n);else try{window.onExitStudy()}catch{location.replace("/")}},k=f=>{s.isPassedVocabularyPractice=!f,v(f)},m=f=>{h(f)},c=Number(i.BookCode.substring(6));let l="";if(s.bookType==="EB"){if(i.BookLevel==="KA"){const f=["theme-zoo-2","theme-jungle","theme-antarctica","theme-zoo-1"];l=f[c%f.length]}else if(i.BookLevel==="KB"||i.BookLevel==="KC"){const f=["theme-farm","theme-forest","theme-kids-room","theme-space"];l=f[c%f.length]}}if(l===""){const f=["theme-camping","theme-season-spring","theme-season-summer","theme-season-autumn","theme-season-winter","theme-playground"];l=f[c%f.length]}const x={mode:s.mode,currentStep:a,studyId:s.studyId,studentHistoryId:s.studentHistoryId,bookType:s.bookType,studyTypeCode:s.bookType==="EB"?"001006":"001001",isEnabledPractice:s.isPassedVocabularyPractice&&s.mode==="student",theme:l,lastStep:s.openSteps[s.openSteps.length-1],isReTestYn:s.isReTestYn,onFinishActivity:b,changeVocaState:k,changeStep:m};let p;switch(y){case We.LISTENING_1:p=e.jsx(Hx,{...x});break;case We.LISTENING_2:p=e.jsx(Jx,{...x});break;case We.LISTENING_3:p=e.jsx(r1,{...x});break;case We.LISTENING_4:p=e.jsx(w1,{...x});break;case We.VOCABULARY_1:_?p=e.jsx(Fw,{...x}):p=e.jsx(AS,{...x});break;case We.VOCABULARY_2:_?p=e.jsx(XS,{...x}):p=e.jsx(l2,{...x});break;case We.VOCABULARY_3:_?p=e.jsx(M2,{...x}):p=e.jsx(aj,{...x});break;case We.VOCABULARY_4:_?p=e.jsx(Nj,{...x}):p=e.jsx(Uj,{...x});break;case We.READING_COMP_1:p=e.jsx(jh,{...x});break;case We.READING_COMP_2:p=e.jsx(Rh,{...x});break;case We.READING_COMP_3:p=e.jsx(Zh,{...x});break;case We.READING_COMP_4:p=e.jsx(S_,{...x});break;case We.SUMMARY_1:p=e.jsx(Rg,{...x});break;case We.SUMMARY_2:p=e.jsx(ly,{...x});break;case We.TRUE_OR_FALSE:p=e.jsx(xf,{...x});break;case We.CLOZE_1:p=e.jsx(l0,{...x});break;case We.CLOZE_2:p=e.jsx(j0,{...x});break;case We.CLOZE_3:p=e.jsx(L0,{...x});break;case We.WRITING_1:p=e.jsx(j$,{...x});break;case We.WRITING_2:s.isReview?i.RevisionStatusCode==="028010"||i.RevisionStatusCode==="028009"?p=e.jsx(TC,{...x}):p=e.jsx(pC,{...x}):p=e.jsx(hC,{...x});break}return e.jsx("div",{className:`${IC.phone()?So.quizTemplate:ko.quizTemplate} ${l}`,children:p})};function EC(){const[t,o]=r.useState(!1),[n,s]=r.useState({width:1,height:1});return{imgSize:n,preloadImage:u=>{if(!t){const d=[...new Set(u.map(a=>a.ImagePath))];d.map((a,h)=>{const _=new Image;_.src=a,h===0&&a!==null&&s({width:_.width,height:_.height}),h===d.length-1&&o(!0)})}}}}const BC="_ebook_yb6ez_1",PC="_ebook_page_yb6ez_26",MC="_text_wrapper_yb6ez_29",LC="_ebook_header_yb6ez_36",RC="_menu_button_yb6ez_48",FC="_ebook_play_bar_drop_down_menu_yb6ez_57",qC="_read_mode_option_yb6ez_60",HC="_read_mode_option_menu_yb6ez_66",OC="_menu_name_yb6ez_80",DC="_menu_item_yb6ez_86",VC="_on_yb6ez_91",WC="_light_box_yb6ez_95",GC="_ebook_play_mode_mobile_yb6ez_105",KC="_slide_in_bottom_yb6ez_114",UC="_slide_out_bottom_yb6ez_138",JC="_label_yb6ez_162",YC="_select_box_yb6ez_168",XC="_select_button_yb6ez_173",ZC="_radio_yb6ez_190",eQ="_page_turning_mode_yb6ez_210",tQ="_choose_button_yb6ez_219",nQ="_container_yb6ez_231",sQ="_ebook_progress_bar_yb6ez_278",oQ="_progress_yb6ez_294",iQ="_ebook_play_bar_yb6ez_57",rQ="_ebook_play_bar_pc_area_l_yb6ez_313",aQ="_read_mode_button_yb6ez_325",cQ="_ebook_play_bar_pc_area_c_yb6ez_333",uQ="_backward_yb6ez_340",lQ="_forward_yb6ez_341",dQ="_play_yb6ez_355",mQ="_ebook_play_bar_pc_area_r_yb6ez_367",xQ="_full_screen_button_yb6ez_374",hQ="_word_button_yb6ez_382",_Q="_landscape_yb6ez_402",pQ="_mobile_yb6ez_461",gQ="_ebook_page_arrows_yb6ez_480",yQ="_left_arrow_yb6ez_480",fQ="_right_arrow_yb6ez_481",bQ="_ebook_body_pc_yb6ez_509",vQ="_ebook_contents_yb6ez_514",wQ="_pages_yb6ez_517",kQ="_ebook_body_mobile_p_yb6ez_542",SQ="_ebook_voca_list_yb6ez_558",jQ="_voca_item_yb6ez_563",zQ="_word_item_yb6ez_568",$Q="_word_yb6ez_382",CQ="_mean_yb6ez_577",QQ="_ebook_vocabulary_note_yb6ez_583",AQ="_ebook_vocabulary_note_container_yb6ez_591",NQ="_ebook_vocabulary_note_area_top_yb6ez_608",TQ="_close_vocabulary_note_yb6ez_611",IQ="_btn_delete_yb6ez_616",EQ="_btn_print_yb6ez_628",BQ="_book_info_yb6ez_639",PQ="_book_code_yb6ez_639",MQ="_book_title_yb6ez_642",LQ="_line_yb6ez_646",RQ="_ebook_vocabulary_note_screen_block_yb6ez_652",FQ="_chooseRating_yb6ez_661",qQ="_btnStarOn_yb6ez_667",HQ="_btnStarOff_yb6ez_675",OQ="_ebookRating_yb6ez_684",DQ="_groupBookcover_yb6ez_722",VQ="_imgBookcover_yb6ez_730",WQ="_groupChoose_yb6ez_740",GQ="_txtQuestion_yb6ez_750",KQ="_groupChooseRating_yb6ez_765",UQ="_groupConfirm_yb6ez_774",JQ="_btnConfirm_yb6ez_781",YQ="_blue_yb6ez_801",XQ="_gray_yb6ez_810",ZQ="_groupComment_yb6ez_819",eA="_icoExclamationMark_yb6ez_826",tA="_txtComment_yb6ez_835",nA="_warningMessage_yb6ez_841",sA="_textWrapper_yb6ez_844",oA="_movieContents_yb6ez_848",iA="_btnDelete_yb6ez_868",$={ebook:BC,ebook_page:PC,text_wrapper:MC,ebook_header:LC,menu_button:RC,ebook_play_bar_drop_down_menu:FC,read_mode_option:qC,read_mode_option_menu:HC,menu_name:OC,menu_item:DC,on:VC,light_box:WC,ebook_play_mode_mobile:GC,slide_in_bottom:KC,"slide-in-bottom":"_slide-in-bottom_yb6ez_1",slide_out_bottom:UC,"slide-out-bottom":"_slide-out-bottom_yb6ez_1",label:JC,select_box:YC,select_button:XC,radio:ZC,page_turning_mode:eQ,choose_button:tQ,container:nQ,ebook_progress_bar:sQ,progress:oQ,ebook_play_bar:iQ,ebook_play_bar_pc_area_l:rQ,read_mode_button:aQ,ebook_play_bar_pc_area_c:cQ,backward:uQ,forward:lQ,play:dQ,ebook_play_bar_pc_area_r:mQ,full_screen_button:xQ,word_button:hQ,landscape:_Q,mobile:pQ,ebook_page_arrows:gQ,left_arrow:yQ,right_arrow:fQ,ebook_body_pc:bQ,ebook_contents:vQ,pages:wQ,ebook_body_mobile_p:kQ,ebook_voca_list:SQ,voca_item:jQ,word_item:zQ,word:$Q,mean:CQ,ebook_vocabulary_note:QQ,ebook_vocabulary_note_container:AQ,ebook_vocabulary_note_area_top:NQ,close_vocabulary_note:TQ,btn_delete:IQ,btn_print:EQ,book_info:BQ,book_code:PQ,book_title:MQ,line:LQ,ebook_vocabulary_note_screen_block:RQ,chooseRating:FQ,btnStarOn:qQ,btnStarOff:HQ,ebookRating:OQ,groupBookcover:DQ,imgBookcover:VQ,groupChoose:WQ,txtQuestion:GQ,groupChooseRating:KQ,groupConfirm:UQ,btnConfirm:JQ,blue:YQ,gray:XQ,groupComment:ZQ,icoExclamationMark:eA,txtComment:tA,warningMessage:nA,textWrapper:sA,movieContents:oA,btnDelete:iA};function rA({studyId:t,studentHistoryId:o,pageData:n,storyMode:s,changeSideMenu:i,changeStoryMode:u,changeReadingComplete:d}){const a=r.useMemo(()=>new Audio,[]);a.autoplay=!0;const[h,_]=r.useState(""),v=r.useRef(!0),[y,g]=r.useState(0),[b,k]=r.useState(1),m=r.useRef(!0),[c,l]=r.useState(1),[x,p]=r.useState({playPage:2,sequnce:0}),f=r.useRef(2),[w,S]=r.useState(0);r.useEffect(()=>{if(n){const T=n.find(I=>I.Page===c&&I.SoundPath);p({playPage:T?c:c+1,sequnce:0})}},[c]),r.useEffect(()=>{const T=()=>{v.current?(v.current=!1,P()):(a.play(),_("play"))};a.addEventListener("canplaythrough",T);const I=()=>{g(a.currentTime)};a.addEventListener("timeupdate",I);const G=()=>{};a.addEventListener("pause",G);const U=()=>{if(v.current)v.current=!1;else{const Y=m.current;x.playPage%2===1?p({playPage:x.playPage+1,sequnce:0}):Y?n.find(E=>E.Page===c+2)?l(c+2):(S(w+1),_("")):_("")}};return a.addEventListener("ended",U),M(x.playPage,x.sequnce),()=>{a.removeEventListener("canplaythrough",T),a.removeEventListener("timeupdate",I),a.removeEventListener("pause",G),a.removeEventListener("ended",U),z()}},[x]),r.useEffect(()=>{a.playbackRate=b},[b]),r.useEffect(()=>{w===1?s==="ListenAndRepeat"?l(3):(v.current=!0,i(!0),W(1),d(t,o)):w===2&&s==="ListenAndRepeat"&&(v.current=!0,u("Story"),i(!0),W(1),d(t,o))},[w]);const M=(T,I)=>{const G=n.filter(U=>U.Page===T&&U.SoundPath!=="");G.length>0&&G.length>I-1?(s==="ListenAndRepeat"&&w===1?a.src=G[0].SoundPath2:a.src=G[0].SoundPath,a.playbackRate=b,I>0&&(a.currentTime=G[I-1].StartTime/1e3)):(a.src="",a.currentTime=0)},z=()=>{a.pause(),a.src="",a.currentTime=0,_("")},P=()=>{a.pause(),_("pause")},C=()=>{a.pause()},j=()=>{a.play(),_("play")},B=T=>{k(T)},R=(T,I)=>{p({playPage:T,sequnce:I})},O=T=>{const I=T===0;a.muted=I,a.volume=T},W=T=>{T===1&&_(""),l(T)};return{pageNumber:c,playState:h,pageSeq:x,currentTime:y,readCnt:w,playAudio:M,stopAudio:z,pauseAudio:P,pauseAudioByWord:C,resumeAudio:j,changePlaySpeed:B,changeDuration:R,changeVolume:O,changePageNumber:W,changeAutoNextPage:T=>{m.current=T},changeMaxReadCnt:T=>{f.current=T}}}function aA({children:t}){var d,a,h;const n=(((h=(a=(d=r.useContext(se))==null?void 0:d.bookInfo)==null?void 0:a.BookLevel)==null?void 0:h.substring(0,1))||"K")==="K"?480:525,s=window.matchMedia("(orientation: portrait)").matches,i=(window.innerHeight-100)/750,u=window.innerWidth/(n*2);return e.jsx("div",{className:$.ebook_body_pc,children:e.jsx("div",{className:$.ebook_contents,children:e.jsx("div",{style:{transform:`scale(${s?u:i})`},className:`${$.pages}`,children:t})})})}function vi({pageNumber:t,sentence:o,sequence:n,marginTop:s,marginLeft:i,clickSentence:u}){const d=h=>{const _=/id=\"t/g;let v=h.replace(_,`id="t_${t}_`);if(n!==999){const y=/ id=\"t/g;v=v.replace(y,` style='margin-top: ${s}px; margin-left: ${i}px; cursor:pointer;' id="t`)}else if(n===999){const y=/ id=\"t/g;v=v.replace(y,` style='margin-top: ${s}px; margin-left: ${i}px;' id="t`)}return v},a=()=>{n!==999&&u(t,n)};return e.jsx("div",{dangerouslySetInnerHTML:{__html:d(o)},onClick:()=>a()})}function cA({pageNumber:t,sentence:o,marginTop:n,marginLeft:s,sequence:i,color:u,clickSentence:d}){const a=_=>{const v=/id=\"t/g;return _.replace(v,`style='margin-top: ${n}px; margin-left: ${s}px; background-color:${u}' id="t_${t}_`)},h=()=>{i!==999&&d(t,i)};return e.jsx("div",{dangerouslySetInnerHTML:{__html:a(o)},onClick:()=>h()})}function jn({isTextShow:t,pageSeq:o,pageNumber:n,storyData:s,currentTime:i,readCnt:u,isHighlight:d,clickSentence:a}){const{handler:h,bookInfo:_}=r.useContext(se),[v,y]=r.useState(""),[g,b]=r.useState(),[k,m]=r.useState(),c=_.BookLevel.substring(0,1)||"K",[l,x]=r.useState(""),[p,f]=r.useState(n);return r.useEffect(()=>{},[t]),r.useEffect(()=>{var w,S;if(s){const M=(w=s.find(C=>C.Page===n&&C.Sequence===999))==null?void 0:w.Css;if(M){const C=/\#t/g,j=M.replace(C,`#t_${n}_`);y(j)}const z=(S=s.find(C=>C.Page===n&&C.Sequence===999))==null?void 0:S.ImagePath,P=s.filter(C=>C.Page===n);m(z),b(P),p<n?(f(n),x("slide-in-right"),setTimeout(()=>{x("")},100)):(f(n),x("slide-in-left"),setTimeout(()=>{x("")},100))}},[n]),e.jsx("div",{className:`${$.ebook_page} ${l}`,children:e.jsxs("div",{className:$.text_wrapper,style:{backgroundImage:`url(${k})`,width:c.toUpperCase()==="K"?"480px":"525px"},children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:v}}),g&&t&&g.map(w=>h.storyMode==="ListenAndRepeat"&&u===1?e.jsx(vi,{pageNumber:n,sequence:w.Sequence,sentence:w.Contents,marginTop:w.MarginTop,marginLeft:w.MarginLeft,clickSentence:a}):o.playPage===n&&w.Sequence!==999&&i>=w.StartTime/1e3&&i<=w.EndTime/1e3&&d?e.jsx(cA,{pageNumber:n,sequence:w.Sequence,sentence:w.Contents,marginTop:w.MarginTop,marginLeft:w.MarginLeft,color:w.FontColor,clickSentence:a}):e.jsx(vi,{pageNumber:n,sequence:w.Sequence,sentence:w.Contents,marginTop:w.MarginTop,marginLeft:w.MarginLeft,clickSentence:a}))]})})}const Qo="/study/BookReading/assets/icon_chev_white_left-1ab06882.svg",Ao="/study/BookReading/assets/icon_chev_white_right-ff1d2e9e.svg";function uA({turnPageLeft:t,turnPageRight:o}){return e.jsxs("div",{className:$.ebook_page_arrows,children:[e.jsx("div",{className:$.left_arrow,children:e.jsx("button",{tabIndex:-1,contentEditable:!1,onClick:n=>{n.currentTarget.blur(),t()},children:e.jsx("img",{src:Qo,width:60,alt:""})})}),e.jsx("div",{className:$.right_arrow,children:e.jsx("button",{tabIndex:-1,contentEditable:!1,onClick:n=>{n.currentTarget.blur(),o()},children:e.jsx("img",{src:Ao,width:60,alt:""})})})]})}const No="/study/BookReading/assets/icon_chev_down-3920372e.svg";function lA({changeTextShow:t,changeMuteAudio:o,changeHighlight:n}){const{t:s}=de(),{handler:i,bookInfo:u}=r.useContext(se),[d,a]=r.useState(!1),h=u.HighlightDataYn?[{name:"Basic",selected:"on"},{name:"No Text",selected:""},{name:"No Audio",selected:""},{name:"No Highlight",selected:""}]:[{name:"Basic",selected:"on"},{name:"No Audio",selected:""}],[_,v]=r.useState(h),y=_.find(k=>k.selected==="on"),g=()=>{i.storyMode==="Story"?a(!d):alert(s("story.Listen & Repeat 모드에서는 지원하지 않는 기능입니다."))},b=k=>{const m=[..._];if(m.map(c=>{c.selected=""}),m[k].selected="on",u.HighlightDataYn)switch(k){case 0:t(!0),o(!1),n(!0);break;case 1:t(!1),o(!1),n(!0);break;case 2:t(!0),o(!0),n(!1);break;case 3:t(!0),o(!1),n(!1);break}else switch(k){case 0:t(!0),o(!1),n(!0);break;case 1:t(!0),o(!0),n(!1);break}v(m),a(!1)};return e.jsxs("div",{className:$.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:$.read_mode_option,onClick:()=>g(),children:[e.jsx("span",{children:y==null?void 0:y.name}),e.jsx("img",{src:No,width:15,alt:""})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$.read_mode_option_menu,children:[e.jsx("div",{className:$.menu_name,children:"Read Mode"}),_.map((k,m)=>e.jsx("div",{className:`${$.menu_item} ${k.selected?$.on:""}`,onClick:()=>b(m),children:k.name}))]}),e.jsx("div",{className:$.light_box,onClick:()=>{a(!1)}})]})]})}function dA({changePlaySpeed:t}){const[o,n]=r.useState(!1),[s,i]=r.useState([{rate:.8,selected:""},{rate:1,selected:"on"},{rate:1.2,selected:""},{rate:1.5,selected:""}]),u=s.find(a=>a.selected==="on"),d=a=>{const h=[...s];h.map(_=>{_.selected=""}),h[a].selected="on",t(h[a].rate),i(h),n(!1)};return e.jsxs("div",{className:$.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:$.read_mode_option,onClick:()=>{n(!o)},children:[e.jsxs("span",{children:[u==null?void 0:u.rate,"x"]}),e.jsx("img",{src:No,width:15,alt:""})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$.read_mode_option_menu,children:[e.jsx("div",{className:$.menu_name,children:"Speed"}),s.map((a,h)=>e.jsxs("div",{className:`${$.menu_item} ${a.selected?$.on:""}`,onClick:()=>d(h),children:[a.rate,"x"]}))]}),e.jsx("div",{className:$.light_box,onClick:()=>{n(!1)}})]})]})}function mA({menuName:t,menuItems:o,changeAutoNextPage:n}){const{t:s}=de(),{handler:i}=r.useContext(se),[u,d]=r.useState(!1),[a,h]=r.useState(o),_=a.filter(y=>y.selected==="on"),v=()=>{i.storyMode==="Story"?d(!u):alert(s("story.Listen & Repeat 모드에서는 지원하지 않는 기능입니다."))};return e.jsxs("div",{className:$.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:$.read_mode_option,onClick:()=>v(),children:[e.jsx("span",{children:_[0].name}),e.jsx("img",{src:No,width:15,alt:""})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$.read_mode_option_menu,children:[e.jsx("div",{className:$.menu_name,children:t}),a.map((y,g)=>e.jsx("div",{className:`${$.menu_item} ${y.selected?$.on:""}`,onClick:()=>{const b=[...a];b.map(k=>{k.selected=""}),b[g].selected="on",n(g===0),h(b),d(!1)},children:y.name}))]}),e.jsx("div",{className:$.light_box,onClick:()=>{d(!1)}})]})]})}const Zi="/study/BookReading/assets/btn_play-ce293349.svg",er="/study/BookReading/assets/btn_pause-1b0dd29c.svg",tr="/study/BookReading/assets/icon_word-4b133954.svg",xA="/study/BookReading/assets/icon_full_screen-e667f2e6.svg",hA="/study/BookReading/assets/icon_full_screen_out-18188977.svg",nr="/study/BookReading/assets/icon_menu-e46b7a18.svg",_A=new N(navigator.userAgent);function pA({progressWidth:t,pageSeq:o,playState:n,isFullScreen:s,turnPageLeft:i,turnPageRight:u,changeTextShow:d,changeMuteAudio:a,changeHighlight:h,changePlaySpeed:_,changeAutoNextPage:v,playAudio:y,pauseAudio:g,resumeAudio:b,changeVocaOpen:k,changeSideMenu:m,changeMaxReadCnt:c}){const{t:l}=de(),{handler:x}=r.useContext(se);return r.useEffect(()=>{},[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$.ebook_progress_bar,children:e.jsx("div",{className:$.progress,style:{width:`${t}%`}})}),e.jsxs("div",{className:$.ebook_play_bar,children:[e.jsxs("div",{className:$.ebook_play_bar_pc_area_l,children:[e.jsx(lA,{changeTextShow:d,changeMuteAudio:a,changeHighlight:h}),e.jsx(dA,{changePlaySpeed:_}),e.jsx(mA,{menuName:l("story.페이지 넘기기"),menuItems:[{name:"Auto",selected:"on"},{name:"Manually",selected:""}],changeAutoNextPage:v})]}),e.jsxs("div",{className:$.ebook_play_bar_pc_area_c,children:[x.storyMode==="Story"&&e.jsx("div",{className:$.backward,onClick:()=>{i()},children:e.jsx("img",{src:Qo,width:40,alt:""})}),e.jsx("div",{className:$.play,onClick:()=>{switch(n){case"play":case"resume":g();break;case"":case"stop":y(o.playPage,o.sequnce);break;case"pause":b();break}},children:n!=="play"?e.jsx("img",{src:Zi,width:40}):e.jsx("img",{src:er,width:40})}),x.storyMode==="Story"&&e.jsx("div",{className:$.forward,onClick:()=>{u()},children:e.jsx("img",{src:Ao,width:40,alt:""})})]}),e.jsxs("div",{className:$.ebook_play_bar_pc_area_r,children:[e.jsx("div",{className:$.word_button,onClick:()=>{k(!0)},children:e.jsx("img",{src:tr,width:28,height:28,alt:""})}),e.jsx("div",{className:$.menu_button,onClick:()=>{m(!0)},children:e.jsx("img",{src:nr,width:24,height:24,alt:""})}),e.jsx("div",{style:{display:_A.tablet()?"none":"flex"},className:$.full_screen_button,onClick:()=>{s?document.fullscreenElement&&document.exitFullscreen():document.body.requestFullscreen()},children:s?e.jsx("img",{src:hA,width:20,height:20,alt:""}):e.jsx("img",{src:xA,width:20,height:20,alt:""})})]})]})]})}const gA="/study/BookReading/assets/check_board-04b361f3.svg",yA="/study/BookReading/assets/rec-236d3098.svg",fA="/study/BookReading/assets/movie_book-0bc631c4.svg";function sr({isSideOpen:t,changeSideMenu:o,changeRatingShow:n,toggleMovieShow:s,submitBookMark:i}){const{t:u}=de(),{studyInfo:d,bookInfo:a,handler:h}=r.useContext(se),[_,v]=r.useState("animate__fadeIn"),[y,g]=r.useState();r.useEffect(()=>{v("animate__fadeIn"),g("animate__slideInRight")},[t]);const b=()=>{v("animate__fadeOut"),g("animate__slideOutRight"),setTimeout(()=>{o(!1)},300)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:`${he.study_side_menu} animate__animated ${_}`,children:[e.jsxs("div",{className:`${he.study_side_menu_container} animate__animated ${y}`,children:[e.jsxs("div",{className:he.study_side_menu_area_top,children:[e.jsx("div",{className:he.close_side_menu,children:e.jsx("div",{className:he.btn_delete,onClick:()=>{b()},children:e.jsx("img",{src:Ei,alt:""})})}),e.jsxs("div",{className:he.book_info,children:[e.jsx("div",{className:he.book_code,children:a.BookCode}),e.jsx("div",{className:he.book_title,children:a.Title})]}),e.jsx("div",{className:he.select_study_menu,children:e.jsxs("div",{className:`${he.select_study_menu_item} ${he.go_on} `,onClick:()=>{d.availableQuizStatus===0?h.isPreference?h.changeView("quiz"):h.isReadingComplete||h.storyMode==="Story"?a.FirstFullEasyCode==="093006"&&a.FullEasyCode==="093003"?h.changeView("quiz"):(o(!1),n(!0)):alert(u("story.책을 완독한 후 학습을 진행할 수 있습니다.")):d.availableQuizStatus===1&&alert(u("stroy.ReTest 정책으로 당일 재학습 불가"))},children:[e.jsx("img",{src:gA,alt:""}),u("story.퀴즈 풀기")]})}),(a.AnimationPath!==""||d.isAvailableSpeaking)&&e.jsx("div",{className:he.label,children:u("story.보너스 학습")}),e.jsxs("div",{className:he.ebook_more_activity,children:[a.AnimationPath!==""&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:he.ebook_more_activity_item,onClick:()=>{o(!1),s(!0)},children:[e.jsx("img",{src:fA,alt:""}),u("story.무비 시청")]})}),d.isAvailableSpeaking&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:he.ebook_more_activity_item,onClick:()=>{h.changeView("speaking")},children:[e.jsx("img",{src:yA,alt:""}),"SPEAK (",u("story.말하기 연습"),")"]})})]})]}),e.jsx("div",{className:he.study_side_menu_area_bottom,children:e.jsxs("div",{className:he.btn_exit,onClick:()=>i(),children:[e.jsx("img",{src:Bi,alt:""}),e.jsx("div",{className:"txt",children:u("common.나가기")})]})})]}),e.jsx("div",{className:he.screen_block,onClick:()=>b()})]})})}const vs="/study/BookReading/assets/icon_speaker-32763dad.svg";function ws({playState:t,pauseStoryAudio:o,resumeStoryAudio:n}){const s=r.useRef(new Audio);s.current.autoplay=!0;const i=s.current;r.useEffect(()=>{const a=()=>{o(),i.play()};i.addEventListener("canplaythrough",a);const h=()=>{t==="play"&&n()};return i.addEventListener("ended",h),()=>{i.removeEventListener("canplaythrough",a),i.removeEventListener("ended",h),d()}},[]);const u=a=>{i.src=a},d=()=>{i.pause(),i.src="",i.currentTime=0};return{playAudio:u,stopAudio:d}}function bA({vocaData:t,mainLang:o,playState:n,pauseStoryAudio:s,resumeStoryAudio:i}){var h;const{playAudio:u}=ws({playState:n,pauseStoryAudio:s,resumeStoryAudio:i});let d=(h=t.Examples[0])!=null&&h.Text?t.Examples[0].Text:t.Question.Text,a="";switch(o.toLowerCase()){case"korean":a=t.Question.Korean;break;case"chinese":a=t.Question.Chinese;break;case"japanese":a=t.Question.Japanese;break;case"vietnamese":a=t.Question.Vietnamese;break;case"indonesian":a=t.Question.Indonesian;break;case"english":a=t.Question.Britannica?t.Question.Britannica:"";break}return e.jsxs("div",{className:$.voca_item,children:[e.jsxs("div",{className:$.word_item,children:[e.jsx("div",{className:$.word,children:d}),e.jsx("img",{src:vs,alt:"",onClick:()=>{u(t.Question.Sound)}})]}),e.jsx("div",{className:$.mean,children:a})]})}function vA({vocaData:t,mainLang:o,playState:n,pauseStoryAudio:s,resumeStoryAudio:i}){var h;const{playAudio:u}=ws({playState:n,pauseStoryAudio:s,resumeStoryAudio:i});let d=(h=t.Examples[0])!=null&&h.Text?t.Question.Word:t.Question.Text,a="";switch(o.toLowerCase()){case"korean":a=t.Question.Korean;break;case"chinese":a=t.Question.Chinese;break;case"japanese":a=t.Question.Japanese;break;case"vietnamese":a=t.Question.Vietnamese;break;case"indonesian":a=t.Question.Indonesian;break;case"english":a=t.Question.Britannica?t.Question.Britannica:"";break}return e.jsxs("div",{className:$.voca_item,children:[e.jsxs("div",{className:$.word_item,children:[e.jsx("div",{className:$.word,children:d}),e.jsx("img",{src:vs,alt:"",onClick:()=>{u(t.Question.WordSound)}})]}),e.jsx("div",{className:$.mean,children:a})]})}function wA({vocaData:t,mainLang:o,playState:n,pauseStoryAudio:s,resumeStoryAudio:i}){const{playAudio:u}=ws({playState:n,pauseStoryAudio:s,resumeStoryAudio:i});let d=t.Question.Text,a="";switch(o.toLowerCase()){case"korean":a=t.Question.Korean;break;case"chinese":a=t.Question.Chinese;break;case"japanese":a=t.Question.Japanese;break;case"vietnamese":a=t.Question.Vietnamese;break;case"indonesian":a=t.Question.Indonesian;break;case"english":a=t.Question.Britannica?t.Question.Britannica:"";break}return e.jsxs("div",{className:$.voca_item,children:[e.jsxs("div",{className:$.word_item,children:[e.jsx("div",{className:$.word,children:d}),e.jsx("img",{src:vs,alt:"",onClick:()=>{u(t.Question.Sound)}})]}),e.jsx("div",{className:$.mean,children:a})]})}function kA({vocaData:t,mainLang:o,playState:n,pauseStoryAudio:s,resumeStoryAudio:i}){var h;const{playAudio:u}=ws({playState:n,pauseStoryAudio:s,resumeStoryAudio:i});let d=(h=t.Examples[0])!=null&&h.Text?t.Examples[0].Text:t.Question.Text,a="";switch(o.toLowerCase()){case"korean":a=t.Question.Korean;break;case"chinese":a=t.Question.Chinese;break;case"japanese":a=t.Question.Japanese;break;case"vietnamese":a=t.Question.Vietnamese;break;case"indonesian":a=t.Question.Indonesian;break;case"english":a=t.Question.Britannica?t.Question.Britannica:"";break}return e.jsxs("div",{className:$.voca_item,children:[e.jsxs("div",{className:$.word_item,children:[e.jsx("div",{className:$.word,children:d}),e.jsx("img",{src:vs,alt:"",onClick:()=>{u(t.Question.Sound)}})]}),e.jsx("div",{className:$.mean,children:a})]})}const SA=({playState:t,pauseStoryAudio:o,resumeStoryAudio:n})=>{const{studyInfo:s}=r.useContext(se),[i,u]=r.useState(),[d,a]=r.useState(),[h,_]=r.useState(),[v,y]=r.useState();return r.useEffect(()=>{!i&&!d&&!h&&!v&&(async()=>{const b={mode:s.mode,currentStep:2,studyId:s.studyId,studentHistoryId:s.studentHistoryId,bookType:s.bookType,studyTypeCode:s.bookType==="EB"?"001006":"001001",isEnabledPractice:s.isPassedVocabularyPractice,theme:"theme-antarctica",lastStep:s.allSteps[s.allSteps.length-1],isReTestYn:s.isReTestYn,onFinishActivity:()=>{},changeVocaState:()=>{},changeStep:k=>{}};switch(s.mappedStepActivity[1]){case"Vocabulary1":u(await Fi(b));break;case"Vocabulary2":a(await qi(b));break;case"Vocabulary3":_(await Hi(b));break;case"Vocabulary4":y(await Oi(b));break}})()},[]),e.jsxs("div",{className:$.ebook_voca_list,children:[i&&i.Quiz.map(g=>e.jsx(bA,{vocaData:g,mainLang:i.MainMeanLanguage,playState:t,pauseStoryAudio:o,resumeStoryAudio:n})),d&&d.Quiz.map(g=>e.jsx(vA,{vocaData:g,mainLang:d.MainMeanLanguage,playState:t,pauseStoryAudio:o,resumeStoryAudio:n})),h&&h.Quiz.map(g=>e.jsx(wA,{vocaData:g,mainLang:h.MainMeanLanguage,playState:t,pauseStoryAudio:o,resumeStoryAudio:n})),v&&v.Quiz.map(g=>e.jsx(kA,{vocaData:g,mainLang:v.MainMeanLanguage,playState:t,pauseStoryAudio:o,resumeStoryAudio:n}))]})},jA="/study/BookReading/assets/icon_delete_black-5f381612.svg",zA="/study/BookReading/assets/icon_printer-6fba39e5.svg";function or({isVocaOpen:t,playState:o,changeVocaOpen:n,pauseStoryAudio:s,resumeStoryAudio:i}){const{bookInfo:u}=r.useContext(se),[d,a]=r.useState("animate__fadeIn"),[h,_]=r.useState("animate__slideInRight");r.useEffect(()=>{a("animate__fadeIn"),_("animate__slideInRight")},[t]);const v=()=>{a("animate__fadeOut"),_("animate__slideOutRight"),setTimeout(()=>{o==="play"&&i(),n(!1)},300)};return e.jsx(e.Fragment,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${$.ebook_vocabulary_note} animate__animated ${d}`,children:e.jsx("div",{id:"ebook-vocabulary-note-container",className:`${$.ebook_vocabulary_note_container} animate__animated ${h}`,children:e.jsxs("div",{className:$.ebook_vocabulary_note_area_top,children:[e.jsxs("div",{className:$.close_vocabulary_note,children:[u.VocabularyPath&&e.jsx("div",{className:$.btn_print,onClick:()=>{window.open(u.VocabularyPath)},children:e.jsx("img",{src:zA,alt:""})}),e.jsx("div",{className:$.btn_delete,onClick:()=>{v()},children:e.jsx("img",{src:jA,alt:""})})]}),e.jsxs("div",{className:$.book_info,children:[e.jsx("div",{className:$.book_code,children:u.BookCode}),e.jsx("div",{className:$.book_title,children:u.Title})]}),e.jsx("div",{className:$.line}),e.jsx("div",{className:$.voca_list,children:e.jsx(SA,{playState:o,pauseStoryAudio:s,resumeStoryAudio:i})})]})})}),e.jsx("div",{className:$.ebook_vocabulary_note_screen_block,onClick:()=>{v()}})]})})}function $A({isRatingShow:t,isMovieShow:o,storyData:n,imgSize:s,pageScale:i,changeRatingShow:u,toggleMovieShow:d}){const{t:a}=de(),{bookInfo:h,studyInfo:_,handler:v}=r.useContext(se),y=re=>{O(re)},{pageNumber:g,playState:b,pageSeq:k,currentTime:m,readCnt:c,playAudio:l,pauseAudio:x,pauseAudioByWord:p,resumeAudio:f,changePlaySpeed:w,changeDuration:S,changeVolume:M,changePageNumber:z,changeAutoNextPage:P,changeMaxReadCnt:C}=rA({studyId:_.studyId,studentHistoryId:_.studentHistoryId,pageData:n,storyMode:v.storyMode,changeSideMenu:y,changeStoryMode:v.changeStoryMode,changeReadingComplete:v.changeReadingComplete}),[j,B]=r.useState(""),[R,O]=r.useState(!1),[W,V]=r.useState(!0),[q,T]=r.useState(!1),[I,G]=r.useState(!0),[U,Y]=r.useState(!1),[F,E]=r.useState(!1),A=(g+1)/n[n.length-1].Page*100;r.useEffect(()=>{_.bookmarkPage>0&&g===1&&v.storyMode==="Story"&&!v.isReadingComplete&&Number(h.BookLevel.substring(0,1))>1&&confirm("마지막으로 읽은 곳부터 시작할까요?")&&z(_.bookmarkPage%2===0?_.bookmarkPage-1:_.bookmarkPage)},[]),r.useEffect(()=>{(t||o)&&x(),!t&&!o&&b==="pause"&&f()},[t,o]),r.useEffect(()=>{B("")},[g]),r.useEffect(()=>{if(n){switch(j){case"play":break;case"left":v.storyMode==="Story"&&z(g-2);break;case"right":v.storyMode==="Story"&&z(g+2);break}const re=H=>{switch(H.key){case"ArrowRight":L();break;case"ArrowLeft":Q();break;case" ":case"SpaceBar":b==="play"?x():b==="pause"&&f();break}};return window.addEventListener("keyup",re),()=>{window.removeEventListener("keyup",re)}}},[j]),r.useEffect(()=>{const re=H=>{switch(H.key){case"ArrowRight":L();break;case"ArrowLeft":Q();break;case" ":case"SpaceBar":b==="play"?x():b==="pause"&&f();break}};return window.addEventListener("keyup",re),()=>{window.removeEventListener("keyup",re)}},[b]),r.useEffect(()=>{M(q?0:1)},[q]),r.useEffect(()=>{const re=()=>{document.fullscreenElement?E(!0):E(!1)};return document.body.addEventListener("fullscreenchange",re),()=>{document.body.removeEventListener("fullscreenchange",re)}},[document.fullscreenElement]);const Q=()=>{g>1&&j===""&&v.storyMode==="Story"&&B("left")},L=()=>{g+2<=n[n.length-1].Page&&j===""&&v.storyMode==="Story"&&B("right")},X=(re,H)=>{v.storyMode==="Story"&&S(re,H)},te=re=>{V(re)},oe=re=>{T(re)},ce=re=>{G(re)},ae=re=>{Y(re)},xe=async()=>{if(Number(h.BookLevel.substring(0,1))>1)if((await Ai(_.studyId,_.studentHistoryId,g)).success)try{window.onExitStudy()}catch{location.replace("/")}else{alert(a("story.책갈피 저장에 실패했습니다."));try{window.onExitStudy()}catch{location.replace("/")}}else try{window.onExitStudy()}catch{location.replace("/")}};return e.jsxs(e.Fragment,{children:[e.jsxs(aA,{children:[e.jsx(jn,{isTextShow:W,pageSeq:k,pageNumber:g,storyData:n,currentTime:m,readCnt:c,isHighlight:I,clickSentence:X},"page-1"),e.jsx(jn,{isTextShow:W,pageSeq:k,pageNumber:g+1,storyData:n,currentTime:m,readCnt:c,isHighlight:I,clickSentence:X},"page-2")]}),v.storyMode==="Story"&&e.jsx(uA,{turnPageLeft:Q,turnPageRight:L}),e.jsx(pA,{progressWidth:A,pageSeq:k,playState:b,isFullScreen:F,turnPageLeft:Q,turnPageRight:L,changeTextShow:te,changeMuteAudio:oe,changeHighlight:ce,changePlaySpeed:w,changeAutoNextPage:P,playAudio:l,pauseAudio:x,resumeAudio:f,changeVocaOpen:ae,changeSideMenu:y,changeMaxReadCnt:C}),e.jsx(sr,{isSideOpen:R,changeSideMenu:y,changeRatingShow:u,toggleMovieShow:d,submitBookMark:xe}),e.jsx(or,{isVocaOpen:U,playState:b,changeVocaOpen:ae,pauseStoryAudio:p,resumeStoryAudio:f})]})}function To(){const[t,o]=r.useState(window.innerWidth>window.innerHeight);return r.useEffect(()=>{window.addEventListener("orientationchange",()=>{const n=screen.orientation;n.type.includes("portrait")?o(!1):n.type.includes("landscape")&&o(!0)})},[]),t}function CA({studyId:t,studentHistoryId:o,pageData:n,storyMode:s,changeSideMenu:i,changeStoryMode:u,changeReadingComplete:d}){const a=r.useMemo(()=>new Audio,[]);a.autoplay=!0;const[h,_]=r.useState(""),v=r.useRef(!0),[y,g]=r.useState(0),[b,k]=r.useState(1),m=r.useRef(!0),[c,l]=r.useState(1),[x,p]=r.useState({playPage:1,sequnce:0}),[f,w]=r.useState(0),S=To();r.useEffect(()=>{n&&(n.find(T=>T.Page===c&&T.SoundPath)?p({playPage:c,sequnce:0}):setTimeout(()=>{l(c+1)},2e3))},[c]),r.useEffect(()=>{const q=()=>{v.current?(v.current=!1,P()):(a.play(),_("play"))};a.addEventListener("canplaythrough",q);const T=()=>{g(a.currentTime)};a.addEventListener("timeupdate",T);const I=()=>{};a.addEventListener("pause",I);const G=()=>{if(v.current)v.current=!1;else{const U=m.current,Y=n.find(F=>F.Page===x.playPage+1);S?U?Y?x.playPage%2===1?p({playPage:x.playPage+1,sequnce:0}):l(c+2):(w(f+1),_("")):_(""):U&&(Y?p({playPage:x.playPage+1,sequnce:0}):(w(f+1),_("")))}};return a.addEventListener("ended",G),M(x.playPage,x.sequnce),()=>{a.removeEventListener("canplaythrough",q),a.removeEventListener("timeupdate",T),a.removeEventListener("pause",I),a.removeEventListener("ended",G),z()}},[x]),r.useEffect(()=>{a.playbackRate=b},[b]),r.useEffect(()=>{f===1?s==="ListenAndRepeat"?l(3):(v.current=!0,i(!0),W(1),d(t,o)):f===2&&s==="ListenAndRepeat"&&(v.current=!0,u("Story"),i(!0),W(1),d(t,o))},[f]);const M=(q,T)=>{const I=n.filter(G=>G.Page===q&&G.SoundPath!=="");I.length>0&&I.length>T-1?(s==="ListenAndRepeat"&&f===1?a.src=I[0].SoundPath2:a.src=I[0].SoundPath,a.playbackRate=b,T>0&&(a.currentTime=I[T-1].StartTime/1e3)):(a.src="",a.currentTime=0)},z=()=>{a.pause(),a.src="",a.currentTime=0,_("")},P=()=>{a.pause(),_("pause")},C=()=>{a.pause()},j=()=>{_("play"),a.play()},B=q=>{k(q)},R=(q,T)=>{p({playPage:q,sequnce:T})},O=q=>{const T=q===0;a.muted=T,a.volume=q},W=q=>{q===1&&_(""),l(q)};return{isAutoRef:m,pageNumber:c,playState:h,pageSeq:x,currentTime:y,readCnt:f,playAudio:M,stopAudio:z,pauseAudio:P,pauseAudioByWord:C,resumeAudio:j,changePlaySpeed:B,changeDuration:R,changeVolume:O,changePageNumber:W,changeAutoNextPage:q=>{m.current=q}}}function QA({onTouchStartHandler:t,onTouchEndHandler:o,children:n}){var _,v,y;const s=((y=(v=(_=r.useContext(se))==null?void 0:_.bookInfo)==null?void 0:v.BookLevel)==null?void 0:y.substring(0,1))||"K",i=window.matchMedia("(orientation: landscape)").matches,u=s==="K"?480:525,d=750,a=window.innerWidth>700?(s==="K"?window.innerHeight-60:window.innerHeight-120)/d:window.innerWidth/u,h=(s==="K"?window.innerHeight-20:window.innerHeight-40)/d;return e.jsx("div",{className:$.ebook_body_mobile_p,onTouchStart:g=>t(g),onTouchEnd:g=>o(g),children:e.jsx("div",{className:$.container,style:{transform:`scale(${i?h:a})`},children:n})})}const AA="/study/BookReading/assets/icon_speed10-0ef1da58.svg";function Io({text:t}){return e.jsx("div",{className:$.label,children:t})}function ir({children:t}){return e.jsx("div",{className:$.select_box,children:t})}function NA({readTypeList:t,changeReadTypeList:o,changeTextShow:n,changeMuteAudio:s,changeHighlight:i}){const{t:u}=de(),{handler:d}=r.useContext(se),a=h=>{if(d.storyMode==="Story"){const _=[...t];switch(_.map(v=>{v.selected=""}),_[h].selected="on",h){case 0:n(!0),s(!1),i(!0);break;case 1:n(!1),s(!1),i(!0);break;case 2:n(!0),s(!0),i(!1);break;case 3:n(!0),s(!1),i(!1);break}o(_)}else alert(u("story.Listen & Repeat 모드에서는 지원하지 않는 기능입니다."))};return e.jsxs(e.Fragment,{children:[e.jsx(Io,{text:u("story.읽기 모드")}),e.jsx(ir,{children:t.map((h,_)=>e.jsxs("div",{className:`${$.select_button} ${h.selected==="on"?$.on:""}`,onClick:()=>a(_),children:[e.jsx("div",{className:$.radio}),h.name]}))})]})}function TA({isAutoNextPage:t,changeAutoNext:o}){const{t:n}=de(),{handler:s}=r.useContext(se),[i,u]=r.useState([{name:n("story.수동으로 넘기기"),selected:t?"":"on"},{name:n("story.자동으로 넘기기"),selected:t?"on":""}]),d=a=>{if(s.storyMode==="Story"){const h=[...i];h.map(_=>{_.selected=""}),h[a].selected="on",u(h),o(a!==0)}else alert(n("story.Listen & Repeat 모드에서는 지원하지 않는 기능입니다."))};return e.jsxs(e.Fragment,{children:[e.jsx(Io,{text:n("story.책장 넘기기")}),e.jsx("div",{className:$.page_turning_mode,children:i.map((a,h)=>e.jsx("div",{className:a.selected===""?$.choose_button:`${$.choose_button} ${$.on}`,onClick:()=>{d(h)},children:a.name}))})]})}function IA({speedList:t,changePlaySpeedList:o,changePlaySpeed:n}){const{t:s}=de();t.find(u=>u.selected==="on");const i=u=>{const d=[...t];d.map(a=>{a.selected=""}),d[u].selected="on",n(d[u].rate),o(d)};return e.jsxs(e.Fragment,{children:[e.jsx(Io,{text:s("story.읽기 속도")}),e.jsx(ir,{children:t.map((u,d)=>e.jsxs("div",{className:`${$.select_button} ${u.selected==="on"?$.on:""}`,onClick:()=>{i(d)},children:[e.jsx("div",{className:$.radio}),u.rate,"x"]}))})]})}function EA({isBottomLeftMenuOpen:t,isAutoNextPage:o,changeTextShow:n,changeMuteAudio:s,changeHighlight:i,changePlaySpeed:u,changeAutoNext:d,toggleBottomLeft:a}){const[h,_]=r.useState("slide-in-bottom"),[v,y]=r.useState([{name:"Basic",selected:"on"},{name:"No Text",selected:""},{name:"No Audio",selected:""},{name:"No Highlight",selected:""}]),[g,b]=r.useState([{rate:.8,selected:""},{rate:1,selected:"on"},{rate:1.2,selected:""},{rate:1.5,selected:""}]),k=()=>{_("slide-out-bottom"),setTimeout(()=>{_("slide-in-bottom"),a()},500)},m=l=>{y(l)},c=l=>{b(l)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:`${$.ebook_play_mode_mobile}
      ${h==="slide-in-bottom"?$.slide_in_bottom:$.slide_out_bottom}`,children:[e.jsxs("div",{className:$.container,children:[e.jsx(NA,{readTypeList:v,changeReadTypeList:m,changeTextShow:n,changeHighlight:i,changeMuteAudio:s}),e.jsx(IA,{speedList:g,changePlaySpeedList:c,changePlaySpeed:u}),e.jsx(TA,{isAutoNextPage:o,changeAutoNext:d})]}),e.jsx("div",{className:$.light_box,onClick:()=>{k()}})]})})}function BA({progressWidth:t,isAutoNextPage:o,pageSeq:n,playState:s,turnPageLeft:i,turnPageRight:u,changeTextShow:d,changeMuteAudio:a,changeHighlight:h,changePlaySpeed:_,changeAutoNext:v,playAudio:y,pauseAudio:g,resumeAudio:b,changeVocaOpen:k,changeSideMenu:m}){const{handler:c}=r.useContext(se),[l,x]=r.useState(!1),p=()=>{x(!l)},f=window.matchMedia("(orientation: landscape)").matches,[w,S]=r.useState(!1);return r.useEffect(()=>{const M=()=>{document.fullscreenElement?S(!0):S(!1)};return document.body.addEventListener("fullscreenchange",M),()=>{document.body.removeEventListener("fullscreenchange",M)}},[document.fullscreenElement]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$.ebook_progress_bar,children:e.jsx("div",{className:$.progress,style:{width:`${t}%`}})}),e.jsxs("div",{className:`${$.ebook_play_bar} ${$.mobile}`,children:[e.jsxs("div",{className:$.ebook_play_bar_pc_area_l,children:[e.jsx("div",{className:`${$.read_mode_button} ${f&&$.landscape}`,onClick:()=>{p()},children:e.jsx("img",{src:AA,width:30,height:30})}),e.jsx(EA,{isBottomLeftMenuOpen:l,isAutoNextPage:o,changeTextShow:d,changeMuteAudio:a,changeHighlight:h,changePlaySpeed:_,changeAutoNext:v,toggleBottomLeft:p})]}),e.jsxs("div",{className:$.ebook_play_bar_pc_area_c,children:[c.storyMode==="Story"&&e.jsx("div",{className:`${$.backward} ${f&&$.landscape}`,onClick:()=>{i()},children:e.jsx("img",{src:Qo,width:40,alt:""})}),e.jsx("div",{className:`${$.play} ${f&&$.landscape}`,onClick:()=>{switch(s){case"play":case"resume":g();break;case"":case"stop":y(n.playPage,n.sequnce);break;case"pause":b();break}!w&&document.body.requestFullscreen()},children:s!=="play"?e.jsx("img",{src:Zi,width:40}):e.jsx("img",{src:er,width:40})}),c.storyMode==="Story"&&e.jsx("div",{className:`${$.forward} ${f&&$.landscape}`,onClick:()=>{u()},children:e.jsx("img",{src:Ao,width:40,alt:""})})]}),e.jsxs("div",{className:$.ebook_play_bar_pc_area_r,children:[e.jsx("div",{className:`${$.word_button} ${f&&$.landscape}`,onTouchEnd:()=>{k(!0)},onClick:()=>{k(!0)},children:e.jsx("img",{src:tr,width:28,height:28,alt:""})}),e.jsx("div",{className:`${$.menu_button} ${f&&$.landscape}`,onClick:()=>{m(!0)},children:e.jsx("img",{src:nr,width:24,height:24,alt:""})})]})]})]})}function PA({isRatingShow:t,isMovieShow:o,storyData:n,changeRatingShow:s,toggleMovieShow:i}){const{t:u}=de(),{bookInfo:d,studyInfo:a,handler:h}=r.useContext(se),_=K=>{I(K)},{pageNumber:v,playState:y,pageSeq:g,currentTime:b,readCnt:k,playAudio:m,pauseAudio:c,pauseAudioByWord:l,resumeAudio:x,changePlaySpeed:p,changeDuration:f,changeVolume:w,changePageNumber:S,changeAutoNextPage:M}=CA({studyId:a.studyId,studentHistoryId:a.studentHistoryId,pageData:n,storyMode:h.storyMode,changeSideMenu:_,changeStoryMode:h.changeStoryMode,changeReadingComplete:h.changeReadingComplete});r.useState("");const[z,P]=r.useState(!0),[C,j]=r.useState(!0),[B,R]=r.useState(!1),[O,W]=r.useState(!0),[V,q]=r.useState(!1),[T,I]=r.useState(!1),[G,U]=r.useState(0),[Y,F]=r.useState(0),E=To(),[A,Q]=r.useState("portrait"),L=g.playPage/n[n.length-1].Page*100;r.useEffect(()=>{a.bookmarkPage>0&&v===1&&h.storyMode==="Story"&&!h.isReadingComplete&&Number(d.BookLevel.substring(0,1))>1&&confirm(u("story.마지막으로 읽은 곳부터 시작할까요?"))&&S(a.bookmarkPage%2===0?a.bookmarkPage-1:a.bookmarkPage);const K=()=>{window.matchMedia("(orientation: portrait)").matches?Q("portrait"):window.matchMedia("(orientation: landscape)").matches&&Q("landscape")};return K(),window.addEventListener("orientationchange",K),window.addEventListener("resize",K),()=>{window.removeEventListener("orientationchange",K),window.removeEventListener("resize",K)}},[]),r.useEffect(()=>{G-Y>5?te():G-Y<0&&X()},[Y]),r.useEffect(()=>{(t||o)&&c(),!t&&!o&&y==="pause"&&x()},[t,o]);const X=()=>{v>1&&setTimeout(()=>{if(h.storyMode==="Story"){let K;E?K=g.playPage%2===0?g.playPage-3:g.playPage-2:K=g.playPage-1,S(K)}},160)},te=()=>{let K;E?v+2<=n[n.length-1].Page&&setTimeout(()=>{h.storyMode==="Story"&&(K=g.playPage%2===0?g.playPage+1:g.playPage+2,S(K))},160):v+1<=n[n.length-1].Page&&setTimeout(()=>{h.storyMode==="Story"&&(K=g.playPage+1,S(K))},160)};r.useEffect(()=>{w(B?0:1)},[B]);const oe=K=>{const ie=K.changedTouches[0].pageX;U(ie)},ce=K=>{const ie=K.changedTouches[0].pageX;F(ie)},ae=(K,ie)=>{h.storyMode==="Story"&&f(K,ie)},xe=K=>{j(K)},re=K=>{R(K)},H=K=>{W(K)},J=K=>{P(K),M(K)},D=K=>{q(K)},Z=async()=>{if(Number(d.BookLevel.substring(0,1))>1)if((await Ai(a.studyId,a.studentHistoryId,v)).success)try{window.onExitStudy()}catch{location.replace("/")}else{alert(u("story.책갈피 저장에 실패했습니다."));try{window.onExitStudy()}catch{location.replace("/")}}else try{window.onExitStudy()}catch{location.replace("/")}};return e.jsxs(e.Fragment,{children:[e.jsx(QA,{onTouchStartHandler:oe,onTouchEndHandler:ce,children:e.jsx(e.Fragment,{children:A==="landscape"?e.jsxs(e.Fragment,{children:[e.jsx(jn,{isTextShow:C,pageSeq:g,pageNumber:g.playPage%2===1?g.playPage:g.playPage-1,storyData:n,currentTime:b,readCnt:k,isHighlight:O,clickSentence:ae}),e.jsx(jn,{isTextShow:C,pageSeq:g,pageNumber:g.playPage%2===1?g.playPage+1:g.playPage,storyData:n,currentTime:b,readCnt:k,isHighlight:O,clickSentence:ae})]}):e.jsx(jn,{isTextShow:C,pageSeq:g,pageNumber:g.playPage,storyData:n,currentTime:b,readCnt:k,isHighlight:O,clickSentence:ae})})}),e.jsx(BA,{progressWidth:L,isAutoNextPage:z,pageSeq:g,playState:y,turnPageLeft:X,turnPageRight:te,changeTextShow:xe,changeMuteAudio:re,changeHighlight:H,changePlaySpeed:p,changeAutoNext:J,playAudio:m,pauseAudio:c,resumeAudio:x,changeVocaOpen:D,changeSideMenu:_}),e.jsx(sr,{isSideOpen:T,changeSideMenu:_,changeRatingShow:s,toggleMovieShow:i,submitBookMark:Z}),e.jsx(or,{isVocaOpen:V,playState:y,changeVocaOpen:D,pauseStoryAudio:l,resumeStoryAudio:x})]})}function MA({toggleMovieShow:t}){const{studyInfo:o,bookInfo:n}=r.useContext(se),s=()=>{yr(o.studyId,o.studentHistoryId)};return e.jsx("div",{className:$.movieContents,children:e.jsxs("div",{className:$.container,children:[JSON.parse(JSON.stringify(n.AnimationPath))===""||!n.AnimationPath?"No Movie Book":e.jsx("video",{width:"100%",height:"100%",controls:!0,onEnded:()=>{s()},children:e.jsx("source",{src:JSON.parse(JSON.stringify(n.AnimationPath)),type:"video/mp4"})}),e.jsx("div",{className:$.btnDelete,onClick:()=>t(!1)})]})})}function rr({starCount:t,changeStarCount:o}){const n=[1,2,3,4,5];return e.jsx("div",{className:$.chooseRating,children:n.map((s,i)=>{const u=i+1;return e.jsx("div",{className:t>=u?$.btnStarOn:$.btnStarOff,onClick:()=>{o(u)}},i)})})}function LA({changeRatingShow:t}){const{t:o}=de(),{bookInfo:n,studyInfo:s,handler:i}=r.useContext(se),[u,d]=r.useState(3),a=_=>{d(_)},h=async()=>{(await Ni(s.studyId,s.studentHistoryId,u*10)).success&&i.changeView("quiz")};return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${n.SurfaceImage}`})}),e.jsxs("div",{className:$.groupChoose,children:[e.jsx("div",{className:$.txtQuestion,children:"How do you like this book?"}),e.jsx("div",{className:$.groupChooseRating,children:e.jsx(rr,{starCount:u,changeStarCount:a})}),e.jsxs("div",{className:$.groupConfirm,children:[e.jsx("button",{className:`${$.btnConfirm} ${$.gray}`,onClick:()=>{t(!1)},children:o("story.다시 읽기")}),e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{i.isPreference?i.changeView("quiz"):h()},children:o("story.퀴즈 풀기")})]})]}),e.jsxs("div",{className:$.groupComment,children:[e.jsx("span",{className:$.icoExclamationMark}),e.jsx("span",{className:$.txtComment,children:e.jsx(_n,{i18nKey:"story.모든 학습을 완료하고 평균 70점을 넘어야 포인트를 획득 할 수 있습니다.",components:{b:e.jsx("b",{})}})})]})]})})}function RA(){const{t}=de(),{bookInfo:o,handler:n}=r.useContext(se);return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${o.SurfaceImage}`})}),e.jsx("div",{className:$.groupComment,children:e.jsxs("span",{className:$.txtComment,children:[e.jsx("div",{children:e.jsx(_n,{style:{color:"red"},i18nKey:"story.이미 한번 포인트를 획득한 학습입니다.",components:{b:e.jsx("b",{})}})}),e.jsx("div",{children:t("story.두번째 학습을 통과하여도 50% 포인트만 획득할 수 있습니다.")}),e.jsx("div",{children:t("story.계속 학습하시겠습니까?")})]})}),e.jsx("div",{className:$.groupChoose,children:e.jsxs("div",{className:$.groupConfirm,children:[e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{n.changeView("quiz")},children:t("common.네")}),e.jsx("button",{className:`${$.btnConfirm} ${$.gray}`,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:t("common.아니오")})]})})]})})}function FA(){const{t}=de(),{bookInfo:o,handler:n}=r.useContext(se);return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${o.SurfaceImage}`})}),e.jsx("div",{className:$.groupComment,children:e.jsxs("span",{className:$.txtComment,children:[e.jsx("div",{children:t("story.이미 두 번 포인트를 획득한 학습입니다.")}),e.jsx("div",{children:e.jsx(_n,{i18nKey:"story.더 이상 포인트를 획득할 수 없습니다.",components:{b:e.jsx("b",{})}})}),e.jsx("div",{children:t("story.계속 학습하시겠습니까?")})]})}),e.jsx("div",{className:$.groupChoose,children:e.jsxs("div",{className:$.groupConfirm,children:[e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{n.changeView("quiz")},children:t("common.네")}),e.jsx("button",{className:`${$.btnConfirm} ${$.gray}`,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:t("common.아니오")})]})})]})})}const wi=new N(navigator.userAgent),Js=wi.phone()||wi.tablet()||window.innerWidth<1370;function ki(){const{bookInfo:t,studyInfo:o}=r.useContext(se),[n,s]=r.useState(),[i,u]=r.useState(!1),[d,a]=r.useState(!1),{imgSize:h,preloadImage:_}=EC(),[v,y]=r.useState(window.innerHeight),[g,b]=r.useState(1);r.useEffect(()=>{n||(async()=>{const l=await fr(o.studyId,o.studentHistoryId);l&&(s(l),_(l))})()},[n]),r.useEffect(()=>{const c=()=>{Js?(y(window.innerHeight),b(screen.width/h.width)):(y(window.innerHeight),b(window.innerHeight/h.height*.9))};return c(),window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[Js,h,v]);const k=c=>{u(c)},m=c=>{a(c)};return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$.ebook,style:{backgroundImage:`url('${t.BackgroundImage}')`,height:v},children:Js?e.jsx(PA,{isRatingShow:i,isMovieShow:d,storyData:n,changeRatingShow:k,toggleMovieShow:m}):e.jsx($A,{isRatingShow:i,isMovieShow:d,storyData:n,imgSize:h,pageScale:g,changeRatingShow:k,toggleMovieShow:m})}),i&&t.PassCount===0&&e.jsx(LA,{changeRatingShow:k}),i&&t.PassCount===1&&e.jsx(RA,{}),i&&t.PassCount===2&&e.jsx(FA,{}),d&&e.jsx(MA,{toggleMovieShow:m})]}):e.jsx(e.Fragment,{children:"Loading..."})}const qA="_btnExit_1jkel_9",HA="_mobile_1jkel_25",OA="_active_1jkel_30",DA="_screenBlock_1jkel_34",VA="_screenBgColor_1jkel_48",WA="_speakButtonArea_1jkel_60",GA="_startButton_1jkel_68",KA="_recAni_1jkel_90",UA="_speackBodyBg_1jkel_98",JA="_speackBodyBgColor_1jkel_103",YA="_speakBody_1jkel_116",XA="_ebookViewer_1jkel_139",ZA="_speakEbookPage_1jkel_154",e3="_levelK_1jkel_159",t3="_level1_1jkel_164",n3="_level2_1jkel_169",s3="_playBar_1jkel_176",o3="_progress_1jkel_189",i3="_progressBar_1jkel_194",r3="_recProgress_1jkel_199",a3="_runReady_1jkel_208",c3="_txtSome_1jkel_217",u3="_btnSpeakPlay_1jkel_224",l3="_icon_1jkel_239",d3="_play_1jkel_176",m3="_record_1jkel_250",x3="_txtWord_1jkel_253",h3="_runEbookAudioPlay_1jkel_260",_3="_runVoiceRecord_1jkel_267",p3="_txtLabel_1jkel_275",g3="_runVoicePlay_1jkel_281",y3="_lottieVoicePlay_1jkel_289",f3="_runCorrectSign_1jkel_296",b3="_runIncorrectSign_1jkel_313",v3="_t_1jkel_217",w3="_result_1jkel_337",k3="_groupResultMark_1jkel_350",S3="_txt_1jkel_217",j3="_popUp_1jkel_368",z3="_row1_1jkel_378",$3="_btn_1jkel_9",C3="_gray_1jkel_397",Q3="_blue_1jkel_401",A3="_retry_1jkel_405",N3="_iconSpeaker_1jkel_411",T3="_iconRetry_1jkel_419",I3="_row2_1jkel_427",E3="_graph_1jkel_436",B3="_wrapperProgress_1jkel_443",P3="_native_1jkel_454",M3="_progressArrow_1jkel_457",L3="_student_1jkel_468",R3="_sentence_1jkel_482",F3="_word_1jkel_489",q3="_red_1jkel_493",H3="_phonemes_1jkel_496",O3="_wordContainer_1jkel_507",D3="_phonemeResult_1jkel_531",V3="_phoneme_1jkel_496",W3="_orange_1jkel_542",G3="_green_1jkel_545",K3="_phonemeScore_1jkel_548",U3="_btnToggle_1jkel_561",J3="_icoChev_1jkel_574",Y3="_rotate_1jkel_584",X3="_row3_1jkel_587",Z3="_goodJob_1jkel_600",eN="_tryAgain_1jkel_603",tN="_iconArrow_1jkel_612",nN="_wrapperResult_1jkel_621",sN="_resultMark_1jkel_648",oN="_btnExitResult_1jkel_666",iN="_visualizer_1jkel_694",ne={btnExit:qA,mobile:HA,active:OA,screenBlock:DA,screenBgColor:VA,speakButtonArea:WA,startButton:GA,recAni:KA,speackBodyBg:UA,speackBodyBgColor:JA,speakBody:YA,ebookViewer:XA,speakEbookPage:ZA,levelK:e3,level1:t3,level2:n3,playBar:s3,progress:o3,progressBar:i3,recProgress:r3,runReady:a3,txtSome:c3,btnSpeakPlay:u3,icon:l3,play:d3,record:m3,txtWord:x3,runEbookAudioPlay:h3,runVoiceRecord:_3,txtLabel:p3,runVoicePlay:g3,lottieVoicePlay:y3,runCorrectSign:f3,runIncorrectSign:b3,t:v3,result:w3,groupResultMark:k3,txt:S3,popUp:j3,row1:z3,btn:$3,gray:C3,blue:Q3,retry:A3,iconSpeaker:N3,iconRetry:T3,row2:I3,graph:E3,wrapperProgress:B3,native:P3,progressArrow:M3,student:L3,sentence:R3,word:F3,red:q3,phonemes:H3,wordContainer:O3,phonemeResult:D3,phoneme:V3,orange:W3,green:G3,phonemeScore:K3,btnToggle:U3,icoChev:J3,rotate:Y3,row3:X3,goodJob:Z3,tryAgain:eN,iconArrow:tN,wrapperResult:nN,resultMark:sN,btnExitResult:oN,"btn-exit":"_btn-exit_1jkel_688",visualizer:iN},rN="/study/BookReading/assets/dodo_23_1-f9dd096b.png";function aN({startRecord:t}){const[o,n]=r.useState(!1),s=bs();return r.useEffect(()=>{setTimeout(()=>{n(!o)},3e3)},[]),e.jsxs("button",{className:`${ne.btnSpeakPlay} ${o&&"heartbeat"}`,onClick:()=>{s.micPermission==="denied"&&alert(s.alertMessage),n(!1),t()},children:[e.jsx("div",{className:`${ne.icon} ${ne.record}`}),e.jsx("div",{className:ne.txtWord,children:"Speak"})]})}function cN({playSentence:t}){return e.jsxs("button",{className:ne.btnSpeakPlay,onClick:()=>t(),children:[e.jsx("div",{className:`${ne.icon} ${ne.play}`}),e.jsx("div",{className:ne.txtWord,children:"Listen"})]})}function uN({playSentence:t,startRecord:o}){return e.jsxs("div",{className:`${ne.runReady} animate__animated animate__slideInUp`,children:[e.jsx(cN,{playSentence:t}),e.jsx("div",{className:ne.txtSome,children:"•"}),e.jsx(aN,{startRecord:o})]})}function lN(){return e.jsx("div",{className:`${ne.runVoiceRecord} animate__animated animate__slideInUp`,children:e.jsx($n,{})})}function dN(){return e.jsx("div",{className:`${ne.runEbookAudioPlay} animate__animated animate__slideInUp`,children:e.jsx(fw,{})})}function ar({progressWidth:t,playBarState:o,nativeAudio:n,playSentence:s,startRecord:i}){const d=r.useRef(new Audio(n)).current,a=r.useRef(null);let h;return r.useEffect(()=>{if(a.current&&o==="recording"&&n){let _=0;const v=d.duration>=5?1.4:1.2,y=d.duration*1e3*v;h=setInterval(()=>{_+=25,a.current&&(_/y>1?clearInterval(h):a.current.style.width=`${_/y*100}%`)},25)}else clearInterval(h);return()=>{clearInterval(h)}},[o]),e.jsx("div",{children:e.jsxs("div",{className:ne.playBar,children:[e.jsx("div",{className:ne.progress,children:e.jsx("div",{className:ne.progressBar,style:{width:`${t}%`}})}),e.jsxs("div",{className:ne.wrapperAnims,children:[o===""&&e.jsx(uN,{playSentence:s,startRecord:i}),o==="playing-sentence"&&e.jsx(dN,{}),o==="recording"&&e.jsxs(e.Fragment,{children:[e.jsx(lN,{}),e.jsx("div",{ref:a,className:ne.recProgress})]})]})]})})}function mN({pageNumber:t,sentence:o,sequence:n,marginTop:s,marginLeft:i}){const u=d=>{const a=/id=\"t/g;let h=d.replace(a,`id="t_${t}_`);if(n!==999){const _=/ id=\"t/g;h=h.replace(_,` style='margin-top: ${s}px; margin-left: ${i}px;' id="t`)}else if(n===999){const _=/ id=\"t/g;h=h.replace(_,` style='margin-top: ${s}px; margin-left: ${i}px;' id="t`)}return h};return e.jsx("div",{dangerouslySetInnerHTML:{__html:u(o)}})}function xN({pageNumber:t,sentence:o,marginTop:n,marginLeft:s,sequence:i,color:u,clickSentence:d}){const a=_=>{const v=/id=\"t/g;return _.replace(v,`style='margin-top: ${n}px; margin-left: ${s}px; background-color:${u}; cursor:pointer;' id="t_${t}_`)},h=()=>{i!==999&&d(t,i)};return e.jsx("div",{dangerouslySetInnerHTML:{__html:a(o)},onClick:()=>h()})}function Ys({pageNumber:t,pageSeq:o,speakData:n,clickSentence:s}){const{bookInfo:i}=r.useContext(se),[u,d]=r.useState(""),[a,h]=r.useState(),[_,v]=r.useState(),[y,g]=r.useState(""),[b,k]=r.useState(t);return r.useEffect(()=>{var m,c;if(n){const l=(m=n.find(f=>f.Page===t&&f.Sequence===999))==null?void 0:m.Css;if(l){const f=/\#t/g,w=l.replace(f,`#t_${t}_`);d(w)}const x=(c=n.find(f=>f.Page===t&&f.Sequence===999))==null?void 0:c.ImagePath,p=n.filter(f=>f.Page===t);v(x),h(p),b<t?(k(t),g("slide-in-right"),setTimeout(()=>{g("")},100)):(k(t),g("slide-in-left"),setTimeout(()=>{g("")},100))}},[t]),e.jsxs("div",{style:{backgroundImage:`url(${_})`},className:`${ne.speakEbookPage} ${i.Grade==="K"?ne.levelK:ne.level1}`,children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:u}}),a&&a.map(m=>o.playPage===t&&m.Sequence!==999&&m.Sequence===o.sequnce?e.jsx(xN,{pageNumber:t,sequence:m.Sequence,sentence:m.Contents,marginTop:m.MarginTop,marginLeft:m.MarginLeft,color:m.FontColor,clickSentence:s}):e.jsx(mN,{pageNumber:t,sequence:m.Sequence,sentence:m.Contents,marginTop:m.MarginTop,marginLeft:m.MarginLeft}))]})}const hN=new N(navigator.userAgent),_N=hN.phone();function cr({pageNumber:t,pageSeq:o,speakData:n,clickSentence:s}){var h,_,v;To();const[i,u]=r.useState("portrait"),d=((v=(_=(h=r.useContext(se))==null?void 0:h.bookInfo)==null?void 0:_.BookLevel)==null?void 0:v.substring(0,1))||"K";r.useEffect(()=>{const y=()=>{window.matchMedia("(orientation: portrait)").matches?u("portrait"):window.matchMedia("(orientation: landscape)").matches&&u("landscape")};return y(),window.addEventListener("orientationchange",y),window.addEventListener("resize",y),()=>{window.removeEventListener("orientationchange",y),window.removeEventListener("resize",y)}},[]);let a;if(_N){const y=window.innerWidth,g=d==="k"?480:525,b=y/g,k=y/g*750/2;a={transform:`scale(${b})`,top:`calc(50% - ${k+4}px)`}}else a={transform:`scale(${(window.innerHeight-92)/750||1})`};return e.jsx("div",{className:ne.speakBody,children:e.jsx("div",{style:a,className:ne.ebookViewer,children:i==="landscape"?e.jsxs(e.Fragment,{children:[e.jsx(Ys,{pageNumber:t%2===0?t-1:t,pageSeq:o,speakData:n,clickSentence:s}),e.jsx(Ys,{pageNumber:t%2===0?t:t+1,pageSeq:o,speakData:n,clickSentence:s})]}):e.jsx(Ys,{pageNumber:t,pageSeq:o,speakData:n,clickSentence:s})})})}function ur(){return e.jsx("div",{children:e.jsx("button",{className:ne.btnExit,onClick:()=>window.onExitStudy()})})}function lr({speakData:t,quizIndex:o,changeQuizIndex:n,changePlayBarState:s}){const u=r.useRef(new Audio).current;u.autoplay=!0;const[d,a]=r.useState({playPage:t[o].Page,sequnce:t[o].Sequence});r.useEffect(()=>{t&&(t[o].Sequence===999?n(o+1):a({playPage:t[o].Page,sequnce:t[o].Sequence}))},[o]),r.useEffect(()=>{const y=()=>{u.play().then(()=>{s("playing-sentence")}).catch(b=>{s("reset")}).finally(()=>{console.log("finally")})},g=()=>{s("")};return u.addEventListener("canplaythrough",y),u.addEventListener("ended",g),h("",d.playPage,d.sequnce),()=>{u.removeEventListener("canplaythrough",y),u.removeEventListener("ended",g),_()}},[d]);const h=async(y,g,b)=>{if(y===""){const k=t.find(m=>m.Page===g&&m.Sequence===d.sequnce);k?(await fetch(k.SoundPath)).ok&&(u.src=k.SoundPath):(u.src="",u.currentTime=0)}},_=()=>{u.pause(),u.src="",u.currentTime=0,s("")};return{pageSeq:d,playAudio:h,stopAudio:_,changePageSeq:(y,g)=>{a({playPage:y,sequnce:g})}}}const pN="https://api.readinggate.elasolution.com",gN="e874641aac784ff6b9d62c3483f7aaaa";function dr(){const{t}=de(),[o,n]=r.useState(""),s=(u,d,a,h,_,v,y,g,b)=>{try{const k=new Audio(y),m=()=>{const c=k.duration>=5?1.4:1.2,l=Math.ceil(k.duration*1e3*c);if(navigator.mediaDevices.getUserMedia){console.log("The mediaDevices.getUserMedia() method is supported.");const x=w=>{g("recording");const S=new MediaRecorder(w),M=[];S.ondataavailable=z=>{M.push(z.data)},S.onstop=()=>{w.getTracks().forEach(function(C){C.stop()});const z=new Blob(M,{type:S.mimeType}),P=new File([z],"student_audio.mp3",{type:"audio/mp3"});n(URL.createObjectURL(z)),i(u,d,a,h,_,P,y,v,b)},S.onerror=z=>{alert(z)},S.start(),setTimeout(()=>{S.stop()},l)},p=w=>{console.error("The following error occured: "+w),g("reset")},f={audio:!0};navigator.mediaDevices.getUserMedia(f).then(x,p).catch(w=>{alert("예기치 못한 오류가 발생했습니다. 리딩게이트로 연락주시길 바랍니다. 1599-0533"),window.onExitStudy()})}else alert("MediaDevices.getUserMedia() not supported on your browser!"),g("reset")};Ti?k.addEventListener("loadedmetadata",m):k.addEventListener("canplaythrough",m)}catch(k){alert(k)}},i=async(u,d,a,h,_,v,y,g,b)=>{const k=await yN(y),m=new FormData;m.append("student_audio",v),m.append("text",g),m.append("get_phoneme_result",!0),m.append("native_audio",k);const c=()=>{alert("Speak Louder!!!")},l=setTimeout(()=>c(),7e3);xn.post(`${pN}/pron_v2/`,m,{headers:{"X-API-Key":gN,"Content-Type":"multipart/form-data"}}).then(x=>{try{xn.post(`/${Qi}`,{studyId:u,studentHistoryId:d,errorCode:x.status,bookCode:a,libName:"Speak",apiName:"PRON_V2",quizNo:h,sentence:g,tryCount:`${_+1}`,scorePhoneme:x.data.phoneme_result.sentence_score,scoreTotal:x.data.total_score})}catch{console.log("Error save statistics")}switch(x.status){case 200:b(x.data);break;case 401:alert(t("study.인증키가 잘못되었습니다. 리딩게이트로 전화주세요. 1599-0533"));break;case 403:alert(x.data);break;case 422:alert(x.data);break}}).catch(x=>{console.error(x)}).finally(()=>{clearTimeout(l)})};return{userAudio:o,startRecording:s}}const yN=async t=>{const n=await(await fetch(t)).blob(),s=t.split(".").pop(),i=t.split("/").pop(),u={type:`image/${s}`};return new File([n],i,u)},fN=new N(navigator.userAgent),bN=fN.phone();function Si({src:t,color:o}){const n=r.useRef(null);r.useEffect(()=>{(async()=>{try{const a=await fetch(t);if(a.status===200){const h=new AudioContext,_=new FileReader,v=await a.blob(),y=await v.arrayBuffer(),g=async()=>{h.decodeAudioData(y).then(b=>{u(i(s(b)))})};_.addEventListener("load",g),_.readAsArrayBuffer(v)}}catch(a){alert(a)}})()},[]);const s=d=>{const a=[],h=d.getChannelData(0),_=Math.floor(d.duration*10),v=Math.floor(h.length/_);for(let y=0;y<_;y++){let g=v*y,b=0;if(y===0)for(let k=0;k<v;k++)b=b+Math.abs(h[g+k]);else for(let k=0;k<v;k++)b=b+Math.abs(h[g-k]);a.push(b/v)}return a},i=d=>{const a=Math.max(...d),h=Math.pow(a,-1);return d.map(v=>v*h)},u=d=>{if(n.current){const a=n.current.getContext("2d"),h=800/window.innerWidth||1;if(a){n.current.style.width="100%",n.current.style.height="100%",n.current.width=n.current.offsetWidth,n.current.height=n.current.offsetHeight,a.scale(h,1),a.clearRect(0,0,n.current.width,n.current.height),a.lineWidth=bN?1:3,a.strokeStyle=o,a.beginPath();let _=n.current.width*(window.innerWidth/800)/(d.length-1),v=0;a.moveTo(v-1,n.current.height);for(let y=0;y<d.length-1;y++){let g=d[y]>.5?d[y]*.97:d[y],b=d[y+1]>.5?d[y+1]*.97:d[y+1],k=n.current.height*(1-g),m=n.current.height*(1-b);y===0&&a.lineTo(v-1,k);let c=v+_,l=(v+c)/2,x=(k+m)/2,p=(l+v)/2,f=(l+c)/2;a.quadraticCurveTo(p,k,l,x),a.quadraticCurveTo(f,m,c,m),v+=_}a.stroke(),a.lineTo(n.current.width,n.current.height)}}};return e.jsx("div",{className:ne.visualizer,children:e.jsx("canvas",{ref:n,style:{position:"relative"}})})}function mr({isRetry:t,sentence:o,sentenceScore:n,tryCount:s,nativeAudio:i,userAudio:u,changeRecordResult:d,changeRetry:a}){const _=r.useRef(new Audio).current;_.autoplay=!0;let y=r.useRef().current;const[g,b]=r.useState({src:"",type:""}),[k,m]=r.useState(0),[c,l]=r.useState(0),[x,p]=r.useState(!1);r.useEffect(()=>{Pa()},[]),r.useEffect(()=>{if(g.src!=="")if(_.src=g.src,g.type==="user"){const M=()=>{_.play()},z=async()=>{const B=await br(g.src);y=setInterval(()=>{const R=_.currentTime/B;R===0?clearInterval(y):l(R)},25),_.play()},P=B=>{console.log(B.error),alert(B.error)},C=()=>{clearInterval(y)},j=()=>{l(0),clearInterval(y)};return _.addEventListener("canplaythrough",M),_.addEventListener("playing",z),_.addEventListener("error",P),_.addEventListener("pause",C),_.addEventListener("ended",j),()=>{_.removeEventListener("canplaythrough",M),_.removeEventListener("playing",z),_.removeEventListener("error",P),_.removeEventListener("pause",C),_.removeEventListener("ended",j),_.pause(),_.currentTime=0,m(0),l(0),clearInterval(y),_.remove()}}else{const M=()=>{_.play()},z=()=>{y=setInterval(()=>{const B=_.currentTime/_.duration;B===0?clearInterval(y):m(B)},25),_.play()},P=B=>{console.log(B.error),alert(B.error)},C=()=>{clearInterval(y)},j=()=>{m(0),clearInterval(y)};return _.addEventListener("canplaythrough",M),_.addEventListener("playing",z),_.addEventListener("error",P),_.addEventListener("pause",C),_.addEventListener("ended",j),()=>{_.removeEventListener("canplaythrough",M),_.removeEventListener("playing",z),_.removeEventListener("error",P),_.removeEventListener("pause",C),_.removeEventListener("ended",j),_.pause(),_.currentTime=0,m(0),l(0),clearInterval(y),_.remove()}}},[g]);const f=()=>{_.pause(),g.type==="native"?_.play():b({src:i,type:"native"})},w=()=>{_.pause(),g.type==="user"?_.play():b({src:u,type:"user"})},S=()=>{d(!1)};return e.jsx("div",{className:ne.screenBlock,children:e.jsxs("div",{className:ne.popUp,children:[e.jsxs("div",{className:ne.row1,children:[e.jsxs("div",{className:`${ne.btn} ${ne.gray}`,onClick:()=>f(),children:[e.jsx("span",{children:"Native"}),e.jsx("span",{className:ne.iconSpeaker})]}),e.jsxs("div",{className:`${ne.btn} ${ne.gray}`,onClick:()=>w(),children:[e.jsx("span",{children:"My"}),e.jsx("span",{className:ne.iconSpeaker})]}),(n.speech_detected&&n.total_score>=be&&n.phoneme_result.sentence_score>=be||t)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:`${ne.btn} ${ne.retry}`,onClick:()=>{t?S():a(!0)},children:e.jsx("span",{className:ne.iconRetry})})})]}),e.jsxs("div",{className:ne.row2,children:[e.jsxs("div",{className:ne.graph,children:[e.jsx(Si,{src:i,color:"#d2d2d2"}),e.jsx(Si,{src:u,color:n.speech_detected&&n.total_score>=be&&n.phoneme_result.sentence_score>=be?"#3ab6ff":"#ff2424"}),e.jsxs("div",{className:ne.wrapperProgress,children:[e.jsx("div",{style:{left:`${k*100}%`},className:`${ne.progressBar} ${ne.native}`,children:e.jsx("div",{className:ne.progressArrow})}),e.jsx("div",{style:{left:`${c*100}%`},className:`${ne.progressBar} ${ne.student} ${n.speech_detected&&n.total_score>=be&&n.phoneme_result.sentence_score>=be?ne.passed:null}`,children:e.jsx("div",{className:ne.progressArrow})})]})]}),e.jsx("div",{className:ne.sentence,children:n.phoneme_result.words.map((M,z)=>{const P=o.split(" ");return e.jsx("div",{className:`${ne.word} ${n.phoneme_result.sentence_score<be?ne.red:""}`,children:P[z]})})}),e.jsx("div",{className:ne.phonemes,style:{display:x?"flex":"none"},children:n.phoneme_result.words.map(M=>e.jsxs("div",{className:ne.wordContainer,children:[e.jsx("div",{className:ne.row1,children:M.word}),e.jsx("div",{className:ne.row2,children:M.phonemes.map(z=>e.jsxs("div",{className:ne.phonemeResult,children:[e.jsx("div",{className:`${ne.phoneme} 
                            ${z.score<At&&ne.red}
                            ${z.score>=At&&z.score<Nt&&ne.orange}  
                            ${z.score>=Nt&&ne.green}  
                            `,children:z.phoneme}),e.jsxs("div",{className:ne.phonemeScore,children:[Math.floor(z.score),"%"]})]}))})]}))}),e.jsxs("div",{className:ne.btnToggle,onClick:()=>{p(!x)},children:[x?"close":"detail",e.jsx("span",{className:`${ne.icoChev} ${x&&ne.rotate}`})]})]}),e.jsxs("div",{className:`${ne.row3} ${n.speech_detected&&n.total_score>=be&&n.phoneme_result.sentence_score>=be?ne.goodJob:ne.tryAgain}`,onClick:()=>{t?a(!1):S()},children:[n.speech_detected&&n.total_score>=be&&n.phoneme_result.sentence_score>=be?e.jsx("div",{className:ne.txt,children:"Good Job!"}):e.jsx(e.Fragment,{children:t?e.jsx(e.Fragment,{children:e.jsx("div",{className:ne.txt,children:"Try Again"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:ne.txt,children:["Try Again (",s+1," / 3)"]})})}),e.jsx("div",{className:ne.iconArrow})]})]})})}const vN="/study/BookReading/assets/good_job-1825e699.mp3",wN="/study/BookReading/assets/good_effort-991632df.mp3",kN=new N(navigator.userAgent),mn=kN.phone();function xr({isPass:t}){const{handler:o,bookInfo:n}=r.useContext(se);return r.useEffect(()=>{eo(t?vN:wN)},[]),e.jsx("div",{className:`${ne.wrapperResult} ${mn?"mobile":""}`,style:{backgroundImage:`url(${n.BackgroundImage})`},children:e.jsxs("div",{className:ne.resultMark,children:[t?e.jsxs(e.Fragment,{children:[e.jsx(bw,{width:mn?300:450,height:mn?300:450}),e.jsx("div",{className:ne.txt,children:"Good Job!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(vw,{width:mn?320:500,height:mn?160:350}),e.jsx("div",{className:ne.txt,children:"Good Effort"})]}),e.jsx("button",{className:`${ne.btnExitResult} ${mn?"mobile":""}`,onClick:()=>{o.changeView("story")}})]})})}const SN=new N(navigator.userAgent),jN=SN.phone();function zN({playBarState:t,tryCount:o,speakData:n,isRetry:s,quizIndex:i,changeQuizIndex:u,changePlayBarState:d,increaseTryCount:a,resetTryCount:h,changeTryCount:_,changeRetry:v}){const{studyInfo:y,bookInfo:g}=r.useContext(se),b=r.useRef(!1),k=r.useRef(""),[m,c]=r.useState(!1),{pageSeq:l,playAudio:x,stopAudio:p,changePageSeq:f}=lr({speakData:n,quizIndex:i,changeQuizIndex:u,changePlayBarState:d}),{userAudio:w,startRecording:S}=dr(),[M,z]=r.useState(window.innerWidth),[P,C]=r.useState(window.innerHeight),[j,B]=r.useState(),[R,O]=r.useState(!1);r.useEffect(()=>{const F=()=>{z(window.innerWidth),C(window.innerHeight)};return F(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}},[jN,P]),r.useEffect(()=>{if(j){const F=j.total_score>=be&&j.phoneme_result.sentence_score>=be,E=(j.total_score+j.phoneme_result.sentence_score)/2;F||o+1>=3?I(E):O(!0)}},[j]),r.useEffect(()=>{t===""?(B(void 0),b.current=!1):t==="reset"&&d("")},[t]),r.useEffect(()=>{if(j&&!R){const E=!(n.filter((A,Q)=>A.Sentence!==null&&Q>i&&A.QuizNo>0).length>0);if(s)b.current=!1,_(-1),d(""),V(),B(void 0);else{const A=j.total_score>=be&&j.phoneme_result.sentence_score>=be,Q=(j.total_score+j.phoneme_result.sentence_score)/2;A&&Q>=be||o+1>=3||o===-1?E?c(!0):u(i+1):a()}}},[R]),r.useEffect(()=>{(s||j)&&G(!1)},[s]),r.useEffect(()=>{B(void 0),h(),b.current=!1},[i]),r.useEffect(()=>{o>=3?O(!0):(b.current=!1,V(),d(""))},[o]);const W=()=>{b.current||V()},V=()=>{b.current||(b.current=!0,d("playing-sentence"),x("",l.playPage,l.sequnce))},q=F=>{B(F)},T=()=>{b.current||(b.current=!0,p(),S(y.studyId,y.studentHistoryId,g.BookCode,n[i].QuizNo,o,n[i].Sentence,n[i].SoundPath,d,q))},I=async F=>{const A=!(n.filter((X,te)=>X.Sentence!==null&&te>i&&X.Sequence!==999).length>0),Q={studyId:y.studyId,studentHistoryId:y.studentHistoryId,challengeNumber:n[0].ChallengeNumber,page:n[i].Page,sequence:n[i].Sequence,quizNo:n[i].QuizNo,sentence:n[i].Sentence,scoreOverall:F,wordsJson:JSON.stringify(j),isLastQuiz:A};let L;s?L={result:0,resultMessage:""}:L=await Ii(Q),Number(L.result)===0&&(O(!0),(L.resultMessage==="PASS"||L.resultMessage==="FAIL")&&(k.current=L.resultMessage))},G=F=>{O(F)},U=n.filter(F=>F.QuizNo!==null&&F.QuizNo>0).length,Y=n[i].QuizNo/U*100;return e.jsx(e.Fragment,{children:m?e.jsx(xr,{isPass:k.current==="PASS"}):e.jsx(e.Fragment,{children:e.jsxs("div",{style:{width:M,height:P},children:[e.jsx(ur,{}),e.jsx(cr,{pageNumber:l.playPage,pageSeq:l,speakData:n,clickSentence:W}),e.jsx(ar,{progressWidth:Y,playBarState:t,nativeAudio:n[i].SoundPath,playSentence:V,startRecord:T}),R?e.jsx(e.Fragment,{children:j&&e.jsx(mr,{isRetry:s,sentence:n[i].Sentence,sentenceScore:j,tryCount:o,nativeAudio:n[i].SoundPath,userAudio:w,changeRecordResult:G,changeRetry:v})}):e.jsx(e.Fragment,{})]})})})}const $N=new N(navigator.userAgent),CN=$N.phone();function QN({playBarState:t,tryCount:o,speakData:n,isRetry:s,quizIndex:i,changeQuizIndex:u,changePlayBarState:d,increaseTryCount:a,resetTryCount:h,changeTryCount:_,changeRetry:v}){const{studyInfo:y,bookInfo:g}=r.useContext(se),b=r.useRef(!1),k=r.useRef(""),[m,c]=r.useState(!1),{pageSeq:l,playAudio:x,stopAudio:p,changePageSeq:f}=lr({speakData:n,quizIndex:i,changeQuizIndex:u,changePlayBarState:d}),{userAudio:w,startRecording:S}=dr(),[M,z]=r.useState(window.innerWidth),[P,C]=r.useState(window.innerHeight),[j,B]=r.useState(),[R,O]=r.useState(!1);r.useEffect(()=>{const Y=()=>{z(window.innerWidth),C(window.innerHeight)};return Y(),window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y)}},[CN,P]),r.useEffect(()=>{if(j){const Y=j.total_score>=be&&j.phoneme_result.sentence_score>=be,F=(j.total_score+j.phoneme_result.sentence_score)/2;Y||o+1>=3?I(F):O(!0)}},[j]),r.useEffect(()=>{t===""?(B(void 0),b.current=!1):t==="reset"&&d("")},[t]),r.useEffect(()=>{if(j&&!R){const F=!(n.filter((E,A)=>E.Sentence!==null&&A>i&&E.QuizNo>0).length>0);if(s)b.current=!1,_(-1),d(""),V(),B(void 0);else{const E=j.total_score>=be&&j.phoneme_result.sentence_score>=be,A=(j.total_score+j.phoneme_result.sentence_score)/2;E&&A>=be||o+1>=3||o===-1?F?c(!0):u(i+1):a()}}},[R]),r.useEffect(()=>{(s||j)&&G(!1)},[s]),r.useEffect(()=>{B(void 0),h(),b.current=!1},[i]),r.useEffect(()=>{o>=3?O(!0):(b.current=!1,V(),d(""))},[o]);const W=()=>{b.current||V()},V=()=>{b.current||(b.current=!0,d("playing-sentence"),x("",l.playPage,l.sequnce))},q=Y=>{B(Y)},T=()=>{b.current||(b.current=!0,p(),S(y.studyId,y.studentHistoryId,g.BookCode,n[i].QuizNo,o,n[i].Sentence,n[i].SoundPath,d,q))},I=async Y=>{const E=!(n.filter((L,X)=>L.Sentence!==null&&X>i&&L.QuizNo>0).length>0),A={studyId:y.studyId,studentHistoryId:y.studentHistoryId,challengeNumber:n[0].ChallengeNumber,page:n[i].Page,sequence:n[i].Sequence,quizNo:n[i].QuizNo,sentence:n[i].Sentence,scoreOverall:Y,wordsJson:JSON.stringify(j),isLastQuiz:E};let Q;s?Q={result:0,resultMessage:""}:Q=await Ii(A),Number(Q.result)===0&&(O(!0),(Q.resultMessage==="PASS"||Q.resultMessage==="FAIL")&&(k.current=Q.resultMessage))},G=Y=>{O(Y)},U=n[i].Page/n[n.length-1].Page*100;return e.jsx(e.Fragment,{children:m?e.jsx(xr,{isPass:k.current==="PASS"}):e.jsx(e.Fragment,{children:e.jsxs("div",{style:{width:M,height:P},children:[e.jsx(ur,{}),e.jsx(cr,{pageNumber:l.playPage,pageSeq:l,speakData:n,clickSentence:W}),e.jsx(ar,{progressWidth:U,playBarState:t,nativeAudio:n[i].SoundPath,playSentence:V,startRecord:T}),R?e.jsx(e.Fragment,{children:j&&e.jsx(mr,{isRetry:s,sentence:n[i].Sentence,sentenceScore:j,tryCount:o,nativeAudio:n[i].SoundPath,userAudio:w,changeRecordResult:G,changeRetry:v})}):e.jsx(e.Fragment,{})]})})})}const AN=new N(navigator.userAgent),ji=AN.phone();function NN(){const{handler:t,studyInfo:o,bookInfo:n}=r.useContext(se),[s,i]=r.useState(window.innerWidth),[u,d]=r.useState(window.innerHeight),[a,h]=r.useState(!0),[_,v]=Aa(Qa,{mode:o.mode,studentHistoryId:o.studentHistoryId,studyId:o.studyId}),[y,g]=r.useState(!1),[b,k]=r.useState(0),[m,c]=r.useState(0),[l,x]=r.useState(""),[p,f]=r.useState(!0);r.useEffect(()=>{const B=()=>{i(window.innerWidth),d(window.innerHeight)};return B(),window.addEventListener("resize",B),()=>{window.removeEventListener("resize",B)}},[ji,u]),r.useEffect(()=>{if(_){let B=0;if(v.length>0){const R=v[v.length-1];B=_.findIndex(W=>W.Page===R.Page&&W.Sequence===R.Sequence&&W.DataPath!=="")+1}for(;!(_[B].Contents!==""&&_[B].DataPath!=="");)B++;c(B)}},[_]);const w=B=>{c(B)},S=B=>{x(B)},M=()=>{k(b+1)},z=()=>{k(0)},P=B=>{k(B)},C=()=>{h(!1)},j=B=>{g(B)};return _?e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:ne.screenBlock,style:{backgroundImage:`url(${n.BackgroundImage})`},children:[e.jsxs("div",{className:`${ne.speakButtonArea} animate__animated ${p?"animate__bounceInRight":"animate__bounceOutLeft"}`,children:[e.jsx("img",{src:rN,alt:"",width:150,height:"auto",style:{position:"relative",zIndex:2}}),e.jsx("div",{className:ne.startButton,onClick:()=>{f(!1),setTimeout(()=>{C()},1e3)},children:"Let's Speak!"}),e.jsx("div",{className:`${ne.recAni} animate__animated ${p?"animate__zoomIn":"animate__zoomOut"}`,children:e.jsx(yw,{})})]}),e.jsx("div",{className:ne.screenBgColor})]}):e.jsx(e.Fragment,{children:ji?e.jsxs("div",{className:ne.speackBodyBg,style:{backgroundImage:`url(${n.BackgroundImage})`},children:[e.jsx("div",{style:{position:"relative",zIndex:2},children:e.jsx(QN,{playBarState:l,tryCount:b,speakData:_,isRetry:y,quizIndex:m,changeQuizIndex:w,changePlayBarState:S,increaseTryCount:M,resetTryCount:z,changeTryCount:P,changeRetry:j})}),e.jsx("div",{className:ne.speackBodyBgColor})]}):e.jsxs("div",{className:ne.speackBodyBg,style:{backgroundImage:`url(${n.BackgroundImage})`},children:[e.jsx("div",{style:{position:"relative",zIndex:2},children:e.jsx(zN,{playBarState:l,tryCount:b,speakData:_,isRetry:y,quizIndex:m,changeQuizIndex:w,changePlayBarState:S,increaseTryCount:M,resetTryCount:z,changeTryCount:P,changeRetry:j})}),e.jsx("div",{className:ne.speackBodyBgColor})]})})}):e.jsx(e.Fragment,{children:"Loading..."})}const TN=()=>{const{handler:t}=r.useContext(se);r.useEffect(()=>{console.log(t.viewStudy)},[t.viewStudy]);let o;switch(t.viewStudy){case"story":o=e.jsx(ki,{});break;case"speaking":o=e.jsx(NN,{});break;case"quiz":o=e.jsx(Xi,{});break;default:o=e.jsx(ki,{})}return o};function Xs(){const{t}=de(),{bookInfo:o,studyInfo:n,handler:s}=r.useContext(se),[i,u]=r.useState(3),d=h=>{u(h)},a=async()=>{(await Ni(n.studyId,n.studentHistoryId,i*10)).success&&s.changeView("quiz")};return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${o.SurfaceImage}`})}),n.pbookStorySoundPath!==""&&n.pbookStorySoundPath!==void 0&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:$.wrapperSound,children:e.jsx("audio",{src:n.pbookStorySoundPath,controls:!0,controlsList:"nodownload"})})]}),e.jsxs("div",{className:$.groupChoose,children:[e.jsx("div",{className:$.txtQuestion,children:"How do you like this book?"}),e.jsx("div",{className:$.groupChooseRating,children:e.jsx(rr,{starCount:i,changeStarCount:d})}),e.jsx("div",{className:$.groupConfirm,children:e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{s.isPreference?s.changeView("quiz"):a()},children:t("story.퀴즈 풀기")})})]}),e.jsxs("div",{className:$.groupComment,children:[e.jsx("span",{className:$.icoExclamationMark}),e.jsx("span",{className:$.txtComment,children:e.jsx(_n,{i18nKey:"story.모든 학습을 완료하고 평균 70점을 넘어야 포인트를 획득 할 수 있습니다.",components:{b:e.jsx("b",{})}})})]})]})})}function zi(){const{t}=de(),{bookInfo:o,handler:n,studyInfo:s}=r.useContext(se);return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${o.SurfaceImage}`})}),s.pbookStorySoundPath!==""&&s.pbookStorySoundPath!==void 0&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:$.wrapperSound,children:e.jsx("audio",{src:s.pbookStorySoundPath,controls:!0,controlsList:"nodownload"})})]}),e.jsx("div",{className:$.groupComment,children:e.jsxs("span",{className:$.txtComment,children:[e.jsx("div",{children:e.jsx(_n,{style:{color:"red"},i18nKey:"story.이미 한번 포인트를 획득한 학습입니다.",components:{b:e.jsx("b",{})}})}),e.jsx("div",{children:t("story.두번째 학습을 통과하여도 50% 포인트만 획득할 수 있습니다.")}),e.jsx("div",{children:t("story.계속 학습하시겠습니까?")})]})}),e.jsx("div",{className:$.groupChoose,children:e.jsxs("div",{className:$.groupConfirm,children:[e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{n.changeView("quiz")},children:t("common.네")}),e.jsx("button",{className:`${$.btnConfirm} ${$.gray}`,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:t("common.아니오")})]})})]})})}function IN(){const{t}=de(),{bookInfo:o,handler:n,studyInfo:s}=r.useContext(se);return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${o.SurfaceImage}`})}),s.pbookStorySoundPath!==""&&s.pbookStorySoundPath!==void 0&&e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:$.wrapperSound,children:e.jsx("audio",{src:s.pbookStorySoundPath,controls:!0,controlsList:"nodownload"})})]}),e.jsx("div",{className:$.groupComment,children:e.jsxs("span",{className:$.txtComment,children:[e.jsx("div",{children:t("story.이미 두 번 포인트를 획득한 학습입니다.")}),e.jsx("div",{children:e.jsx(_n,{i18nKey:"story.더 이상 포인트를 획득할 수 없습니다.",components:{b:e.jsx("b",{})}})}),e.jsx("div",{children:t("story.계속 학습하시겠습니까?")})]})}),e.jsx("div",{className:$.groupChoose,children:e.jsxs("div",{className:$.groupConfirm,children:[e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{n.changeView("quiz")},children:t("common.네")}),e.jsx("button",{className:`${$.btnConfirm} ${$.gray}`,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:t("common.아니오")})]})})]})})}const EN=t=>{const{handler:o,bookInfo:n}=r.useContext(se);let s=e.jsx(e.Fragment,{});if(o.isPreference)s=e.jsx(Xi,{});else switch(n.FullEasyCode){case"093001":s=e.jsx(Xs,{});break;case"093002":s=e.jsx(zi,{});break;case"093003":case"093004":case"093005":n.FirstFullEasyCode==="093006"?o.changeView("quiz"):s=e.jsx(Xs,{});break;case"093006":n.FirstFullEasyCode==="093001"||n.FirstFullEasyCode==="093003"||n.FirstFullEasyCode==="093004"||n.FirstFullEasyCode==="093005"?s=e.jsx(zi,{}):s=e.jsx(Xs,{});break;case"093007":s=e.jsx(IN,{});break}return s};function BN({onUpdateReviewInform:t}){const{t:o}=de(),{bookInfo:n}=r.useContext(se);return e.jsx("div",{className:`${$.ebookRating}`,children:e.jsxs("div",{className:`${$.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:$.groupBookcover,children:e.jsx("img",{className:$.imgBookcover,src:`${n.SurfaceImage}`})}),e.jsxs("div",{className:$.groupChoose,children:[e.jsx("div",{className:$.txtQuestion,children:"Let's start the study review."}),e.jsx("div",{className:$.groupConfirm,children:e.jsx("button",{className:`${$.btnConfirm} ${$.blue}`,onClick:()=>{t()},children:"Go!"})})]}),e.jsxs("div",{className:$.groupComment,children:[e.jsx("span",{className:$.icoExclamationMark}),e.jsx("span",{className:$.txtComment,children:o("story.다시 보기 모드에서는 학습을 완료해도 포인트가 제공되지 않아요.")})]})]})})}const sT=()=>{const{studyInfo:t}=r.useContext(se);let o="error";t.bookType==="EB"?o="ebook":t.bookType==="PB"&&(o="pbook");const n=o,[s,i]=r.useState(!1),u=()=>{i(!0)};let d;return n==="ebook"?d=e.jsx(TN,{}):n==="pbook"&&(d=e.jsx(EN,{})),e.jsx("div",{children:t.isReview&&!s?e.jsx(BN,{onUpdateReviewInform:u}):d})};export{sT as default};
