import{r as u}from"./react-352f2a77.js";import{c as _}from"./html-parse-stringify-00dfa3a5.js";const P=(...e)=>{console!=null&&console.warn&&(A(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},D={},B=(...e)=>{A(e[0])&&D[e[0]]||(A(e[0])&&(D[e[0]]=new Date),P(...e))},U=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},q=(e,t,n)=>{e.loadNamespaces(t,U(e,n))},J=(e,t,n,i)=>{A(n)&&(n=[n]),n.forEach(w=>{e.options.ns.indexOf(w)<0&&e.options.ns.push(w)}),e.loadLanguages(t,U(e,i))},ee=(e,t,n={})=>!t.languages||!t.languages.length?(B("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(i,w)=>{var s;if(((s=n.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!w(i.isLanguageChangingTo,e))return!1}}),A=e=>typeof e=="string",V=e=>typeof e=="object"&&e!==null,te=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ne={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},se=e=>ne[e],ae=e=>e.replace(te,se);let R={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ae};const re=(e={})=>{R={...R,...e}},Y=()=>R;let G;const oe=e=>{G=e},W=()=>G,M=(e,t)=>{var i;if(!e)return!1;const n=((i=e.props)==null?void 0:i.children)??e.children;return t?n.length>0:!!n},K=e=>{var n,i;if(!e)return[];const t=((n=e.props)==null?void 0:n.children)??e.children;return(i=e.props)!=null&&i.i18nIsDynamicList?z(t):t},ie=e=>Array.isArray(e)&&e.every(u.isValidElement),z=e=>Array.isArray(e)?e:[e],le=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},X=(e,t)=>{if(!e)return"";let n="";const i=z(e),w=t!=null&&t.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return i.forEach((s,f)=>{if(A(s))n+=`${s}`;else if(u.isValidElement(s)){const{props:x,type:m}=s,l=Object.keys(x).length,h=w.indexOf(m)>-1,E=x.children;if(!E&&h&&!l)n+=`<${m}/>`;else if(!E&&(!h||l)||x.i18nIsDynamicList)n+=`<${f}></${f}>`;else if(h&&l===1&&A(E))n+=`<${m}>${E}</${m}>`;else{const I=X(E,t);n+=`<${f}>${I}</${f}>`}}else if(s===null)P("Trans: the passed in value is invalid - seems you passed in a null child.");else if(V(s)){const{format:x,...m}=s,l=Object.keys(m);if(l.length===1){const h=x?`${l[0]}, ${x}`:l[0];n+=`{{${h}}}`}else P("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else P("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),n},ce=(e,t,n,i,w,s)=>{if(t==="")return[];const f=i.transKeepBasicHtmlNodesFor||[],x=t&&new RegExp(f.map(r=>`<${r}`).join("|")).test(t);if(!e&&!x&&!s)return[t];const m={},l=r=>{z(r).forEach(o=>{A(o)||(M(o)?l(K(o)):V(o)&&!u.isValidElement(o)&&Object.assign(m,o))})};l(e);const h=_.parse(`<0>${t}</0>`),E={...m,...w},I=(r,g,o)=>{var c;const p=K(r),j=b(p,g.children,o);return ie(p)&&j.length===0||(c=r.props)!=null&&c.i18nIsDynamicList?p:j},k=(r,g,o,p,j)=>{r.dummy?(r.children=g,o.push(u.cloneElement(r,{key:p},j?void 0:g))):o.push(...u.Children.map([r],c=>{const a={...c.props};return delete a.i18nIsDynamicList,u.createElement(c.type,{...a,key:p,ref:c.ref},j?null:g)}))},b=(r,g,o)=>{const p=z(r);return z(g).reduce((c,a,S)=>{var T,C;const y=((C=(T=a.children)==null?void 0:T[0])==null?void 0:C.content)&&n.services.interpolator.interpolate(a.children[0].content,E,n.language);if(a.type==="tag"){let d=p[parseInt(a.name,10)];o.length===1&&!d&&(d=o[0][a.name]),d||(d={});const N=Object.keys(a.attrs).length!==0?le({props:a.attrs},d):d,L=u.isValidElement(N),O=L&&M(a,!0)&&!a.voidElement,F=x&&V(N)&&N.dummy&&!L,H=V(e)&&Object.hasOwnProperty.call(e,a.name);if(A(N)){const $=n.services.interpolator.interpolate(N,E,n.language);c.push($)}else if(M(N)||O){const $=I(N,a,o);k(N,$,c,S)}else if(F){const $=b(p,a.children,o);k(N,$,c,S)}else if(Number.isNaN(parseFloat(a.name)))if(H){const $=I(N,a,o);k(N,$,c,S,a.voidElement)}else if(i.transSupportBasicHtmlNodes&&f.indexOf(a.name)>-1)if(a.voidElement)c.push(u.createElement(a.name,{key:`${a.name}-${S}`}));else{const $=b(p,a.children,o);c.push(u.createElement(a.name,{key:`${a.name}-${S}`},$))}else if(a.voidElement)c.push(`<${a.name} />`);else{const $=b(p,a.children,o);c.push(`<${a.name}>${$}</${a.name}>`)}else if(V(N)&&!L){const $=a.children[0]?y:null;$&&c.push($)}else k(N,y,c,S,a.children.length!==1||!y)}else if(a.type==="text"){const d=i.transWrapTextNodes,N=s?i.unescape(n.services.interpolator.interpolate(a.content,E,n.language)):n.services.interpolator.interpolate(a.content,E,n.language);d?c.push(u.createElement(d,{key:`${a.name}-${S}`},N)):c.push(N)}return c},[])},v=b([{dummy:!0,children:e||[]}],h,z(e||[]));return K(v[0])};function ue({children:e,count:t,parent:n,i18nKey:i,context:w,tOptions:s={},values:f,defaults:x,components:m,ns:l,i18n:h,t:E,shouldUnescape:I,...k}){var d,N,L,O;const b=h||W();if(!b)return B("You will need to pass in an i18next instance by using i18nextReactModule"),e;const v=E||b.t.bind(b)||(F=>F),r={...Y(),...(d=b.options)==null?void 0:d.react};let g=l||v.ns||((N=b.options)==null?void 0:N.defaultNS);g=A(g)?[g]:g||["translation"];const o=X(e,r),p=x||o||r.transEmptyNodeValue||i,{hashTransKey:j}=r,c=i||(j?j(o||p):o||p);(O=(L=b.options)==null?void 0:L.interpolation)!=null&&O.defaultVariables&&(f=f&&Object.keys(f).length>0?{...f,...b.options.interpolation.defaultVariables}:{...b.options.interpolation.defaultVariables});const a=f||t!==void 0||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},S={...s,context:w||s.context,count:t,...f,...a,defaultValue:p,ns:g},y=c?v(c,S):p;m&&Object.keys(m).forEach(F=>{const H=m[F];if(typeof H.type=="function"||!H.props||!H.props.children||y.indexOf(`${F}/>`)<0&&y.indexOf(`${F} />`)<0)return;function $(){return u.createElement(u.Fragment,null,H)}m[F]=u.createElement($)});const T=ce(m||e,y,b,r,S,I),C=n??r.defaultTransParent;return C?u.createElement(C,k,T):T}const ye={type:"3rdParty",init(e){re(e.options.react),oe(e)}},Q=u.createContext();class fe{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{var i;(i=this.usedNamespaces)[n]??(i[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function he({children:e,count:t,parent:n,i18nKey:i,context:w,tOptions:s={},values:f,defaults:x,components:m,ns:l,i18n:h,t:E,shouldUnescape:I,...k}){var o;const{i18n:b,defaultNS:v}=u.useContext(Q)||{},r=h||b||W(),g=E||(r==null?void 0:r.t.bind(r));return ue({children:e,count:t,parent:n,i18nKey:i,context:w,tOptions:s,values:f,defaults:x,components:m,ns:l||(g==null?void 0:g.ns)||v||((o=r==null?void 0:r.options)==null?void 0:o.defaultNS),i18n:r,t:E,shouldUnescape:I,...k})}const pe=(e,t)=>{const n=u.useRef();return u.useEffect(()=>{n.current=t?n.current:e},[e,t]),n.current},Z=(e,t,n,i)=>e.getFixedT(t,n,i),de=(e,t,n,i)=>u.useCallback(Z(e,t,n,i),[e,t,n,i]),be=(e,t={})=>{var j,c,a,S;const{i18n:n}=t,{i18n:i,defaultNS:w}=u.useContext(Q)||{},s=n||i||W();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new fe),!s){B("You will need to pass in an i18next instance by using initReactI18next");const y=(C,d)=>A(d)?d:V(d)&&A(d.defaultValue)?d.defaultValue:Array.isArray(C)?C[C.length-1]:C,T=[y,{},!1];return T.t=y,T.i18n={},T.ready=!1,T}(j=s.options.react)!=null&&j.wait&&B("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const f={...Y(),...s.options.react,...t},{useSuspense:x,keyPrefix:m}=f;let l=e||w||((c=s.options)==null?void 0:c.defaultNS);l=A(l)?[l]:l||["translation"],(S=(a=s.reportNamespaces).addUsedNamespaces)==null||S.call(a,l);const h=(s.isInitialized||s.initializedStoreOnce)&&l.every(y=>ee(y,s,f)),E=de(s,t.lng||null,f.nsMode==="fallback"?l:l[0],m),I=()=>E,k=()=>Z(s,t.lng||null,f.nsMode==="fallback"?l:l[0],m),[b,v]=u.useState(I);let r=l.join();t.lng&&(r=`${t.lng}${r}`);const g=pe(r),o=u.useRef(!0);u.useEffect(()=>{const{bindI18n:y,bindI18nStore:T}=f;o.current=!0,!h&&!x&&(t.lng?J(s,t.lng,l,()=>{o.current&&v(k)}):q(s,l,()=>{o.current&&v(k)})),h&&g&&g!==r&&o.current&&v(k);const C=()=>{o.current&&v(k)};return y&&(s==null||s.on(y,C)),T&&(s==null||s.store.on(T,C)),()=>{o.current=!1,s&&(y==null||y.split(" ").forEach(d=>s.off(d,C))),T&&s&&T.split(" ").forEach(d=>s.store.off(d,C))}},[s,r]),u.useEffect(()=>{o.current&&h&&v(I)},[s,m,h]);const p=[b,s,h];if(p.t=b,p.i18n=s,p.ready=h,h||!h&&!x)return p;throw new Promise(y=>{t.lng?J(s,t.lng,l,()=>y()):q(s,l,()=>y())})};export{he as T,ye as i,be as u};
